diff -Npru stock-services/smali/com/android/server/am/BroadcastQueue.smali ext-services/smali/com/android/server/am/BroadcastQueue.smali
--- stock-services/smali/com/android/server/am/BroadcastQueue.smali	2012-11-06 15:04:29.098613155 -0600
+++ ext-services/smali/com/android/server/am/BroadcastQueue.smali	2012-11-06 15:04:20.054568304 -0600
@@ -559,6 +559,118 @@
     goto :goto_153
 .end method
 
+.method private enforcePrivacyPermission(Ljava/lang/Object;Lcom/android/server/am/BroadcastRecord;)V
+    .registers 10
+
+    if-eqz p2, :cond_3b
+
+    iget-object v4, p2, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    if-eqz v4, :cond_3b
+
+    iget-object v4, p2, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    invoke-virtual {v4}, Landroid/content/Intent;->getAction()Ljava/lang/String;
+
+    move-result-object v4
+
+    if-eqz v4, :cond_3b
+
+    const/4 v2, 0x0
+
+    const/4 v3, -0x1
+
+    :try_start_10
+    instance-of v4, p1, Lcom/android/server/am/BroadcastFilter;
+
+    if-eqz v4, :cond_3c
+
+    move-object v0, p1
+
+    check-cast v0, Lcom/android/server/am/BroadcastFilter;
+
+    move-object v4, v0
+
+    iget-object v4, v4, Lcom/android/server/am/BroadcastFilter;->receiverList:Lcom/android/server/am/ReceiverList;
+
+    iget-object v4, v4, Lcom/android/server/am/ReceiverList;->app:Lcom/android/server/am/ProcessRecord;
+
+    iget-object v4, v4, Lcom/android/server/am/ProcessRecord;->info:Landroid/content/pm/ApplicationInfo;
+
+    iget-object v2, v4, Landroid/content/pm/ApplicationInfo;->packageName:Ljava/lang/String;
+
+    check-cast p1, Lcom/android/server/am/BroadcastFilter;
+
+    iget-object v4, p1, Lcom/android/server/am/BroadcastFilter;->receiverList:Lcom/android/server/am/ReceiverList;
+
+    iget-object v4, v4, Lcom/android/server/am/ReceiverList;->app:Lcom/android/server/am/ProcessRecord;
+
+    iget-object v4, v4, Lcom/android/server/am/ProcessRecord;->info:Landroid/content/pm/ApplicationInfo;
+
+    iget v3, v4, Landroid/content/pm/ApplicationInfo;->uid:I
+    :try_end_2a
+    .catch Ljava/lang/Exception; {:try_start_10 .. :try_end_2a} :catch_53
+
+    :cond_2a
+    :goto_2a
+    if-eqz v2, :cond_3b
+
+    const/4 v4, -0x1
+
+    if-eq v3, v4, :cond_3b
+
+    iget-object v4, p2, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    const/4 v5, 0x0
+
+    iget-object v6, p2, Lcom/android/server/am/BroadcastRecord;->receivers:Ljava/util/List;
+
+    invoke-interface {v6}, Ljava/util/List;->size()I
+
+    move-result v6
+
+    invoke-static {v2, v3, v4, v5, v6}, Landroid/privacy/surrogate/PrivacyActivityManagerService;->enforcePrivacyPermission(Ljava/lang/String;ILandroid/content/Intent;Landroid/content/Context;I)V
+
+    :cond_3b
+    :goto_3b
+    return-void
+
+    :cond_3c
+    :try_start_3c
+    instance-of v4, p1, Landroid/content/pm/ResolveInfo;
+
+    if-eqz v4, :cond_2a
+
+    move-object v0, p1
+
+    check-cast v0, Landroid/content/pm/ResolveInfo;
+
+    move-object v4, v0
+
+    iget-object v4, v4, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
+
+    iget-object v4, v4, Landroid/content/pm/ActivityInfo;->applicationInfo:Landroid/content/pm/ApplicationInfo;
+
+    iget-object v2, v4, Landroid/content/pm/ApplicationInfo;->packageName:Ljava/lang/String;
+
+    check-cast p1, Landroid/content/pm/ResolveInfo;
+
+    iget-object v4, p1, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
+
+    iget-object v4, v4, Landroid/content/pm/ActivityInfo;->applicationInfo:Landroid/content/pm/ApplicationInfo;
+
+    iget v3, v4, Landroid/content/pm/ApplicationInfo;->uid:I
+    :try_end_52
+    .catch Ljava/lang/Exception; {:try_start_3c .. :try_end_52} :catch_53
+
+    goto :goto_2a
+
+    :catch_53
+    move-exception v1
+
+    goto :goto_3b
+.end method
+
 .method private static performReceiveLocked(Lcom/android/server/am/ProcessRecord;Landroid/content/IIntentReceiver;Landroid/content/Intent;ILjava/lang/String;Landroid/os/Bundle;ZZ)V
     .registers 16
     .annotation system Ldalvik/annotation/Throws;
@@ -1931,15 +2043,15 @@
 .end method
 
 .method final processNextBroadcast(Z)V
-    .registers 37
+    .registers 38
 
     move-object/from16 v0, p0
 
     iget-object v0, v0, Lcom/android/server/am/BroadcastQueue;->mService:Lcom/android/server/am/ActivityManagerService;
 
-    move-object/from16 v34, v0
+    move-object/from16 v35, v0
 
-    monitor-enter v34
+    monitor-enter v35
 
     :try_start_7
     move-object/from16 v0, p0
@@ -1976,15 +2088,15 @@
 
     invoke-virtual {v3, v5}, Ljava/util/ArrayList;->remove(I)Ljava/lang/Object;
 
-    move-result-object v27
+    move-result-object v28
 
-    check-cast v27, Lcom/android/server/am/BroadcastRecord;
+    check-cast v28, Lcom/android/server/am/BroadcastRecord;
 
     invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J
 
     move-result-wide v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-wide v5, v0, Lcom/android/server/am/BroadcastRecord;->dispatchTime:J
 
@@ -1992,11 +2104,11 @@
 
     move-result-wide v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-wide v5, v0, Lcom/android/server/am/BroadcastRecord;->dispatchClockTime:J
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->receivers:Ljava/util/List;
 
@@ -2004,43 +2116,43 @@
 
     move-result v12
 
-    const/16 v17, 0x0
+    const/16 v18, 0x0
 
     :goto_44
-    move/from16 v0, v17
+    move/from16 v0, v18
 
     if-ge v0, v12, :cond_61
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->receivers:Ljava/util/List;
 
-    move/from16 v0, v17
+    move/from16 v0, v18
 
     invoke-interface {v3, v0}, Ljava/util/List;->get(I)Ljava/lang/Object;
 
-    move-result-object v30
+    move-result-object v31
 
-    check-cast v30, Lcom/android/server/am/BroadcastFilter;
+    check-cast v31, Lcom/android/server/am/BroadcastFilter;
 
     const/4 v3, 0x0
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v27
+    move-object/from16 v1, v28
 
-    move-object/from16 v2, v30
+    move-object/from16 v2, v31
 
     invoke-direct {v0, v1, v2, v3}, Lcom/android/server/am/BroadcastQueue;->deliverToRegisteredReceiverLocked(Lcom/android/server/am/BroadcastRecord;Lcom/android/server/am/BroadcastFilter;Z)V
 
-    add-int/lit8 v17, v17, 0x1
+    add-int/lit8 v18, v18, 0x1
 
     goto :goto_44
 
     :cond_61
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v27
+    move-object/from16 v1, v28
 
     invoke-direct {v0, v1}, Lcom/android/server/am/BroadcastQueue;->addBroadcastToHistoryLocked(Lcom/android/server/am/BroadcastRecord;)V
 
@@ -2049,7 +2161,7 @@
     :catchall_69
     move-exception v3
 
-    monitor-exit v34
+    monitor-exit v35
     :try_end_6b
     .catchall {:try_start_7 .. :try_end_6b} :catchall_69
 
@@ -2094,17 +2206,17 @@
 
     if-nez v3, :cond_94
 
-    const/16 v19, 0x1
+    const/16 v20, 0x1
 
     :goto_8f
     monitor-exit v5
     :try_end_90
     .catchall {:try_start_79 .. :try_end_90} :catchall_97
 
-    if-nez v19, :cond_9a
+    if-nez v20, :cond_9a
 
     :try_start_92
-    monitor-exit v34
+    monitor-exit v35
     :try_end_93
     .catchall {:try_start_92 .. :try_end_93} :catchall_69
 
@@ -2112,7 +2224,7 @@
     return-void
 
     :cond_94
-    const/16 v19, 0x0
+    const/16 v20, 0x0
 
     goto :goto_8f
 
@@ -2201,7 +2313,7 @@
     iput-object v3, v0, Lcom/android/server/am/BroadcastQueue;->mPendingBroadcast:Lcom/android/server/am/BroadcastRecord;
 
     :cond_e2
-    const/16 v21, 0x0
+    const/16 v22, 0x0
 
     :cond_e4
     move-object/from16 v0, p0
@@ -2220,7 +2332,7 @@
 
     invoke-virtual {v3}, Lcom/android/server/am/ActivityManagerService;->scheduleAppGcsLocked()V
 
-    if-eqz v21, :cond_fe
+    if-eqz v22, :cond_fe
 
     move-object/from16 v0, p0
 
@@ -2229,7 +2341,7 @@
     invoke-virtual {v3}, Lcom/android/server/am/ActivityManagerService;->updateOomAdjLocked()V
 
     :cond_fe
-    monitor-exit v34
+    monitor-exit v35
 
     goto :goto_93
 
@@ -2242,25 +2354,25 @@
 
     invoke-virtual {v3, v5}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;
 
-    move-result-object v27
+    move-result-object v28
 
-    check-cast v27, Lcom/android/server/am/BroadcastRecord;
+    check-cast v28, Lcom/android/server/am/BroadcastRecord;
 
-    const/16 v16, 0x0
+    const/16 v17, 0x0
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->receivers:Ljava/util/List;
 
     if-eqz v3, :cond_1dd
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->receivers:Ljava/util/List;
 
     invoke-interface {v3}, Ljava/util/List;->size()I
 
-    move-result v25
+    move-result v26
 
     :goto_11b
     move-object/from16 v0, p0
@@ -2271,7 +2383,7 @@
 
     if-eqz v3, :cond_1d4
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-wide v5, v0, Lcom/android/server/am/BroadcastRecord;->dispatchTime:J
 
@@ -2283,11 +2395,11 @@
 
     invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J
 
-    move-result-wide v23
+    move-result-wide v24
 
-    if-lez v25, :cond_1d4
+    if-lez v26, :cond_1d4
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-wide v5, v0, Lcom/android/server/am/BroadcastRecord;->dispatchTime:J
 
@@ -2299,7 +2411,7 @@
 
     mul-long/2addr v7, v9
 
-    move/from16 v0, v25
+    move/from16 v0, v26
 
     int-to-long v9, v0
 
@@ -2307,7 +2419,7 @@
 
     add-long/2addr v5, v7
 
-    cmp-long v3, v23, v5
+    cmp-long v3, v24, v5
 
     if-lez v3, :cond_1d4
 
@@ -2343,7 +2455,7 @@
 
     move-result-object v5
 
-    move-wide/from16 v0, v23
+    move-wide/from16 v0, v24
 
     invoke-virtual {v5, v0, v1}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;
 
@@ -2355,7 +2467,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-wide v6, v0, Lcom/android/server/am/BroadcastRecord;->dispatchTime:J
 
@@ -2369,7 +2481,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-wide v6, v0, Lcom/android/server/am/BroadcastRecord;->receiverTime:J
 
@@ -2383,7 +2495,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
 
@@ -2397,7 +2509,7 @@
 
     move-result-object v5
 
-    move/from16 v0, v25
+    move/from16 v0, v26
 
     invoke-virtual {v5, v0}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;
 
@@ -2409,7 +2521,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v6, v0, Lcom/android/server/am/BroadcastRecord;->nextReceiver:I
 
@@ -2423,7 +2535,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v6, v0, Lcom/android/server/am/BroadcastRecord;->state:I
 
@@ -2443,55 +2555,55 @@
 
     invoke-virtual {v0, v3}, Lcom/android/server/am/BroadcastQueue;->broadcastTimeoutLocked(Z)V
 
-    const/16 v16, 0x1
+    const/16 v17, 0x1
 
     const/4 v3, 0x0
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput v3, v0, Lcom/android/server/am/BroadcastRecord;->state:I
 
     :cond_1d4
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v3, v0, Lcom/android/server/am/BroadcastRecord;->state:I
 
     if-eqz v3, :cond_1e1
 
-    monitor-exit v34
+    monitor-exit v35
 
     goto/16 :goto_93
 
     :cond_1dd
-    const/16 v25, 0x0
+    const/16 v26, 0x0
 
     goto/16 :goto_11b
 
     :cond_1e1
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->receivers:Ljava/util/List;
 
     if-eqz v3, :cond_1f7
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v3, v0, Lcom/android/server/am/BroadcastRecord;->nextReceiver:I
 
-    move/from16 v0, v25
+    move/from16 v0, v26
 
     if-ge v3, v0, :cond_1f7
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-boolean v3, v0, Lcom/android/server/am/BroadcastRecord;->resultAbort:Z
 
     if-nez v3, :cond_1f7
 
-    if-eqz v16, :cond_23a
+    if-eqz v17, :cond_23a
 
     :cond_1f7
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->resultTo:Landroid/content/IIntentReceiver;
     :try_end_1fb
@@ -2500,31 +2612,31 @@
     if-eqz v3, :cond_224
 
     :try_start_1fd
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->callerApp:Lcom/android/server/am/ProcessRecord;
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v4, v0, Lcom/android/server/am/BroadcastRecord;->resultTo:Landroid/content/IIntentReceiver;
 
     new-instance v5, Landroid/content/Intent;
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
 
     invoke-direct {v5, v6}, Landroid/content/Intent;-><init>(Landroid/content/Intent;)V
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v6, v0, Lcom/android/server/am/BroadcastRecord;->resultCode:I
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v7, v0, Lcom/android/server/am/BroadcastRecord;->resultData:Ljava/lang/String;
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v8, v0, Lcom/android/server/am/BroadcastRecord;->resultExtras:Landroid/os/Bundle;
 
@@ -2536,12 +2648,12 @@
 
     const/4 v3, 0x0
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->resultTo:Landroid/content/IIntentReceiver;
     :try_end_224
     .catchall {:try_start_1fd .. :try_end_224} :catchall_69
-    .catch Landroid/os/RemoteException; {:try_start_1fd .. :try_end_224} :catch_2b0
+    .catch Landroid/os/RemoteException; {:try_start_1fd .. :try_end_224} :catch_2e2
 
     :cond_224
     :goto_224
@@ -2550,7 +2662,7 @@
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v27
+    move-object/from16 v1, v28
 
     invoke-direct {v0, v1}, Lcom/android/server/am/BroadcastQueue;->addBroadcastToHistoryLocked(Lcom/android/server/am/BroadcastRecord;)V
 
@@ -2562,22 +2674,22 @@
 
     invoke-virtual {v3, v5}, Ljava/util/ArrayList;->remove(I)Ljava/lang/Object;
 
-    const/16 v27, 0x0
+    const/16 v28, 0x0
 
-    const/16 v21, 0x1
+    const/16 v22, 0x1
 
     :cond_23a
-    if-eqz v27, :cond_e4
+    if-eqz v28, :cond_e4
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v0, v0, Lcom/android/server/am/BroadcastRecord;->nextReceiver:I
 
-    move/from16 v28, v0
+    move/from16 v29, v0
 
-    add-int/lit8 v3, v28, 0x1
+    add-int/lit8 v3, v29, 0x1
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput v3, v0, Lcom/android/server/am/BroadcastRecord;->nextReceiver:I
 
@@ -2585,17 +2697,17 @@
 
     move-result-wide v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-wide v5, v0, Lcom/android/server/am/BroadcastRecord;->receiverTime:J
 
-    if-nez v28, :cond_262
+    if-nez v29, :cond_262
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-wide v5, v0, Lcom/android/server/am/BroadcastRecord;->receiverTime:J
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-wide v5, v0, Lcom/android/server/am/BroadcastRecord;->dispatchTime:J
 
@@ -2603,7 +2715,7 @@
 
     move-result-wide v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-wide v5, v0, Lcom/android/server/am/BroadcastRecord;->dispatchClockTime:J
 
@@ -2614,7 +2726,7 @@
 
     if-nez v3, :cond_279
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-wide v5, v0, Lcom/android/server/am/BroadcastRecord;->receiverTime:J
 
@@ -2622,74 +2734,126 @@
 
     iget-wide v7, v0, Lcom/android/server/am/BroadcastQueue;->mTimeoutPeriod:J
 
-    add-long v32, v5, v7
+    add-long v33, v5, v7
 
     move-object/from16 v0, p0
 
-    move-wide/from16 v1, v32
+    move-wide/from16 v1, v33
 
     invoke-virtual {v0, v1, v2}, Lcom/android/server/am/BroadcastQueue;->setBroadcastTimeoutLocked(J)V
 
     :cond_279
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->receivers:Ljava/util/List;
 
-    move/from16 v0, v28
+    move/from16 v0, v29
 
     invoke-interface {v3, v0}, Ljava/util/List;->get(I)Ljava/lang/Object;
 
-    move-result-object v22
+    move-result-object v23
+
+    move-object/from16 v0, p0
+
+    move-object/from16 v1, v23
+
+    move-object/from16 v2, v28
+
+    invoke-direct {v0, v1, v2}, Lcom/android/server/am/BroadcastQueue;->enforcePrivacyPermission(Ljava/lang/Object;Lcom/android/server/am/BroadcastRecord;)V
+
+    const/4 v15, 0x0
+
+    if-eqz v28, :cond_2b0
+
+    move-object/from16 v0, v28
+
+    iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    if-eqz v3, :cond_2b0
+
+    move-object/from16 v0, v28
+
+    iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    invoke-virtual {v3}, Landroid/content/Intent;->getAction()Ljava/lang/String;
+
+    move-result-object v3
+
+    if-eqz v3, :cond_2b0
+
+    move-object/from16 v0, v28
+
+    iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    invoke-virtual {v3}, Landroid/content/Intent;->getAction()Ljava/lang/String;
+
+    move-result-object v3
+
+    const-string v5, "catchBootComplete"
+
+    invoke-virtual {v3, v5}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v3
+
+    if-eqz v3, :cond_2b0
 
-    move-object/from16 v0, v22
+    const/4 v15, 0x1
+
+    :cond_2b0
+    move-object/from16 v0, v23
 
     instance-of v3, v0, Lcom/android/server/am/BroadcastFilter;
 
-    if-eqz v3, :cond_2dd
+    if-eqz v3, :cond_323
 
-    move-object/from16 v0, v22
+    move-object/from16 v0, v23
 
     check-cast v0, Lcom/android/server/am/BroadcastFilter;
 
-    move-object v15, v0
+    move-object/from16 v16, v0
+
+    if-nez v15, :cond_30f
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-boolean v3, v0, Lcom/android/server/am/BroadcastRecord;->ordered:Z
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v27
+    move-object/from16 v1, v28
 
-    invoke-direct {v0, v1, v15, v3}, Lcom/android/server/am/BroadcastQueue;->deliverToRegisteredReceiverLocked(Lcom/android/server/am/BroadcastRecord;Lcom/android/server/am/BroadcastFilter;Z)V
+    move-object/from16 v2, v16
 
-    move-object/from16 v0, v27
+    invoke-direct {v0, v1, v2, v3}, Lcom/android/server/am/BroadcastQueue;->deliverToRegisteredReceiverLocked(Lcom/android/server/am/BroadcastRecord;Lcom/android/server/am/BroadcastFilter;Z)V
+
+    :goto_2cb
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->receiver:Landroid/os/IBinder;
 
-    if-eqz v3, :cond_2a5
+    if-eqz v3, :cond_2d7
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-boolean v3, v0, Lcom/android/server/am/BroadcastRecord;->ordered:Z
 
-    if-nez v3, :cond_2ad
+    if-nez v3, :cond_2df
 
-    :cond_2a5
+    :cond_2d7
     const/4 v3, 0x0
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput v3, v0, Lcom/android/server/am/BroadcastRecord;->state:I
 
     invoke-virtual/range {p0 .. p0}, Lcom/android/server/am/BroadcastQueue;->scheduleBroadcastsLocked()V
 
-    :cond_2ad
-    monitor-exit v34
+    :cond_2df
+    monitor-exit v35
 
     goto/16 :goto_93
 
-    :catch_2b0
+    :catch_2e2
     move-exception v14
 
     const-string v3, "BroadcastQueue"
@@ -2718,7 +2882,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
 
@@ -2734,34 +2898,57 @@
 
     goto/16 :goto_224
 
-    :cond_2dd
-    move-object/from16 v0, v22
+    :cond_30f
+    const/4 v3, 0x0
+
+    move-object/from16 v0, v28
+
+    iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->receiver:Landroid/os/IBinder;
+
+    const/4 v3, 0x0
+
+    move-object/from16 v0, v28
+
+    iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->curFilter:Lcom/android/server/am/BroadcastFilter;
+
+    move-object/from16 v0, v28
+
+    iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    const-string v5, "android.intent.action.BOOT_COMPLETED"
+
+    invoke-virtual {v3, v5}, Landroid/content/Intent;->setAction(Ljava/lang/String;)Landroid/content/Intent;
+
+    goto :goto_2cb
+
+    :cond_323
+    move-object/from16 v0, v23
 
     check-cast v0, Landroid/content/pm/ResolveInfo;
 
-    move-object/from16 v18, v0
+    move-object/from16 v19, v0
 
-    const/16 v29, 0x0
+    const/16 v30, 0x0
 
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastQueue;->mService:Lcom/android/server/am/ActivityManagerService;
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v5, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
     iget-object v4, v5, Landroid/content/pm/ActivityInfo;->permission:Ljava/lang/String;
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v5, v0, Lcom/android/server/am/BroadcastRecord;->callingPid:I
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v6, v0, Lcom/android/server/am/BroadcastRecord;->callingUid:I
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v7, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -2769,7 +2956,7 @@
 
     iget v7, v7, Landroid/content/pm/ApplicationInfo;->uid:I
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v8, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -2777,17 +2964,17 @@
 
     invoke-virtual/range {v3 .. v8}, Lcom/android/server/am/ActivityManagerService;->checkComponentPermission(Ljava/lang/String;IIIZ)I
 
-    move-result v26
+    move-result v27
 
-    if-eqz v26, :cond_397
+    if-eqz v27, :cond_3dd
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v3, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
     iget-boolean v3, v3, Landroid/content/pm/ActivityInfo;->exported:Z
 
-    if-nez v3, :cond_446
+    if-nez v3, :cond_499
 
     const-string v3, "BroadcastQueue"
 
@@ -2801,7 +2988,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
 
@@ -2819,7 +3006,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->callerPackage:Ljava/lang/String;
 
@@ -2833,7 +3020,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v6, v0, Lcom/android/server/am/BroadcastRecord;->callingPid:I
 
@@ -2847,7 +3034,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v6, v0, Lcom/android/server/am/BroadcastRecord;->callingUid:I
 
@@ -2867,7 +3054,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -2885,7 +3072,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -2901,7 +3088,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -2917,11 +3104,11 @@
 
     invoke-static {v3, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
 
-    :goto_395
-    const/16 v29, 0x1
+    :goto_3db
+    const/16 v30, 0x1
 
-    :cond_397
-    move-object/from16 v0, v18
+    :cond_3dd
+    move-object/from16 v0, v19
 
     iget-object v3, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -2931,26 +3118,26 @@
 
     const/16 v5, 0x3e8
 
-    if-eq v3, v5, :cond_41f
+    if-eq v3, v5, :cond_465
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->requiredPermission:Ljava/lang/String;
-    :try_end_3a7
-    .catchall {:try_start_224 .. :try_end_3a7} :catchall_69
+    :try_end_3ed
+    .catchall {:try_start_224 .. :try_end_3ed} :catchall_69
 
-    if-eqz v3, :cond_41f
+    if-eqz v3, :cond_465
 
-    :try_start_3a9
+    :try_start_3ef
     invoke-static {}, Landroid/app/AppGlobals;->getPackageManager()Landroid/content/pm/IPackageManager;
 
     move-result-object v3
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v5, v0, Lcom/android/server/am/BroadcastRecord;->requiredPermission:Ljava/lang/String;
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -2959,16 +3146,16 @@
     iget-object v6, v6, Landroid/content/pm/ApplicationInfo;->packageName:Ljava/lang/String;
 
     invoke-interface {v3, v5, v6}, Landroid/content/pm/IPackageManager;->checkPermission(Ljava/lang/String;Ljava/lang/String;)I
-    :try_end_3bc
-    .catchall {:try_start_3a9 .. :try_end_3bc} :catchall_69
-    .catch Landroid/os/RemoteException; {:try_start_3a9 .. :try_end_3bc} :catch_4c8
+    :try_end_402
+    .catchall {:try_start_3ef .. :try_end_402} :catchall_69
+    .catch Landroid/os/RemoteException; {:try_start_3ef .. :try_end_402} :catch_51b
 
-    move-result v26
+    move-result v27
 
-    :goto_3bd
-    if-eqz v26, :cond_41f
+    :goto_403
+    if-eqz v27, :cond_465
 
-    :try_start_3bf
+    :try_start_405
     const-string v3, "BroadcastQueue"
 
     new-instance v5, Ljava/lang/StringBuilder;
@@ -2981,7 +3168,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
 
@@ -2995,7 +3182,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3013,7 +3200,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->requiredPermission:Ljava/lang/String;
 
@@ -3027,7 +3214,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->callerPackage:Ljava/lang/String;
 
@@ -3041,7 +3228,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v6, v0, Lcom/android/server/am/BroadcastRecord;->callingUid:I
 
@@ -3061,53 +3248,66 @@
 
     invoke-static {v3, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
 
-    const/16 v29, 0x1
+    const/16 v30, 0x1
 
-    :cond_41f
-    move-object/from16 v0, v27
+    :cond_465
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->curApp:Lcom/android/server/am/ProcessRecord;
 
-    if-eqz v3, :cond_42f
+    if-eqz v3, :cond_475
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->curApp:Lcom/android/server/am/ProcessRecord;
 
     iget-boolean v3, v3, Lcom/android/server/am/ProcessRecord;->crashing:Z
 
-    if-eqz v3, :cond_42f
+    if-eqz v3, :cond_475
+
+    const/16 v30, 0x1
+
+    :cond_475
+    if-eqz v15, :cond_482
+
+    const/16 v30, 0x1
+
+    move-object/from16 v0, v28
+
+    iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    const-string v5, "android.intent.action.BOOT_COMPLETED"
 
-    const/16 v29, 0x1
+    invoke-virtual {v3, v5}, Landroid/content/Intent;->setAction(Ljava/lang/String;)Landroid/content/Intent;
 
-    :cond_42f
-    if-eqz v29, :cond_4cd
+    :cond_482
+    if-eqz v30, :cond_520
 
     const/4 v3, 0x0
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->receiver:Landroid/os/IBinder;
 
     const/4 v3, 0x0
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->curFilter:Lcom/android/server/am/BroadcastFilter;
 
     const/4 v3, 0x0
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput v3, v0, Lcom/android/server/am/BroadcastRecord;->state:I
 
     invoke-virtual/range {p0 .. p0}, Lcom/android/server/am/BroadcastQueue;->scheduleBroadcastsLocked()V
 
-    monitor-exit v34
+    monitor-exit v35
 
     goto/16 :goto_93
 
-    :cond_446
+    :cond_499
     const-string v3, "BroadcastQueue"
 
     new-instance v5, Ljava/lang/StringBuilder;
@@ -3120,7 +3320,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
 
@@ -3138,7 +3338,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->callerPackage:Ljava/lang/String;
 
@@ -3152,7 +3352,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v6, v0, Lcom/android/server/am/BroadcastRecord;->callingPid:I
 
@@ -3166,7 +3366,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v6, v0, Lcom/android/server/am/BroadcastRecord;->callingUid:I
 
@@ -3186,7 +3386,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3202,7 +3402,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3218,7 +3418,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3234,23 +3434,23 @@
 
     invoke-static {v3, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
 
-    goto/16 :goto_395
+    goto/16 :goto_3db
 
-    :catch_4c8
+    :catch_51b
     move-exception v14
 
-    const/16 v26, -0x1
+    const/16 v27, -0x1
 
-    goto/16 :goto_3bd
+    goto/16 :goto_403
 
-    :cond_4cd
+    :cond_520
     const/4 v3, 0x1
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput v3, v0, Lcom/android/server/am/BroadcastRecord;->state:I
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v3, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3258,7 +3458,7 @@
 
     new-instance v3, Landroid/content/ComponentName;
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v5, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3266,7 +3466,7 @@
 
     iget-object v5, v5, Landroid/content/pm/ApplicationInfo;->packageName:Ljava/lang/String;
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3274,29 +3474,29 @@
 
     invoke-direct {v3, v5, v6}, Landroid/content/ComponentName;-><init>(Ljava/lang/String;Ljava/lang/String;)V
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->curComponent:Landroid/content/ComponentName;
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v3, v0, Lcom/android/server/am/BroadcastRecord;->callingUid:I
 
     const/16 v5, 0x3e8
 
-    if-eq v3, v5, :cond_521
+    if-eq v3, v5, :cond_574
 
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastQueue;->mService:Lcom/android/server/am/ActivityManagerService;
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v5, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
     iget-object v5, v5, Landroid/content/pm/ActivityInfo;->processName:Ljava/lang/String;
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3304,48 +3504,48 @@
 
     invoke-virtual {v3, v5, v6}, Lcom/android/server/am/ActivityManagerService;->isSingleton(Ljava/lang/String;Landroid/content/pm/ApplicationInfo;)Z
 
-    move-result v20
+    move-result v21
 
-    if-eqz v20, :cond_56a
+    if-eqz v21, :cond_5bd
 
-    const/16 v31, 0x0
+    const/16 v32, 0x0
 
-    :goto_50f
+    :goto_562
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastQueue;->mService:Lcom/android/server/am/ActivityManagerService;
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v5, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
-    move/from16 v0, v31
+    move/from16 v0, v32
 
     invoke-virtual {v3, v5, v0}, Lcom/android/server/am/ActivityManagerService;->getActivityInfoForUser(Landroid/content/pm/ActivityInfo;I)Landroid/content/pm/ActivityInfo;
 
     move-result-object v3
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iput-object v3, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
-    :cond_521
-    move-object/from16 v0, v18
+    :cond_574
+    move-object/from16 v0, v19
 
     iget-object v3, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->curReceiver:Landroid/content/pm/ActivityInfo;
-    :try_end_529
-    .catchall {:try_start_3bf .. :try_end_529} :catchall_69
+    :try_end_57c
+    .catchall {:try_start_405 .. :try_end_57c} :catchall_69
 
-    :try_start_529
+    :try_start_57c
     invoke-static {}, Landroid/app/AppGlobals;->getPackageManager()Landroid/content/pm/IPackageManager;
 
     move-result-object v3
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v5, v0, Lcom/android/server/am/BroadcastRecord;->curComponent:Landroid/content/ComponentName;
 
@@ -3355,7 +3555,7 @@
 
     const/4 v6, 0x0
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v7, v0, Lcom/android/server/am/BroadcastRecord;->callingUid:I
 
@@ -3364,18 +3564,18 @@
     move-result v7
 
     invoke-interface {v3, v5, v6, v7}, Landroid/content/pm/IPackageManager;->setPackageStoppedState(Ljava/lang/String;ZI)V
-    :try_end_541
-    .catchall {:try_start_529 .. :try_end_541} :catchall_69
-    .catch Landroid/os/RemoteException; {:try_start_529 .. :try_end_541} :catch_671
-    .catch Ljava/lang/IllegalArgumentException; {:try_start_529 .. :try_end_541} :catch_573
+    :try_end_594
+    .catchall {:try_start_57c .. :try_end_594} :catchall_69
+    .catch Landroid/os/RemoteException; {:try_start_57c .. :try_end_594} :catch_6c4
+    .catch Ljava/lang/IllegalArgumentException; {:try_start_57c .. :try_end_594} :catch_5c6
 
-    :goto_541
-    :try_start_541
+    :goto_594
+    :try_start_594
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastQueue;->mService:Lcom/android/server/am/ActivityManagerService;
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v5, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3387,16 +3587,16 @@
 
     move-result-object v13
 
-    if-eqz v13, :cond_5bc
+    if-eqz v13, :cond_60f
 
     iget-object v3, v13, Lcom/android/server/am/ProcessRecord;->thread:Landroid/app/IApplicationThread;
-    :try_end_555
-    .catchall {:try_start_541 .. :try_end_555} :catchall_69
+    :try_end_5a8
+    .catchall {:try_start_594 .. :try_end_5a8} :catchall_69
 
-    if-eqz v3, :cond_5bc
+    if-eqz v3, :cond_60f
 
-    :try_start_557
-    move-object/from16 v0, v18
+    :try_start_5aa
+    move-object/from16 v0, v19
 
     iget-object v3, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3406,30 +3606,30 @@
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v27
+    move-object/from16 v1, v28
 
     invoke-direct {v0, v1, v13}, Lcom/android/server/am/BroadcastQueue;->processCurBroadcastLocked(Lcom/android/server/am/BroadcastRecord;Lcom/android/server/am/ProcessRecord;)V
-    :try_end_567
-    .catchall {:try_start_557 .. :try_end_567} :catchall_69
-    .catch Landroid/os/RemoteException; {:try_start_557 .. :try_end_567} :catch_59f
+    :try_end_5ba
+    .catchall {:try_start_5aa .. :try_end_5ba} :catchall_69
+    .catch Landroid/os/RemoteException; {:try_start_5aa .. :try_end_5ba} :catch_5f2
 
-    :try_start_567
-    monitor-exit v34
+    :try_start_5ba
+    monitor-exit v35
 
     goto/16 :goto_93
 
-    :cond_56a
-    move-object/from16 v0, v27
+    :cond_5bd
+    move-object/from16 v0, v28
 
     iget v3, v0, Lcom/android/server/am/BroadcastRecord;->callingUid:I
 
     invoke-static {v3}, Landroid/os/UserId;->getUserId(I)I
 
-    move-result v31
+    move-result v32
 
-    goto :goto_50f
+    goto :goto_562
 
-    :catch_573
+    :catch_5c6
     move-exception v14
 
     const-string v3, "BroadcastQueue"
@@ -3444,7 +3644,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->curComponent:Landroid/content/ComponentName;
 
@@ -3472,9 +3672,9 @@
 
     invoke-static {v3, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
 
-    goto :goto_541
+    goto :goto_594
 
-    :catch_59f
+    :catch_5f2
     move-exception v14
 
     const-string v3, "BroadcastQueue"
@@ -3489,7 +3689,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->curComponent:Landroid/content/ComponentName;
 
@@ -3503,12 +3703,12 @@
 
     invoke-static {v3, v5, v14}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    :cond_5bc
+    :cond_60f
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastQueue;->mService:Lcom/android/server/am/ActivityManagerService;
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v5, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3516,7 +3716,7 @@
 
     const/4 v6, 0x1
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v7, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
 
@@ -3528,11 +3728,11 @@
 
     const-string v8, "broadcast"
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v9, v0, Lcom/android/server/am/BroadcastRecord;->curComponent:Landroid/content/ComponentName;
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v10, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
 
@@ -3544,22 +3744,22 @@
 
     and-int/2addr v10, v11
 
-    if-eqz v10, :cond_660
+    if-eqz v10, :cond_6b3
 
     const/4 v10, 0x1
 
-    :goto_5e5
+    :goto_638
     const/4 v11, 0x0
 
     invoke-virtual/range {v3 .. v11}, Lcom/android/server/am/ActivityManagerService;->startProcessLocked(Ljava/lang/String;Landroid/content/pm/ApplicationInfo;ZILjava/lang/String;Landroid/content/ComponentName;ZZ)Lcom/android/server/am/ProcessRecord;
 
     move-result-object v3
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->curApp:Lcom/android/server/am/ProcessRecord;
 
-    if-nez v3, :cond_662
+    if-nez v3, :cond_6b5
 
     const-string v3, "BroadcastQueue"
 
@@ -3573,7 +3773,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3591,7 +3791,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v18
+    move-object/from16 v0, v19
 
     iget-object v6, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
@@ -3609,7 +3809,7 @@
 
     move-result-object v5
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v6, v0, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
 
@@ -3631,23 +3831,23 @@
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v27
+    move-object/from16 v1, v28
 
     invoke-virtual {v0, v1}, Lcom/android/server/am/BroadcastQueue;->logBroadcastReceiverDiscardLocked(Lcom/android/server/am/BroadcastRecord;)V
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget v7, v0, Lcom/android/server/am/BroadcastRecord;->resultCode:I
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v8, v0, Lcom/android/server/am/BroadcastRecord;->resultData:Ljava/lang/String;
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-object v9, v0, Lcom/android/server/am/BroadcastRecord;->resultExtras:Landroid/os/Bundle;
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iget-boolean v10, v0, Lcom/android/server/am/BroadcastRecord;->resultAbort:Z
 
@@ -3655,7 +3855,7 @@
 
     move-object/from16 v5, p0
 
-    move-object/from16 v6, v27
+    move-object/from16 v6, v28
 
     invoke-virtual/range {v5 .. v11}, Lcom/android/server/am/BroadcastQueue;->finishReceiverLocked(Lcom/android/server/am/BroadcastRecord;ILjava/lang/String;Landroid/os/Bundle;ZZ)Z
 
@@ -3663,42 +3863,42 @@
 
     const/4 v3, 0x0
 
-    move-object/from16 v0, v27
+    move-object/from16 v0, v28
 
     iput v3, v0, Lcom/android/server/am/BroadcastRecord;->state:I
 
-    monitor-exit v34
+    monitor-exit v35
 
     goto/16 :goto_93
 
-    :cond_660
+    :cond_6b3
     const/4 v10, 0x0
 
-    goto :goto_5e5
+    goto :goto_638
 
-    :cond_662
-    move-object/from16 v0, v27
+    :cond_6b5
+    move-object/from16 v0, v28
 
     move-object/from16 v1, p0
 
     iput-object v0, v1, Lcom/android/server/am/BroadcastQueue;->mPendingBroadcast:Lcom/android/server/am/BroadcastRecord;
 
-    move/from16 v0, v28
+    move/from16 v0, v29
 
     move-object/from16 v1, p0
 
     iput v0, v1, Lcom/android/server/am/BroadcastQueue;->mPendingBroadcastRecvIndex:I
 
-    monitor-exit v34
-    :try_end_66f
-    .catchall {:try_start_567 .. :try_end_66f} :catchall_69
+    monitor-exit v35
+    :try_end_6c2
+    .catchall {:try_start_5ba .. :try_end_6c2} :catchall_69
 
     goto/16 :goto_93
 
-    :catch_671
+    :catch_6c4
     move-exception v3
 
-    goto/16 :goto_541
+    goto/16 :goto_594
 .end method
 
 .method public final replaceOrderedBroadcastLocked(Lcom/android/server/am/BroadcastRecord;)Z
diff -Npru stock-services/smali/com/android/server/PrivacyTelephonyRegistry$1.smali ext-services/smali/com/android/server/PrivacyTelephonyRegistry$1.smali
--- stock-services/smali/com/android/server/PrivacyTelephonyRegistry$1.smali	1969-12-31 18:00:00.000000000 -0600
+++ ext-services/smali/com/android/server/PrivacyTelephonyRegistry$1.smali	2012-11-06 15:04:19.154563841 -0600
@@ -0,0 +1,180 @@
+.class Lcom/android/server/PrivacyTelephonyRegistry$1;
+.super Landroid/content/BroadcastReceiver;
+.source "PrivacyTelephonyRegistry.java"
+
+
+# annotations
+.annotation system Ldalvik/annotation/EnclosingClass;
+    value = Lcom/android/server/PrivacyTelephonyRegistry;
+.end annotation
+
+.annotation system Ldalvik/annotation/InnerClass;
+    accessFlags = 0x0
+    name = null
+.end annotation
+
+
+# instance fields
+.field final synthetic this$0:Lcom/android/server/PrivacyTelephonyRegistry;
+
+
+# direct methods
+.method constructor <init>(Lcom/android/server/PrivacyTelephonyRegistry;)V
+    .registers 2
+
+    iput-object p1, p0, Lcom/android/server/PrivacyTelephonyRegistry$1;->this$0:Lcom/android/server/PrivacyTelephonyRegistry;
+
+    invoke-direct {p0}, Landroid/content/BroadcastReceiver;-><init>()V
+
+    return-void
+.end method
+
+
+# virtual methods
+.method public onReceive(Landroid/content/Context;Landroid/content/Intent;)V
+    .registers 10
+
+    const/4 v6, 0x0
+
+    invoke-virtual {p2}, Landroid/content/Intent;->getAction()Ljava/lang/String;
+
+    move-result-object v3
+
+    const-string v4, "android.privacy.BLOCKED_PHONE_CALL"
+
+    invoke-virtual {v3, v4}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v3
+
+    if-eqz v3, :cond_44
+
+    new-instance v0, Landroid/os/Bundle;
+
+    invoke-direct {v0}, Landroid/os/Bundle;-><init>()V
+
+    invoke-virtual {p2}, Landroid/content/Intent;->getExtras()Landroid/os/Bundle;
+
+    move-result-object v0
+
+    const-string v3, "packageName"
+
+    invoke-virtual {v0, v3}, Landroid/os/Bundle;->getString(Ljava/lang/String;)Ljava/lang/String;
+
+    move-result-object v1
+
+    const-string v3, "packageName"
+
+    invoke-virtual {v0, v3}, Landroid/os/Bundle;->containsKey(Ljava/lang/String;)Z
+
+    move-result v3
+
+    if-eqz v3, :cond_45
+
+    const-string v3, "PrivacyTelephonyRegistry"
+
+    new-instance v4, Ljava/lang/StringBuilder;
+
+    invoke-direct {v4}, Ljava/lang/StringBuilder;-><init>()V
+
+    const-string v5, "got blocked phone call INTENT from package: "
+
+    invoke-virtual {v4, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v4
+
+    const-string v5, "packageName"
+
+    invoke-virtual {v0, v5}, Landroid/os/Bundle;->getString(Ljava/lang/String;)Ljava/lang/String;
+
+    move-result-object v5
+
+    invoke-virtual {v4, v5}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v4
+
+    invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v4
+
+    invoke-static {v3, v4}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    :goto_42
+    if-nez v1, :cond_4d
+
+    :cond_44
+    :goto_44
+    return-void
+
+    :cond_45
+    const-string v3, "PrivacyTelephonyRegistry"
+
+    const-string v4, "got blocked phone call INTENT without package information"
+
+    invoke-static {v3, v4}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    goto :goto_42
+
+    :cond_4d
+    const-string v3, "phoneState"
+
+    invoke-virtual {v0, v3}, Landroid/os/Bundle;->containsKey(Ljava/lang/String;)Z
+
+    move-result v3
+
+    if-eqz v3, :cond_76
+
+    const-string v3, "phoneState"
+
+    invoke-virtual {v0, v3}, Landroid/os/Bundle;->getInt(Ljava/lang/String;)I
+
+    move-result v2
+
+    packed-switch v2, :pswitch_data_7e
+
+    goto :goto_44
+
+    :pswitch_5f
+    iget-object v3, p0, Lcom/android/server/PrivacyTelephonyRegistry$1;->this$0:Lcom/android/server/PrivacyTelephonyRegistry;
+
+    const/4 v4, 0x0
+
+    invoke-virtual {v3, v4, v6, v1}, Lcom/android/server/PrivacyTelephonyRegistry;->notifyPrivacyCallState(ILjava/lang/String;Ljava/lang/String;)V
+
+    goto :goto_44
+
+    :pswitch_66
+    iget-object v3, p0, Lcom/android/server/PrivacyTelephonyRegistry$1;->this$0:Lcom/android/server/PrivacyTelephonyRegistry;
+
+    const/4 v4, 0x2
+
+    invoke-virtual {v3, v4, v6, v1}, Lcom/android/server/PrivacyTelephonyRegistry;->notifyPrivacyCallState(ILjava/lang/String;Ljava/lang/String;)V
+
+    goto :goto_44
+
+    :pswitch_6d
+    iget-object v3, p0, Lcom/android/server/PrivacyTelephonyRegistry$1;->this$0:Lcom/android/server/PrivacyTelephonyRegistry;
+
+    const/4 v4, 0x1
+
+    const-string v5, "12345"
+
+    invoke-virtual {v3, v4, v5, v1}, Lcom/android/server/PrivacyTelephonyRegistry;->notifyPrivacyCallState(ILjava/lang/String;Ljava/lang/String;)V
+
+    goto :goto_44
+
+    :cond_76
+    const-string v3, "PrivacyTelephonyRegistry"
+
+    const-string v4, "we forgot to put phoneState in Intent?"
+
+    invoke-static {v3, v4}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    goto :goto_44
+
+    :pswitch_data_7e
+    .packed-switch 0x0
+        :pswitch_5f
+        :pswitch_6d
+        :pswitch_66
+    .end packed-switch
+.end method
diff -Npru stock-services/smali/com/android/server/PrivacyTelephonyRegistry.smali ext-services/smali/com/android/server/PrivacyTelephonyRegistry.smali
--- stock-services/smali/com/android/server/PrivacyTelephonyRegistry.smali	1969-12-31 18:00:00.000000000 -0600
+++ ext-services/smali/com/android/server/PrivacyTelephonyRegistry.smali	2012-11-06 15:04:19.194564043 -0600
@@ -0,0 +1,1410 @@
+.class public Lcom/android/server/PrivacyTelephonyRegistry;
+.super Lcom/android/server/TelephonyRegistry;
+.source "PrivacyTelephonyRegistry.java"
+
+
+# static fields
+.field private static final PERMISSION_CALL_STATE:I = 0x3
+
+.field private static final PERMISSION_CELL_INFO:I = 0x1
+
+.field private static final PERMISSION_CELL_LOCATION:I = 0x0
+
+.field private static final PERMISSION_SERVICE_STATE:I = 0x4
+
+.field private static final PERMISSION_SIGNAL_STRENGTH:I = 0x2
+
+.field private static final P_TAG:Ljava/lang/String; = "PrivacyTelephonyRegistry"
+
+
+# instance fields
+.field private pSetMan:Landroid/privacy/PrivacySettingsManager;
+
+.field private final privacyReceiver:Landroid/content/BroadcastReceiver;
+
+
+# direct methods
+.method public constructor <init>(Landroid/content/Context;)V
+    .registers 5
+
+    invoke-direct {p0, p1}, Lcom/android/server/TelephonyRegistry;-><init>(Landroid/content/Context;)V
+
+    new-instance v1, Lcom/android/server/PrivacyTelephonyRegistry$1;
+
+    invoke-direct {v1, p0}, Lcom/android/server/PrivacyTelephonyRegistry$1;-><init>(Lcom/android/server/PrivacyTelephonyRegistry;)V
+
+    iput-object v1, p0, Lcom/android/server/PrivacyTelephonyRegistry;->privacyReceiver:Landroid/content/BroadcastReceiver;
+
+    new-instance v1, Landroid/privacy/PrivacySettingsManager;
+
+    const-string v2, "privacy"
+
+    invoke-static {v2}, Landroid/os/ServiceManager;->getService(Ljava/lang/String;)Landroid/os/IBinder;
+
+    move-result-object v2
+
+    invoke-static {v2}, Landroid/privacy/IPrivacySettingsManager$Stub;->asInterface(Landroid/os/IBinder;)Landroid/privacy/IPrivacySettingsManager;
+
+    move-result-object v2
+
+    invoke-direct {v1, p1, v2}, Landroid/privacy/PrivacySettingsManager;-><init>(Landroid/content/Context;Landroid/privacy/IPrivacySettingsManager;)V
+
+    iput-object v1, p0, Lcom/android/server/PrivacyTelephonyRegistry;->pSetMan:Landroid/privacy/PrivacySettingsManager;
+
+    :try_start_1b
+    invoke-direct {p0}, Lcom/android/server/PrivacyTelephonyRegistry;->registerPrivacy()V
+    :try_end_1e
+    .catch Ljava/lang/Exception; {:try_start_1b .. :try_end_1e} :catch_26
+
+    :goto_1e
+    const-string v1, "PrivacyTelephonyRegistry"
+
+    const-string v2, "constructor ready"
+
+    invoke-static {v1, v2}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    return-void
+
+    :catch_26
+    move-exception v0
+
+    const-string v1, "PrivacyTelephonyRegistry"
+
+    const-string v2, "failed to register privacy broadcastreceiver"
+
+    invoke-static {v1, v2}, Landroid/util/Log;->e(Ljava/lang/String;Ljava/lang/String;)I
+
+    goto :goto_1e
+.end method
+
+.method private isPackageAllowed(ILjava/lang/String;)Z
+    .registers 8
+
+    const/4 v2, 0x1
+
+    const/4 v1, 0x0
+
+    iget-object v3, p0, Lcom/android/server/PrivacyTelephonyRegistry;->pSetMan:Landroid/privacy/PrivacySettingsManager;
+
+    invoke-static {}, Landroid/os/Process;->myUid()I
+
+    move-result v4
+
+    invoke-virtual {v3, p2, v4}, Landroid/privacy/PrivacySettingsManager;->getSettings(Ljava/lang/String;I)Landroid/privacy/PrivacySettings;
+
+    move-result-object v0
+
+    if-nez v0, :cond_f
+
+    :cond_e
+    :goto_e
+    return v1
+
+    :cond_f
+    packed-switch p1, :pswitch_data_42
+
+    goto :goto_e
+
+    :pswitch_13
+    invoke-virtual {v0}, Landroid/privacy/PrivacySettings;->getLocationNetworkSetting()B
+
+    move-result v3
+
+    if-nez v3, :cond_e
+
+    invoke-virtual {v0}, Landroid/privacy/PrivacySettings;->getLocationGpsSetting()B
+
+    move-result v3
+
+    if-nez v3, :cond_e
+
+    move v1, v2
+
+    goto :goto_e
+
+    :pswitch_21
+    invoke-virtual {v0}, Landroid/privacy/PrivacySettings;->getLocationNetworkSetting()B
+
+    move-result v3
+
+    if-nez v3, :cond_e
+
+    move v1, v2
+
+    goto :goto_e
+
+    :pswitch_29
+    invoke-virtual {v0}, Landroid/privacy/PrivacySettings;->getLocationNetworkSetting()B
+
+    move-result v3
+
+    if-nez v3, :cond_e
+
+    move v1, v2
+
+    goto :goto_e
+
+    :pswitch_31
+    invoke-virtual {v0}, Landroid/privacy/PrivacySettings;->getLocationNetworkSetting()B
+
+    move-result v3
+
+    if-nez v3, :cond_e
+
+    move v1, v2
+
+    goto :goto_e
+
+    :pswitch_39
+    invoke-virtual {v0}, Landroid/privacy/PrivacySettings;->getLocationNetworkSetting()B
+
+    move-result v3
+
+    if-nez v3, :cond_e
+
+    move v1, v2
+
+    goto :goto_e
+
+    nop
+
+    :pswitch_data_42
+    .packed-switch 0x0
+        :pswitch_13
+        :pswitch_21
+        :pswitch_29
+        :pswitch_31
+        :pswitch_39
+    .end packed-switch
+.end method
+
+.method private registerPrivacy()V
+    .registers 4
+
+    new-instance v0, Landroid/content/IntentFilter;
+
+    const-string v1, "android.privacy.BLOCKED_PHONE_CALL"
+
+    invoke-direct {v0, v1}, Landroid/content/IntentFilter;-><init>(Ljava/lang/String;)V
+
+    iget-object v1, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mContext:Landroid/content/Context;
+
+    iget-object v2, p0, Lcom/android/server/PrivacyTelephonyRegistry;->privacyReceiver:Landroid/content/BroadcastReceiver;
+
+    invoke-virtual {v1, v2, v0}, Landroid/content/Context;->registerReceiver(Landroid/content/BroadcastReceiver;Landroid/content/IntentFilter;)Landroid/content/Intent;
+
+    return-void
+.end method
+
+
+# virtual methods
+.method public bridge synthetic dump(Ljava/io/FileDescriptor;Ljava/io/PrintWriter;[Ljava/lang/String;)V
+    .registers 4
+
+    invoke-super {p0, p1, p2, p3}, Lcom/android/server/TelephonyRegistry;->dump(Ljava/io/FileDescriptor;Ljava/io/PrintWriter;[Ljava/lang/String;)V
+
+    return-void
+.end method
+
+.method public listen(Ljava/lang/String;Lcom/android/internal/telephony/IPhoneStateListener;IZ)V
+    .registers 19
+
+    :try_start_0
+    invoke-direct {p0}, Lcom/android/server/PrivacyTelephonyRegistry;->registerPrivacy()V
+    :try_end_3
+    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_3} :catch_af
+
+    :goto_3
+    if-eqz p3, :cond_110
+
+    move/from16 v0, p3
+
+    invoke-virtual {p0, v0}, Lcom/android/server/PrivacyTelephonyRegistry;->checkListenerPermission(I)V
+
+    iget-object v11, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    monitor-enter v11
+
+    const/4 v7, 0x0
+
+    :try_start_e
+    invoke-interface/range {p2 .. p2}, Lcom/android/internal/telephony/IPhoneStateListener;->asBinder()Landroid/os/IBinder;
+
+    move-result-object v2
+
+    iget-object v10, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    invoke-virtual {v10}, Ljava/util/ArrayList;->size()I
+    :try_end_17
+    .catchall {:try_start_e .. :try_end_17} :catchall_d2
+
+    move-result v1
+
+    const/4 v6, 0x0
+
+    move-object v8, v7
+
+    :goto_1a
+    if-ge v6, v1, :cond_be
+
+    :try_start_1c
+    iget-object v10, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    invoke-virtual {v10, v6}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;
+
+    move-result-object v7
+
+    check-cast v7, Lcom/android/server/TelephonyRegistry$Record;
+    :try_end_24
+    .catchall {:try_start_1c .. :try_end_24} :catchall_118
+
+    :try_start_24
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    if-ne v2, v10, :cond_b9
+
+    :goto_28
+    iget v10, v7, Lcom/android/server/TelephonyRegistry$Record;->events:I
+
+    xor-int v10, v10, p3
+
+    and-int v9, p3, v10
+
+    move/from16 v0, p3
+
+    iput v0, v7, Lcom/android/server/TelephonyRegistry$Record;->events:I
+    :try_end_32
+    .catchall {:try_start_24 .. :try_end_32} :catchall_d2
+
+    if-eqz p4, :cond_ad
+
+    and-int/lit8 v10, p3, 0x1
+
+    if-eqz v10, :cond_38
+
+    :cond_38
+    and-int/lit8 v10, p3, 0x2
+
+    if-eqz v10, :cond_4c
+
+    :try_start_3c
+    iget-object v10, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mSignalStrength:Landroid/telephony/SignalStrength;
+
+    invoke-virtual {v10}, Landroid/telephony/SignalStrength;->getGsmSignalStrength()I
+
+    move-result v5
+
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    const/16 v12, 0x63
+
+    if-ne v5, v12, :cond_49
+
+    const/4 v5, -0x1
+
+    :cond_49
+    invoke-interface {v10, v5}, Lcom/android/internal/telephony/IPhoneStateListener;->onSignalStrengthChanged(I)V
+    :try_end_4c
+    .catchall {:try_start_3c .. :try_end_4c} :catchall_d2
+    .catch Landroid/os/RemoteException; {:try_start_3c .. :try_end_4c} :catch_d5
+
+    :cond_4c
+    :goto_4c
+    and-int/lit8 v10, p3, 0x4
+
+    if-eqz v10, :cond_57
+
+    :try_start_50
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    iget-boolean v12, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mMessageWaiting:Z
+
+    invoke-interface {v10, v12}, Lcom/android/internal/telephony/IPhoneStateListener;->onMessageWaitingIndicatorChanged(Z)V
+    :try_end_57
+    .catchall {:try_start_50 .. :try_end_57} :catchall_d2
+    .catch Landroid/os/RemoteException; {:try_start_50 .. :try_end_57} :catch_dd
+
+    :cond_57
+    :goto_57
+    and-int/lit8 v10, p3, 0x8
+
+    if-eqz v10, :cond_62
+
+    :try_start_5b
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    iget-boolean v12, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mCallForwarding:Z
+
+    invoke-interface {v10, v12}, Lcom/android/internal/telephony/IPhoneStateListener;->onCallForwardingIndicatorChanged(Z)V
+    :try_end_62
+    .catchall {:try_start_5b .. :try_end_62} :catchall_d2
+    .catch Landroid/os/RemoteException; {:try_start_5b .. :try_end_62} :catch_e5
+
+    :cond_62
+    :goto_62
+    and-int/lit8 v10, p3, 0x10
+
+    if-eqz v10, :cond_66
+
+    :cond_66
+    and-int/lit8 v10, p3, 0x20
+
+    if-eqz v10, :cond_73
+
+    :try_start_6a
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    iget v12, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mCallState:I
+
+    iget-object v13, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mCallIncomingNumber:Ljava/lang/String;
+
+    invoke-interface {v10, v12, v13}, Lcom/android/internal/telephony/IPhoneStateListener;->onCallStateChanged(ILjava/lang/String;)V
+    :try_end_73
+    .catchall {:try_start_6a .. :try_end_73} :catchall_d2
+    .catch Landroid/os/RemoteException; {:try_start_6a .. :try_end_73} :catch_ed
+
+    :cond_73
+    :goto_73
+    and-int/lit8 v10, p3, 0x40
+
+    if-eqz v10, :cond_80
+
+    :try_start_77
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    iget v12, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mDataConnectionState:I
+
+    iget v13, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mDataConnectionNetworkType:I
+
+    invoke-interface {v10, v12, v13}, Lcom/android/internal/telephony/IPhoneStateListener;->onDataConnectionStateChanged(II)V
+    :try_end_80
+    .catchall {:try_start_77 .. :try_end_80} :catchall_d2
+    .catch Landroid/os/RemoteException; {:try_start_77 .. :try_end_80} :catch_f4
+
+    :cond_80
+    :goto_80
+    move/from16 v0, p3
+
+    and-int/lit16 v10, v0, 0x80
+
+    if-eqz v10, :cond_8d
+
+    :try_start_86
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    iget v12, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mDataActivity:I
+
+    invoke-interface {v10, v12}, Lcom/android/internal/telephony/IPhoneStateListener;->onDataActivity(I)V
+    :try_end_8d
+    .catchall {:try_start_86 .. :try_end_8d} :catchall_d2
+    .catch Landroid/os/RemoteException; {:try_start_86 .. :try_end_8d} :catch_fb
+
+    :cond_8d
+    :goto_8d
+    move/from16 v0, p3
+
+    and-int/lit16 v10, v0, 0x100
+
+    if-eqz v10, :cond_9a
+
+    :try_start_93
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    iget-object v12, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mSignalStrength:Landroid/telephony/SignalStrength;
+
+    invoke-interface {v10, v12}, Lcom/android/internal/telephony/IPhoneStateListener;->onSignalStrengthsChanged(Landroid/telephony/SignalStrength;)V
+    :try_end_9a
+    .catchall {:try_start_93 .. :try_end_9a} :catchall_d2
+    .catch Landroid/os/RemoteException; {:try_start_93 .. :try_end_9a} :catch_102
+
+    :cond_9a
+    :goto_9a
+    move/from16 v0, p3
+
+    and-int/lit16 v10, v0, 0x200
+
+    if-eqz v10, :cond_a7
+
+    :try_start_a0
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    iget v12, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mOtaspMode:I
+
+    invoke-interface {v10, v12}, Lcom/android/internal/telephony/IPhoneStateListener;->onOtaspChanged(I)V
+    :try_end_a7
+    .catchall {:try_start_a0 .. :try_end_a7} :catchall_d2
+    .catch Landroid/os/RemoteException; {:try_start_a0 .. :try_end_a7} :catch_109
+
+    :cond_a7
+    :goto_a7
+    move/from16 v0, p3
+
+    and-int/lit16 v10, v0, 0x400
+
+    if-eqz v10, :cond_ad
+
+    :cond_ad
+    :try_start_ad
+    monitor-exit v11
+    :try_end_ae
+    .catchall {:try_start_ad .. :try_end_ae} :catchall_d2
+
+    :goto_ae
+    return-void
+
+    :catch_af
+    move-exception v3
+
+    const-string v10, "PrivacyTelephonyRegistry"
+
+    const-string v11, "failed to register privacy broadcastreceiver"
+
+    invoke-static {v10, v11}, Landroid/util/Log;->e(Ljava/lang/String;Ljava/lang/String;)I
+
+    goto/16 :goto_3
+
+    :cond_b9
+    add-int/lit8 v6, v6, 0x1
+
+    move-object v8, v7
+
+    goto/16 :goto_1a
+
+    :cond_be
+    :try_start_be
+    new-instance v7, Lcom/android/server/TelephonyRegistry$Record;
+
+    invoke-direct {v7}, Lcom/android/server/TelephonyRegistry$Record;-><init>()V
+    :try_end_c3
+    .catchall {:try_start_be .. :try_end_c3} :catchall_118
+
+    :try_start_c3
+    iput-object v2, v7, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    move-object/from16 v0, p2
+
+    iput-object v0, v7, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    iput-object p1, v7, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    iget-object v10, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    invoke-virtual {v10, v7}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    goto/16 :goto_28
+
+    :catchall_d2
+    move-exception v10
+
+    :goto_d3
+    monitor-exit v11
+    :try_end_d4
+    .catchall {:try_start_c3 .. :try_end_d4} :catchall_d2
+
+    throw v10
+
+    :catch_d5
+    move-exception v4
+
+    :try_start_d6
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {p0, v10}, Lcom/android/server/PrivacyTelephonyRegistry;->remove(Landroid/os/IBinder;)V
+
+    goto/16 :goto_4c
+
+    :catch_dd
+    move-exception v4
+
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {p0, v10}, Lcom/android/server/PrivacyTelephonyRegistry;->remove(Landroid/os/IBinder;)V
+
+    goto/16 :goto_57
+
+    :catch_e5
+    move-exception v4
+
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {p0, v10}, Lcom/android/server/PrivacyTelephonyRegistry;->remove(Landroid/os/IBinder;)V
+
+    goto/16 :goto_62
+
+    :catch_ed
+    move-exception v4
+
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {p0, v10}, Lcom/android/server/PrivacyTelephonyRegistry;->remove(Landroid/os/IBinder;)V
+
+    goto :goto_73
+
+    :catch_f4
+    move-exception v4
+
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {p0, v10}, Lcom/android/server/PrivacyTelephonyRegistry;->remove(Landroid/os/IBinder;)V
+
+    goto :goto_80
+
+    :catch_fb
+    move-exception v4
+
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {p0, v10}, Lcom/android/server/PrivacyTelephonyRegistry;->remove(Landroid/os/IBinder;)V
+
+    goto :goto_8d
+
+    :catch_102
+    move-exception v4
+
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {p0, v10}, Lcom/android/server/PrivacyTelephonyRegistry;->remove(Landroid/os/IBinder;)V
+
+    goto :goto_9a
+
+    :catch_109
+    move-exception v4
+
+    iget-object v10, v7, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {p0, v10}, Lcom/android/server/PrivacyTelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    :try_end_10f
+    .catchall {:try_start_d6 .. :try_end_10f} :catchall_d2
+
+    goto :goto_a7
+
+    :cond_110
+    invoke-interface/range {p2 .. p2}, Lcom/android/internal/telephony/IPhoneStateListener;->asBinder()Landroid/os/IBinder;
+
+    move-result-object v10
+
+    invoke-virtual {p0, v10}, Lcom/android/server/PrivacyTelephonyRegistry;->remove(Landroid/os/IBinder;)V
+
+    goto :goto_ae
+
+    :catchall_118
+    move-exception v10
+
+    move-object v7, v8
+
+    goto :goto_d3
+.end method
+
+.method public bridge synthetic notifyCallForwardingChanged(Z)V
+    .registers 2
+
+    invoke-super {p0, p1}, Lcom/android/server/TelephonyRegistry;->notifyCallForwardingChanged(Z)V
+
+    return-void
+.end method
+
+.method public bridge synthetic notifyCallState(ILjava/lang/String;)V
+    .registers 3
+
+    invoke-super {p0, p1, p2}, Lcom/android/server/TelephonyRegistry;->notifyCallState(ILjava/lang/String;)V
+
+    return-void
+.end method
+
+.method public notifyCellInfo(Landroid/telephony/CellInfo;)V
+    .registers 24
+
+    const-string v2, "notifyCellInfo()"
+
+    move-object/from16 v0, p0
+
+    invoke-virtual {v0, v2}, Lcom/android/server/PrivacyTelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+
+    move-result v2
+
+    if-nez v2, :cond_b
+
+    :goto_a
+    return-void
+
+    :cond_b
+    move-object/from16 v0, p0
+
+    iget-object v15, v0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    monitor-enter v15
+
+    :try_start_10
+    move-object/from16 v0, p1
+
+    move-object/from16 v1, p0
+
+    iput-object v0, v1, Lcom/android/server/PrivacyTelephonyRegistry;->mCellInfo:Landroid/telephony/CellInfo;
+
+    move-object/from16 v0, p0
+
+    iget-object v2, v0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    invoke-virtual {v2}, Ljava/util/ArrayList;->iterator()Ljava/util/Iterator;
+
+    move-result-object v13
+
+    :cond_1e
+    :goto_1e
+    invoke-interface {v13}, Ljava/util/Iterator;->hasNext()Z
+
+    move-result v2
+
+    if-eqz v2, :cond_cb
+
+    invoke-interface {v13}, Ljava/util/Iterator;->next()Ljava/lang/Object;
+
+    move-result-object v14
+
+    check-cast v14, Lcom/android/server/TelephonyRegistry$Record;
+
+    iget v2, v14, Lcom/android/server/TelephonyRegistry$Record;->events:I
+    :try_end_2c
+    .catchall {:try_start_10 .. :try_end_2c} :catchall_9a
+
+    and-int/lit16 v2, v2, 0x400
+
+    if-eqz v2, :cond_1e
+
+    const/4 v2, 0x1
+
+    :try_start_31
+    iget-object v3, v14, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    move-object/from16 v0, p0
+
+    invoke-direct {v0, v2, v3}, Lcom/android/server/PrivacyTelephonyRegistry;->isPackageAllowed(ILjava/lang/String;)Z
+
+    move-result v2
+
+    if-nez v2, :cond_9d
+
+    iget-object v0, v14, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    move-object/from16 v16, v0
+
+    new-instance v17, Landroid/telephony/CellInfo;
+
+    const/4 v11, 0x0
+
+    invoke-static {}, Ljava/lang/System;->currentTimeMillis()J
+
+    move-result-wide v18
+
+    invoke-static {}, Ljava/lang/System;->currentTimeMillis()J
+
+    move-result-wide v20
+
+    const/4 v9, 0x1
+
+    new-instance v10, Landroid/telephony/SignalStrength;
+
+    invoke-direct {v10}, Landroid/telephony/SignalStrength;-><init>()V
+
+    new-instance v2, Landroid/telephony/GsmCellIdentity;
+
+    const/16 v3, 0xb
+
+    const/16 v4, 0xb
+
+    const/16 v5, 0x225
+
+    const/16 v6, 0x221
+
+    const/4 v7, 0x2
+
+    const-string v8, "unknown"
+
+    invoke-direct/range {v2 .. v8}, Landroid/telephony/GsmCellIdentity;-><init>(IIIIILjava/lang/String;)V
+
+    move-object/from16 v3, v17
+
+    move v4, v11
+
+    move-wide/from16 v5, v18
+
+    move-wide/from16 v7, v20
+
+    move-object v11, v2
+
+    invoke-direct/range {v3 .. v11}, Landroid/telephony/CellInfo;-><init>(IJJZLandroid/telephony/SignalStrength;Landroid/telephony/CellIdentity;)V
+
+    invoke-interface/range {v16 .. v17}, Lcom/android/internal/telephony/IPhoneStateListener;->onCellInfoChanged(Landroid/telephony/CellInfo;)V
+
+    const-string v2, "PrivacyTelephonyRegistry"
+
+    new-instance v3, Ljava/lang/StringBuilder;
+
+    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V
+
+    const-string v4, "package: "
+
+    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v3
+
+    iget-object v4, v14, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v3
+
+    const-string v4, " blocked for Cellinfo"
+
+    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v3
+
+    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v3
+
+    invoke-static {v2, v3}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+    :try_end_8e
+    .catchall {:try_start_31 .. :try_end_8e} :catchall_9a
+    .catch Landroid/os/RemoteException; {:try_start_31 .. :try_end_8e} :catch_8f
+
+    goto :goto_1e
+
+    :catch_8f
+    move-exception v12
+
+    :try_start_90
+    move-object/from16 v0, p0
+
+    iget-object v2, v0, Lcom/android/server/PrivacyTelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
+
+    iget-object v3, v14, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {v2, v3}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    goto :goto_1e
+
+    :catchall_9a
+    move-exception v2
+
+    monitor-exit v15
+    :try_end_9c
+    .catchall {:try_start_90 .. :try_end_9c} :catchall_9a
+
+    throw v2
+
+    :cond_9d
+    :try_start_9d
+    iget-object v2, v14, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    new-instance v3, Landroid/telephony/CellInfo;
+
+    move-object/from16 v0, p1
+
+    invoke-direct {v3, v0}, Landroid/telephony/CellInfo;-><init>(Landroid/telephony/CellInfo;)V
+
+    invoke-interface {v2, v3}, Lcom/android/internal/telephony/IPhoneStateListener;->onCellInfoChanged(Landroid/telephony/CellInfo;)V
+
+    const-string v2, "PrivacyTelephonyRegistry"
+
+    new-instance v3, Ljava/lang/StringBuilder;
+
+    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V
+
+    const-string v4, "package: "
+
+    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v3
+
+    iget-object v4, v14, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v3
+
+    const-string v4, " allowed for Cellinfo"
+
+    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v3
+
+    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v3
+
+    invoke-static {v2, v3}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+    :try_end_c9
+    .catchall {:try_start_9d .. :try_end_c9} :catchall_9a
+    .catch Landroid/os/RemoteException; {:try_start_9d .. :try_end_c9} :catch_8f
+
+    goto/16 :goto_1e
+
+    :cond_cb
+    :try_start_cb
+    invoke-virtual/range {p0 .. p0}, Lcom/android/server/PrivacyTelephonyRegistry;->handleRemoveListLocked()V
+
+    monitor-exit v15
+    :try_end_cf
+    .catchall {:try_start_cb .. :try_end_cf} :catchall_9a
+
+    goto/16 :goto_a
+.end method
+
+.method public notifyCellLocation(Landroid/os/Bundle;)V
+    .registers 14
+
+    const-string v8, "notifyCellLocation()"
+
+    invoke-virtual {p0, v8}, Lcom/android/server/PrivacyTelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+
+    move-result v8
+
+    if-nez v8, :cond_9
+
+    :goto_8
+    return-void
+
+    :cond_9
+    iget-object v9, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    monitor-enter v9
+
+    :try_start_c
+    iput-object p1, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mCellLocation:Landroid/os/Bundle;
+    :try_end_e
+    .catchall {:try_start_c .. :try_end_e} :catchall_7f
+
+    const/4 v4, 0x0
+
+    const/4 v2, 0x0
+
+    :try_start_10
+    const-string v8, "lac"
+
+    invoke-virtual {p1, v8}, Landroid/os/Bundle;->containsKey(Ljava/lang/String;)Z
+    :try_end_15
+    .catchall {:try_start_10 .. :try_end_15} :catchall_7f
+    .catch Ljava/lang/Exception; {:try_start_10 .. :try_end_15} :catch_84
+
+    move-result v8
+
+    if-eqz v8, :cond_82
+
+    const/4 v4, 0x0
+
+    :goto_19
+    :try_start_19
+    iget-object v8, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    invoke-virtual {v8}, Ljava/util/ArrayList;->iterator()Ljava/util/Iterator;
+
+    move-result-object v3
+
+    :cond_1f
+    :goto_1f
+    invoke-interface {v3}, Ljava/util/Iterator;->hasNext()Z
+
+    move-result v8
+
+    if-eqz v8, :cond_bc
+
+    invoke-interface {v3}, Ljava/util/Iterator;->next()Ljava/lang/Object;
+
+    move-result-object v6
+
+    check-cast v6, Lcom/android/server/TelephonyRegistry$Record;
+
+    iget v8, v6, Lcom/android/server/TelephonyRegistry$Record;->events:I
+    :try_end_2d
+    .catchall {:try_start_19 .. :try_end_2d} :catchall_7f
+
+    and-int/lit8 v8, v8, 0x10
+
+    if-eqz v8, :cond_1f
+
+    const/4 v8, 0x0
+
+    :try_start_32
+    iget-object v10, v6, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    invoke-direct {p0, v8, v10}, Lcom/android/server/PrivacyTelephonyRegistry;->isPackageAllowed(ILjava/lang/String;)Z
+
+    move-result v8
+
+    if-nez v8, :cond_90
+
+    if-nez v2, :cond_90
+
+    new-instance v5, Landroid/os/Bundle;
+
+    invoke-direct {v5}, Landroid/os/Bundle;-><init>()V
+
+    if-eqz v4, :cond_87
+
+    new-instance v7, Landroid/telephony/cdma/CdmaCellLocation;
+
+    invoke-direct {v7}, Landroid/telephony/cdma/CdmaCellLocation;-><init>()V
+
+    invoke-virtual {v7, v5}, Landroid/telephony/cdma/CdmaCellLocation;->fillInNotifierBundle(Landroid/os/Bundle;)V
+
+    :goto_4b
+    iget-object v8, v6, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    new-instance v10, Landroid/os/Bundle;
+
+    invoke-direct {v10, v5}, Landroid/os/Bundle;-><init>(Landroid/os/Bundle;)V
+
+    invoke-interface {v8, v10}, Lcom/android/internal/telephony/IPhoneStateListener;->onCellLocationChanged(Landroid/os/Bundle;)V
+
+    const-string v8, "PrivacyTelephonyRegistry"
+
+    new-instance v10, Ljava/lang/StringBuilder;
+
+    invoke-direct {v10}, Ljava/lang/StringBuilder;-><init>()V
+
+    const-string v11, "package: "
+
+    invoke-virtual {v10, v11}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v10
+
+    iget-object v11, v6, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    invoke-virtual {v10, v11}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v10
+
+    const-string v11, " blocked for CellLocation"
+
+    invoke-virtual {v10, v11}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v10
+
+    invoke-virtual {v10}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v10
+
+    invoke-static {v8, v10}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+    :try_end_75
+    .catchall {:try_start_32 .. :try_end_75} :catchall_7f
+    .catch Landroid/os/RemoteException; {:try_start_32 .. :try_end_75} :catch_76
+
+    goto :goto_1f
+
+    :catch_76
+    move-exception v1
+
+    :try_start_77
+    iget-object v8, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
+
+    iget-object v10, v6, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {v8, v10}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    goto :goto_1f
+
+    :catchall_7f
+    move-exception v8
+
+    monitor-exit v9
+    :try_end_81
+    .catchall {:try_start_77 .. :try_end_81} :catchall_7f
+
+    throw v8
+
+    :cond_82
+    const/4 v4, 0x1
+
+    goto :goto_19
+
+    :catch_84
+    move-exception v0
+
+    const/4 v2, 0x1
+
+    goto :goto_19
+
+    :cond_87
+    :try_start_87
+    new-instance v7, Landroid/telephony/gsm/GsmCellLocation;
+
+    invoke-direct {v7}, Landroid/telephony/gsm/GsmCellLocation;-><init>()V
+
+    invoke-virtual {v7, v5}, Landroid/telephony/gsm/GsmCellLocation;->fillInNotifierBundle(Landroid/os/Bundle;)V
+
+    goto :goto_4b
+
+    :cond_90
+    iget-object v8, v6, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    new-instance v10, Landroid/os/Bundle;
+
+    invoke-direct {v10, p1}, Landroid/os/Bundle;-><init>(Landroid/os/Bundle;)V
+
+    invoke-interface {v8, v10}, Lcom/android/internal/telephony/IPhoneStateListener;->onCellLocationChanged(Landroid/os/Bundle;)V
+
+    const-string v8, "PrivacyTelephonyRegistry"
+
+    new-instance v10, Ljava/lang/StringBuilder;
+
+    invoke-direct {v10}, Ljava/lang/StringBuilder;-><init>()V
+
+    const-string v11, "package: "
+
+    invoke-virtual {v10, v11}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v10
+
+    iget-object v11, v6, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    invoke-virtual {v10, v11}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v10
+
+    const-string v11, " allowed for CellLocation"
+
+    invoke-virtual {v10, v11}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v10
+
+    invoke-virtual {v10}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v10
+
+    invoke-static {v8, v10}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+    :try_end_ba
+    .catchall {:try_start_87 .. :try_end_ba} :catchall_7f
+    .catch Landroid/os/RemoteException; {:try_start_87 .. :try_end_ba} :catch_76
+
+    goto/16 :goto_1f
+
+    :cond_bc
+    :try_start_bc
+    invoke-virtual {p0}, Lcom/android/server/PrivacyTelephonyRegistry;->handleRemoveListLocked()V
+
+    monitor-exit v9
+    :try_end_c0
+    .catchall {:try_start_bc .. :try_end_c0} :catchall_7f
+
+    goto/16 :goto_8
+.end method
+
+.method public bridge synthetic notifyDataActivity(I)V
+    .registers 2
+
+    invoke-super {p0, p1}, Lcom/android/server/TelephonyRegistry;->notifyDataActivity(I)V
+
+    return-void
+.end method
+
+.method public bridge synthetic notifyDataConnection(IZLjava/lang/String;Ljava/lang/String;Ljava/lang/String;Landroid/net/LinkProperties;Landroid/net/LinkCapabilities;IZ)V
+    .registers 10
+
+    invoke-super/range {p0 .. p9}, Lcom/android/server/TelephonyRegistry;->notifyDataConnection(IZLjava/lang/String;Ljava/lang/String;Ljava/lang/String;Landroid/net/LinkProperties;Landroid/net/LinkCapabilities;IZ)V
+
+    return-void
+.end method
+
+.method public bridge synthetic notifyDataConnectionFailed(Ljava/lang/String;Ljava/lang/String;)V
+    .registers 3
+
+    invoke-super {p0, p1, p2}, Lcom/android/server/TelephonyRegistry;->notifyDataConnectionFailed(Ljava/lang/String;Ljava/lang/String;)V
+
+    return-void
+.end method
+
+.method public bridge synthetic notifyMessageWaitingChanged(Z)V
+    .registers 2
+
+    invoke-super {p0, p1}, Lcom/android/server/TelephonyRegistry;->notifyMessageWaitingChanged(Z)V
+
+    return-void
+.end method
+
+.method public bridge synthetic notifyOtaspChanged(I)V
+    .registers 2
+
+    invoke-super {p0, p1}, Lcom/android/server/TelephonyRegistry;->notifyOtaspChanged(I)V
+
+    return-void
+.end method
+
+.method public notifyPrivacyCallState(ILjava/lang/String;Ljava/lang/String;)V
+    .registers 10
+
+    iget-object v4, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    monitor-enter v4
+
+    :try_start_3
+    iget-object v3, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    invoke-virtual {v3}, Ljava/util/ArrayList;->iterator()Ljava/util/Iterator;
+
+    move-result-object v1
+
+    :cond_9
+    :goto_9
+    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z
+
+    move-result v3
+
+    if-eqz v3, :cond_35
+
+    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;
+
+    move-result-object v2
+
+    check-cast v2, Lcom/android/server/TelephonyRegistry$Record;
+
+    iget v3, v2, Lcom/android/server/TelephonyRegistry$Record;->events:I
+    :try_end_17
+    .catchall {:try_start_3 .. :try_end_17} :catchall_32
+
+    and-int/lit8 v3, v3, 0x20
+
+    if-eqz v3, :cond_9
+
+    :try_start_1b
+    iget-object v3, v2, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    invoke-virtual {v3, p3}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v3
+
+    if-eqz v3, :cond_9
+
+    iget-object v3, v2, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    invoke-interface {v3, p1, p2}, Lcom/android/internal/telephony/IPhoneStateListener;->onCallStateChanged(ILjava/lang/String;)V
+    :try_end_28
+    .catchall {:try_start_1b .. :try_end_28} :catchall_32
+    .catch Landroid/os/RemoteException; {:try_start_1b .. :try_end_28} :catch_29
+
+    goto :goto_9
+
+    :catch_29
+    move-exception v0
+
+    :try_start_2a
+    iget-object v3, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
+
+    iget-object v5, v2, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {v3, v5}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    goto :goto_9
+
+    :catchall_32
+    move-exception v3
+
+    monitor-exit v4
+    :try_end_34
+    .catchall {:try_start_2a .. :try_end_34} :catchall_32
+
+    throw v3
+
+    :cond_35
+    :try_start_35
+    invoke-virtual {p0}, Lcom/android/server/PrivacyTelephonyRegistry;->handleRemoveListLocked()V
+
+    monitor-exit v4
+    :try_end_39
+    .catchall {:try_start_35 .. :try_end_39} :catchall_32
+
+    return-void
+.end method
+
+.method public notifyServiceState(Landroid/telephony/ServiceState;)V
+    .registers 9
+
+    const-string v3, "notifyServiceState()"
+
+    invoke-virtual {p0, v3}, Lcom/android/server/PrivacyTelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+
+    move-result v3
+
+    if-nez v3, :cond_9
+
+    :goto_8
+    return-void
+
+    :cond_9
+    iget-object v4, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    monitor-enter v4
+
+    :try_start_c
+    iput-object p1, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mServiceState:Landroid/telephony/ServiceState;
+
+    iget-object v3, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    invoke-virtual {v3}, Ljava/util/ArrayList;->iterator()Ljava/util/Iterator;
+
+    move-result-object v1
+
+    :cond_14
+    :goto_14
+    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z
+
+    move-result v3
+
+    if-eqz v3, :cond_90
+
+    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;
+
+    move-result-object v2
+
+    check-cast v2, Lcom/android/server/TelephonyRegistry$Record;
+
+    iget v3, v2, Lcom/android/server/TelephonyRegistry$Record;->events:I
+    :try_end_22
+    .catchall {:try_start_c .. :try_end_22} :catchall_6c
+
+    and-int/lit8 v3, v3, 0x1
+
+    if-eqz v3, :cond_14
+
+    const/4 v3, 0x4
+
+    :try_start_27
+    iget-object v5, v2, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    invoke-direct {p0, v3, v5}, Lcom/android/server/PrivacyTelephonyRegistry;->isPackageAllowed(ILjava/lang/String;)Z
+
+    move-result v3
+
+    if-nez v3, :cond_6f
+
+    const-string v3, ""
+
+    const-string v5, ""
+
+    const-string v6, ""
+
+    invoke-virtual {p1, v3, v5, v6}, Landroid/telephony/ServiceState;->setOperatorName(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
+
+    const-string v3, "PrivacyTelephonyRegistry"
+
+    new-instance v5, Ljava/lang/StringBuilder;
+
+    invoke-direct {v5}, Ljava/lang/StringBuilder;-><init>()V
+
+    const-string v6, "package: "
+
+    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v5
+
+    iget-object v6, v2, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v5
+
+    const-string v6, " blocked for Cellinfo"
+
+    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v5
+
+    invoke-virtual {v5}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v5
+
+    invoke-static {v3, v5}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    :goto_58
+    iget-object v3, v2, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
+
+    new-instance v5, Landroid/telephony/ServiceState;
+
+    invoke-direct {v5, p1}, Landroid/telephony/ServiceState;-><init>(Landroid/telephony/ServiceState;)V
+
+    invoke-interface {v3, v5}, Lcom/android/internal/telephony/IPhoneStateListener;->onServiceStateChanged(Landroid/telephony/ServiceState;)V
+    :try_end_62
+    .catchall {:try_start_27 .. :try_end_62} :catchall_6c
+    .catch Landroid/os/RemoteException; {:try_start_27 .. :try_end_62} :catch_63
+
+    goto :goto_14
+
+    :catch_63
+    move-exception v0
+
+    :try_start_64
+    iget-object v3, p0, Lcom/android/server/PrivacyTelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
+
+    iget-object v5, v2, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    invoke-virtual {v3, v5}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+
+    goto :goto_14
+
+    :catchall_6c
+    move-exception v3
+
+    monitor-exit v4
+    :try_end_6e
+    .catchall {:try_start_64 .. :try_end_6e} :catchall_6c
+
+    throw v3
+
+    :cond_6f
+    :try_start_6f
+    const-string v3, "PrivacyTelephonyRegistry"
+
+    new-instance v5, Ljava/lang/StringBuilder;
+
+    invoke-direct {v5}, Ljava/lang/StringBuilder;-><init>()V
+
+    const-string v6, "package: "
+
+    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v5
+
+    iget-object v6, v2, Lcom/android/server/TelephonyRegistry$Record;->pkgForDebug:Ljava/lang/String;
+
+    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v5
+
+    const-string v6, " allowed for Cellinfo"
+
+    invoke-virtual {v5, v6}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+
+    move-result-object v5
+
+    invoke-virtual {v5}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+
+    move-result-object v5
+
+    invoke-static {v3, v5}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+    :try_end_8f
+    .catchall {:try_start_6f .. :try_end_8f} :catchall_6c
+    .catch Landroid/os/RemoteException; {:try_start_6f .. :try_end_8f} :catch_63
+
+    goto :goto_58
+
+    :cond_90
+    :try_start_90
+    invoke-virtual {p0}, Lcom/android/server/PrivacyTelephonyRegistry;->handleRemoveListLocked()V
+
+    monitor-exit v4
+    :try_end_94
+    .catchall {:try_start_90 .. :try_end_94} :catchall_6c
+
+    invoke-virtual {p0, p1}, Lcom/android/server/PrivacyTelephonyRegistry;->broadcastServiceStateChanged(Landroid/telephony/ServiceState;)V
+
+    goto/16 :goto_8
+.end method
+
+.method public bridge synthetic notifySignalStrength(Landroid/telephony/SignalStrength;)V
+    .registers 2
+
+    invoke-super {p0, p1}, Lcom/android/server/TelephonyRegistry;->notifySignalStrength(Landroid/telephony/SignalStrength;)V
+
+    return-void
+.end method
diff -Npru stock-services/smali/com/android/server/ServerThread.smali ext-services/smali/com/android/server/ServerThread.smali
--- stock-services/smali/com/android/server/ServerThread.smali	2012-11-06 15:04:28.070608053 -0600
+++ ext-services/smali/com/android/server/ServerThread.smali	2012-11-06 15:04:19.310564613 -0600
@@ -32,6 +32,41 @@
     return-void
 .end method
 
+.method private addPrivacyService(Landroid/content/Context;)V
+    .registers 5
+
+    :try_start_0
+    const-string v1, "SystemServer"
+
+    const-string v2, "Privacy Service"
+
+    invoke-static {v1, v2}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    const-string v1, "privacy"
+
+    new-instance v2, Landroid/privacy/PrivacySettingsManagerService;
+
+    invoke-direct {v2, p1}, Landroid/privacy/PrivacySettingsManagerService;-><init>(Landroid/content/Context;)V
+
+    invoke-static {v1, v2}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
+    :try_end_11
+    .catch Ljava/lang/Throwable; {:try_start_0 .. :try_end_11} :catch_12
+
+    :goto_11
+    return-void
+
+    :catch_12
+    move-exception v0
+
+    const-string v1, "SystemServer"
+
+    const-string v2, "Failure starting Privacy Service"
+
+    invoke-static {v1, v2, v0}, Landroid/util/Log;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
+
+    goto :goto_11
+.end method
+
 .method static final startSystemUi(Landroid/content/Context;)V
     .registers 5
 
@@ -165,7 +200,7 @@
 
     const/16 v9, 0x31
 
-    if-ne v3, v9, :cond_720
+    if-ne v3, v9, :cond_725
 
     const/16 v98, 0x1
 
@@ -176,7 +211,7 @@
 
     const/4 v9, 0x1
 
-    if-le v3, v9, :cond_724
+    if-le v3, v9, :cond_729
 
     const/4 v3, 0x1
 
@@ -212,7 +247,7 @@
 
     move-result v3
 
-    if-eqz v3, :cond_728
+    if-eqz v3, :cond_72d
 
     const/16 v69, 0x0
 
@@ -314,7 +349,7 @@
 
     invoke-direct {v6}, Lcom/android/server/PowerManagerService;-><init>()V
     :try_end_c5
-    .catch Ljava/lang/RuntimeException; {:try_start_a8 .. :try_end_c5} :catch_ac2
+    .catch Ljava/lang/RuntimeException; {:try_start_a8 .. :try_end_c5} :catch_ac7
 
     :try_start_c5
     const-string v3, "power"
@@ -339,9 +374,9 @@
 
     const-string v3, "telephony.registry"
 
-    new-instance v9, Lcom/android/server/TelephonyRegistry;
+    new-instance v9, Lcom/android/server/PrivacyTelephonyRegistry;
 
-    invoke-direct {v9, v4}, Lcom/android/server/TelephonyRegistry;-><init>(Landroid/content/Context;)V
+    invoke-direct {v9, v4}, Lcom/android/server/PrivacyTelephonyRegistry;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
 
@@ -383,7 +418,7 @@
 
     move-result v3
 
-    if-eqz v3, :cond_72e
+    if-eqz v3, :cond_733
 
     const-string v3, "SystemServer"
 
@@ -395,7 +430,7 @@
 
     :cond_11c
     :goto_11c
-    if-eqz v69, :cond_743
+    if-eqz v69, :cond_748
 
     const/4 v3, 0x1
 
@@ -404,7 +439,7 @@
 
     invoke-static {v4, v3, v0}, Lcom/android/server/pm/PackageManagerService;->main(Landroid/content/Context;ZZ)Landroid/content/pm/IPackageManager;
     :try_end_124
-    .catch Ljava/lang/RuntimeException; {:try_start_c5 .. :try_end_124} :catch_752
+    .catch Ljava/lang/RuntimeException; {:try_start_c5 .. :try_end_124} :catch_757
 
     move-result-object v93
 
@@ -413,8 +448,8 @@
     :try_start_127
     invoke-interface/range {v93 .. v93}, Landroid/content/pm/IPackageManager;->isFirstBoot()Z
     :try_end_12a
-    .catch Landroid/os/RemoteException; {:try_start_127 .. :try_end_12a} :catch_a51
-    .catch Ljava/lang/RuntimeException; {:try_start_127 .. :try_end_12a} :catch_752
+    .catch Landroid/os/RemoteException; {:try_start_127 .. :try_end_12a} :catch_a56
+    .catch Ljava/lang/RuntimeException; {:try_start_127 .. :try_end_12a} :catch_757
 
     move-result v72
 
@@ -430,7 +465,7 @@
 
     iput-object v3, v0, Lcom/android/server/ServerThread;->mContentResolver:Landroid/content/ContentResolver;
     :try_end_136
-    .catch Ljava/lang/RuntimeException; {:try_start_12b .. :try_end_136} :catch_752
+    .catch Ljava/lang/RuntimeException; {:try_start_12b .. :try_end_136} :catch_757
 
     :try_start_136
     const-string v3, "SystemServer"
@@ -445,8 +480,8 @@
 
     invoke-direct {v0, v4}, Landroid/accounts/AccountManagerService;-><init>(Landroid/content/Context;)V
     :try_end_144
-    .catch Ljava/lang/Throwable; {:try_start_136 .. :try_end_144} :catch_746
-    .catch Ljava/lang/RuntimeException; {:try_start_136 .. :try_end_144} :catch_752
+    .catch Ljava/lang/Throwable; {:try_start_136 .. :try_end_144} :catch_74b
+    .catch Ljava/lang/RuntimeException; {:try_start_136 .. :try_end_144} :catch_757
 
     :try_start_144
     const-string v3, "account"
@@ -455,8 +490,8 @@
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
     :try_end_14b
-    .catch Ljava/lang/Throwable; {:try_start_144 .. :try_end_14b} :catch_b01
-    .catch Ljava/lang/RuntimeException; {:try_start_144 .. :try_end_14b} :catch_acb
+    .catch Ljava/lang/Throwable; {:try_start_144 .. :try_end_14b} :catch_b06
+    .catch Ljava/lang/RuntimeException; {:try_start_144 .. :try_end_14b} :catch_ad0
 
     move-object/from16 v42, v43
 
@@ -472,7 +507,7 @@
 
     move/from16 v0, v69
 
-    if-ne v0, v3, :cond_769
+    if-ne v0, v3, :cond_76e
 
     const/4 v3, 0x1
 
@@ -481,6 +516,10 @@
 
     move-result-object v58
 
+    move-object/from16 v0, p0
+
+    invoke-direct {v0, v4}, Lcom/android/server/ServerThread;->addPrivacyService(Landroid/content/Context;)V
+
     const-string v3, "SystemServer"
 
     const-string v9, "System Content Providers"
@@ -500,10 +539,10 @@
     move-object/from16 v0, v78
 
     invoke-direct {v0, v4}, Lcom/android/server/LightsService;-><init>(Landroid/content/Context;)V
-    :try_end_176
-    .catch Ljava/lang/RuntimeException; {:try_start_14d .. :try_end_176} :catch_752
+    :try_end_17b
+    .catch Ljava/lang/RuntimeException; {:try_start_14d .. :try_end_17b} :catch_757
 
-    :try_start_176
+    :try_start_17b
     const-string v3, "SystemServer"
 
     const-string v9, "Battery Service"
@@ -515,10 +554,10 @@
     move-object/from16 v0, v78
 
     invoke-direct {v5, v4, v0}, Lcom/android/server/BatteryService;-><init>(Landroid/content/Context;Lcom/android/server/LightsService;)V
-    :try_end_184
-    .catch Ljava/lang/RuntimeException; {:try_start_176 .. :try_end_184} :catch_ad4
+    :try_end_189
+    .catch Ljava/lang/RuntimeException; {:try_start_17b .. :try_end_189} :catch_ad9
 
-    :try_start_184
+    :try_start_189
     const-string v3, "battery"
 
     invoke-static {v3, v5}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
@@ -534,10 +573,10 @@
     move-object/from16 v0, v118
 
     invoke-direct {v0, v4}, Lcom/android/server/VibratorService;-><init>(Landroid/content/Context;)V
-    :try_end_197
-    .catch Ljava/lang/RuntimeException; {:try_start_184 .. :try_end_197} :catch_add
+    :try_end_19c
+    .catch Ljava/lang/RuntimeException; {:try_start_189 .. :try_end_19c} :catch_ae2
 
-    :try_start_197
+    :try_start_19c
     const-string v3, "vibrator"
 
     move-object/from16 v0, v118
@@ -561,10 +600,10 @@
     new-instance v7, Lcom/android/server/AlarmManagerService;
 
     invoke-direct {v7, v4}, Lcom/android/server/AlarmManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_1b3
-    .catch Ljava/lang/RuntimeException; {:try_start_197 .. :try_end_1b3} :catch_ae4
+    :try_end_1b8
+    .catch Ljava/lang/RuntimeException; {:try_start_19c .. :try_end_1b8} :catch_ae9
 
-    :try_start_1b3
+    :try_start_1b8
     const-string v3, "alarm"
 
     invoke-static {v3, v7}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
@@ -595,18 +634,18 @@
 
     move/from16 v0, v69
 
-    if-eq v0, v3, :cond_76c
+    if-eq v0, v3, :cond_771
 
     const/4 v3, 0x1
 
     move v9, v3
 
-    :goto_1d8
-    if-nez v72, :cond_770
+    :goto_1dd
+    if-nez v72, :cond_775
 
     const/4 v3, 0x1
 
-    :goto_1db
+    :goto_1e0
     move/from16 v0, v92
 
     invoke-static {v4, v6, v9, v3, v0}, Lcom/android/server/wm/WindowManagerService;->main(Landroid/content/Context;Lcom/android/server/PowerManagerService;ZZZ)Lcom/android/server/wm/WindowManagerService;
@@ -649,22 +688,22 @@
 
     move-result v3
 
-    if-eqz v3, :cond_773
+    if-eqz v3, :cond_778
 
     const-string v3, "SystemServer"
 
     const-string v9, "No Bluetooh Service (emulator)"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
-    :try_end_211
-    .catch Ljava/lang/RuntimeException; {:try_start_1b3 .. :try_end_211} :catch_781
+    :try_end_216
+    .catch Ljava/lang/RuntimeException; {:try_start_1b8 .. :try_end_216} :catch_786
 
-    :goto_211
+    :goto_216
     move-object/from16 v117, v118
 
     move-object/from16 v77, v78
 
-    :goto_215
+    :goto_21a
     invoke-virtual {v4}, Landroid/content/Context;->getResources()Landroid/content/res/Resources;
 
     move-result-object v3
@@ -703,9 +742,9 @@
 
     move/from16 v0, v69
 
-    if-eq v0, v3, :cond_267
+    if-eq v0, v3, :cond_26c
 
-    :try_start_23d
+    :try_start_242
     const-string v3, "SystemServer"
 
     const-string v9, "Input Method Service"
@@ -719,22 +758,22 @@
     move-object/from16 v1, v126
 
     invoke-direct {v0, v4, v1}, Lcom/android/server/InputMethodManagerService;-><init>(Landroid/content/Context;Lcom/android/server/wm/WindowManagerService;)V
-    :try_end_24d
-    .catch Ljava/lang/Throwable; {:try_start_23d .. :try_end_24d} :catch_7d6
+    :try_end_252
+    .catch Ljava/lang/Throwable; {:try_start_242 .. :try_end_252} :catch_7db
 
-    :try_start_24d
+    :try_start_252
     const-string v3, "input_method"
 
     move-object/from16 v0, v75
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_254
-    .catch Ljava/lang/Throwable; {:try_start_24d .. :try_end_254} :catch_abd
+    :try_end_259
+    .catch Ljava/lang/Throwable; {:try_start_252 .. :try_end_259} :catch_ac2
 
     move-object/from16 v74, v75
 
-    :goto_256
-    :try_start_256
+    :goto_25b
+    :try_start_25b
     const-string v3, "SystemServer"
 
     const-string v9, "Accessibility Manager"
@@ -748,24 +787,24 @@
     invoke-direct {v9, v4}, Lcom/android/server/accessibility/AccessibilityManagerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_267
-    .catch Ljava/lang/Throwable; {:try_start_256 .. :try_end_267} :catch_7e2
+    :try_end_26c
+    .catch Ljava/lang/Throwable; {:try_start_25b .. :try_end_26c} :catch_7e7
 
-    :cond_267
-    :goto_267
-    :try_start_267
+    :cond_26c
+    :goto_26c
+    :try_start_26c
     invoke-virtual/range {v126 .. v126}, Lcom/android/server/wm/WindowManagerService;->displayReady()V
-    :try_end_26a
-    .catch Ljava/lang/Throwable; {:try_start_267 .. :try_end_26a} :catch_7ee
+    :try_end_26f
+    .catch Ljava/lang/Throwable; {:try_start_26c .. :try_end_26f} :catch_7f3
 
-    :goto_26a
-    :try_start_26a
+    :goto_26f
+    :try_start_26f
     invoke-interface/range {v93 .. v93}, Landroid/content/pm/IPackageManager;->performBootDexOpt()V
-    :try_end_26d
-    .catch Ljava/lang/Throwable; {:try_start_26a .. :try_end_26d} :catch_7fa
+    :try_end_272
+    .catch Ljava/lang/Throwable; {:try_start_26f .. :try_end_272} :catch_7ff
 
-    :goto_26d
-    :try_start_26d
+    :goto_272
+    :try_start_272
     invoke-static {}, Landroid/app/ActivityManagerNative;->getDefault()Landroid/app/IActivityManager;
 
     move-result-object v3
@@ -783,15 +822,15 @@
     const/4 v10, 0x0
 
     invoke-interface {v3, v9, v10}, Landroid/app/IActivityManager;->showBootMessage(Ljava/lang/CharSequence;Z)V
-    :try_end_280
-    .catch Landroid/os/RemoteException; {:try_start_26d .. :try_end_280} :catch_aba
+    :try_end_285
+    .catch Landroid/os/RemoteException; {:try_start_272 .. :try_end_285} :catch_abf
 
-    :goto_280
+    :goto_285
     const/4 v3, 0x1
 
     move/from16 v0, v69
 
-    if-eq v0, v3, :cond_b06
+    if-eq v0, v3, :cond_b0b
 
     const/16 v84, 0x0
 
@@ -807,9 +846,9 @@
 
     move-result v3
 
-    if-nez v3, :cond_2ac
+    if-nez v3, :cond_2b1
 
-    :try_start_295
+    :try_start_29a
     const-string v3, "SystemServer"
 
     const-string v9, "Mount Service"
@@ -821,23 +860,23 @@
     move-object/from16 v0, v85
 
     invoke-direct {v0, v4}, Lcom/android/server/MountService;-><init>(Landroid/content/Context;)V
-    :try_end_2a3
-    .catch Ljava/lang/Throwable; {:try_start_295 .. :try_end_2a3} :catch_806
+    :try_end_2a8
+    .catch Ljava/lang/Throwable; {:try_start_29a .. :try_end_2a8} :catch_80b
 
-    :try_start_2a3
+    :try_start_2a8
     const-string v3, "mount"
 
     move-object/from16 v0, v85
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_2aa
-    .catch Ljava/lang/Throwable; {:try_start_2a3 .. :try_end_2aa} :catch_ab5
+    :try_end_2af
+    .catch Ljava/lang/Throwable; {:try_start_2a8 .. :try_end_2af} :catch_aba
 
     move-object/from16 v84, v85
 
-    :cond_2ac
-    :goto_2ac
-    :try_start_2ac
+    :cond_2b1
+    :goto_2b1
+    :try_start_2b1
     const-string v3, "SystemServer"
 
     const-string v9, "LockSettingsService"
@@ -849,22 +888,22 @@
     move-object/from16 v0, v82
 
     invoke-direct {v0, v4}, Lcom/android/internal/widget/LockSettingsService;-><init>(Landroid/content/Context;)V
-    :try_end_2ba
-    .catch Ljava/lang/Throwable; {:try_start_2ac .. :try_end_2ba} :catch_812
+    :try_end_2bf
+    .catch Ljava/lang/Throwable; {:try_start_2b1 .. :try_end_2bf} :catch_817
 
-    :try_start_2ba
+    :try_start_2bf
     const-string v3, "lock_settings"
 
     move-object/from16 v0, v82
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_2c1
-    .catch Ljava/lang/Throwable; {:try_start_2ba .. :try_end_2c1} :catch_ab0
+    :try_end_2c6
+    .catch Ljava/lang/Throwable; {:try_start_2bf .. :try_end_2c6} :catch_ab5
 
     move-object/from16 v81, v82
 
-    :goto_2c3
-    :try_start_2c3
+    :goto_2c8
+    :try_start_2c8
     const-string v3, "SystemServer"
 
     const-string v9, "Device Policy"
@@ -876,22 +915,22 @@
     move-object/from16 v0, v63
 
     invoke-direct {v0, v4}, Lcom/android/server/DevicePolicyManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_2d1
-    .catch Ljava/lang/Throwable; {:try_start_2c3 .. :try_end_2d1} :catch_81e
+    :try_end_2d6
+    .catch Ljava/lang/Throwable; {:try_start_2c8 .. :try_end_2d6} :catch_823
 
-    :try_start_2d1
+    :try_start_2d6
     const-string v3, "device_policy"
 
     move-object/from16 v0, v63
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_2d8
-    .catch Ljava/lang/Throwable; {:try_start_2d1 .. :try_end_2d8} :catch_aab
+    :try_end_2dd
+    .catch Ljava/lang/Throwable; {:try_start_2d6 .. :try_end_2dd} :catch_ab0
 
     move-object/from16 v62, v63
 
-    :goto_2da
-    :try_start_2da
+    :goto_2df
+    :try_start_2df
     const-string v3, "SystemServer"
 
     const-string v9, "Status Bar"
@@ -905,22 +944,22 @@
     move-object/from16 v1, v126
 
     invoke-direct {v0, v4, v1}, Lcom/android/server/StatusBarManagerService;-><init>(Landroid/content/Context;Lcom/android/server/wm/WindowManagerService;)V
-    :try_end_2ea
-    .catch Ljava/lang/Throwable; {:try_start_2da .. :try_end_2ea} :catch_82a
+    :try_end_2ef
+    .catch Ljava/lang/Throwable; {:try_start_2df .. :try_end_2ef} :catch_82f
 
-    :try_start_2ea
+    :try_start_2ef
     const-string v3, "statusbar"
 
     move-object/from16 v0, v108
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_2f1
-    .catch Ljava/lang/Throwable; {:try_start_2ea .. :try_end_2f1} :catch_aa6
+    :try_end_2f6
+    .catch Ljava/lang/Throwable; {:try_start_2ef .. :try_end_2f6} :catch_aab
 
     move-object/from16 v107, v108
 
-    :goto_2f3
-    :try_start_2f3
+    :goto_2f8
+    :try_start_2f8
     const-string v3, "SystemServer"
 
     const-string v9, "Clipboard Service"
@@ -934,11 +973,11 @@
     invoke-direct {v9, v4}, Lcom/android/server/ClipboardService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_304
-    .catch Ljava/lang/Throwable; {:try_start_2f3 .. :try_end_304} :catch_836
+    :try_end_309
+    .catch Ljava/lang/Throwable; {:try_start_2f8 .. :try_end_309} :catch_83b
 
-    :goto_304
-    :try_start_304
+    :goto_309
+    :try_start_309
     const-string v3, "SystemServer"
 
     const-string v9, "NetworkManagement Service"
@@ -952,11 +991,11 @@
     const-string v3, "network_management"
 
     invoke-static {v3, v13}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_314
-    .catch Ljava/lang/Throwable; {:try_start_304 .. :try_end_314} :catch_842
+    :try_end_319
+    .catch Ljava/lang/Throwable; {:try_start_309 .. :try_end_319} :catch_847
 
-    :goto_314
-    :try_start_314
+    :goto_319
+    :try_start_319
     const-string v3, "SystemServer"
 
     const-string v9, "Text Service Manager Service"
@@ -968,22 +1007,22 @@
     move-object/from16 v0, v112
 
     invoke-direct {v0, v4}, Lcom/android/server/TextServicesManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_322
-    .catch Ljava/lang/Throwable; {:try_start_314 .. :try_end_322} :catch_84e
+    :try_end_327
+    .catch Ljava/lang/Throwable; {:try_start_319 .. :try_end_327} :catch_853
 
-    :try_start_322
+    :try_start_327
     const-string v3, "textservices"
 
     move-object/from16 v0, v112
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_329
-    .catch Ljava/lang/Throwable; {:try_start_322 .. :try_end_329} :catch_aa1
+    :try_end_32e
+    .catch Ljava/lang/Throwable; {:try_start_327 .. :try_end_32e} :catch_aa6
 
     move-object/from16 v111, v112
 
-    :goto_32b
-    :try_start_32b
+    :goto_330
+    :try_start_330
     const-string v3, "SystemServer"
 
     const-string v9, "NetworkStats Service"
@@ -995,22 +1034,22 @@
     move-object/from16 v0, v87
 
     invoke-direct {v0, v4, v13, v7}, Lcom/android/server/net/NetworkStatsService;-><init>(Landroid/content/Context;Landroid/os/INetworkManagementService;Landroid/app/IAlarmManager;)V
-    :try_end_339
-    .catch Ljava/lang/Throwable; {:try_start_32b .. :try_end_339} :catch_85a
+    :try_end_33e
+    .catch Ljava/lang/Throwable; {:try_start_330 .. :try_end_33e} :catch_85f
 
-    :try_start_339
+    :try_start_33e
     const-string v3, "netstats"
 
     move-object/from16 v0, v87
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_340
-    .catch Ljava/lang/Throwable; {:try_start_339 .. :try_end_340} :catch_a9c
+    :try_end_345
+    .catch Ljava/lang/Throwable; {:try_start_33e .. :try_end_345} :catch_aa1
 
     move-object/from16 v12, v87
 
-    :goto_342
-    :try_start_342
+    :goto_347
+    :try_start_347
     const-string v3, "SystemServer"
 
     const-string v9, "NetworkPolicy Service"
@@ -1028,18 +1067,18 @@
     move-object v11, v6
 
     invoke-direct/range {v8 .. v13}, Lcom/android/server/net/NetworkPolicyManagerService;-><init>(Landroid/content/Context;Landroid/app/IActivityManager;Landroid/os/IPowerManager;Landroid/net/INetworkStatsService;Landroid/os/INetworkManagementService;)V
-    :try_end_354
-    .catch Ljava/lang/Throwable; {:try_start_342 .. :try_end_354} :catch_866
+    :try_end_359
+    .catch Ljava/lang/Throwable; {:try_start_347 .. :try_end_359} :catch_86b
 
-    :try_start_354
+    :try_start_359
     const-string v3, "netpolicy"
 
     invoke-static {v3, v8}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_359
-    .catch Ljava/lang/Throwable; {:try_start_354 .. :try_end_359} :catch_a99
+    :try_end_35e
+    .catch Ljava/lang/Throwable; {:try_start_359 .. :try_end_35e} :catch_a9e
 
-    :goto_359
-    :try_start_359
+    :goto_35e
+    :try_start_35e
     const-string v3, "SystemServer"
 
     const-string v9, "Wi-Fi P2pService"
@@ -1051,22 +1090,22 @@
     move-object/from16 v0, v125
 
     invoke-direct {v0, v4}, Landroid/net/wifi/p2p/WifiP2pService;-><init>(Landroid/content/Context;)V
-    :try_end_367
-    .catch Ljava/lang/Throwable; {:try_start_359 .. :try_end_367} :catch_874
+    :try_end_36c
+    .catch Ljava/lang/Throwable; {:try_start_35e .. :try_end_36c} :catch_879
 
-    :try_start_367
+    :try_start_36c
     const-string v3, "wifip2p"
 
     move-object/from16 v0, v125
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_36e
-    .catch Ljava/lang/Throwable; {:try_start_367 .. :try_end_36e} :catch_a94
+    :try_end_373
+    .catch Ljava/lang/Throwable; {:try_start_36c .. :try_end_373} :catch_a99
 
     move-object/from16 v124, v125
 
-    :goto_370
-    :try_start_370
+    :goto_375
+    :try_start_375
     const-string v3, "SystemServer"
 
     const-string v9, "Wi-Fi Service"
@@ -1078,22 +1117,22 @@
     move-object/from16 v0, v123
 
     invoke-direct {v0, v4}, Lcom/android/server/WifiService;-><init>(Landroid/content/Context;)V
-    :try_end_37e
-    .catch Ljava/lang/Throwable; {:try_start_370 .. :try_end_37e} :catch_880
+    :try_end_383
+    .catch Ljava/lang/Throwable; {:try_start_375 .. :try_end_383} :catch_885
 
-    :try_start_37e
+    :try_start_383
     const-string v3, "wifi"
 
     move-object/from16 v0, v123
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_385
-    .catch Ljava/lang/Throwable; {:try_start_37e .. :try_end_385} :catch_a8f
+    :try_end_38a
+    .catch Ljava/lang/Throwable; {:try_start_383 .. :try_end_38a} :catch_a94
 
     move-object/from16 v122, v123
 
-    :goto_387
-    :try_start_387
+    :goto_38c
+    :try_start_38c
     const-string v3, "SystemServer"
 
     const-string v9, "Connectivity Service"
@@ -1105,10 +1144,10 @@
     move-object/from16 v0, v57
 
     invoke-direct {v0, v4, v13, v12, v8}, Lcom/android/server/ConnectivityService;-><init>(Landroid/content/Context;Landroid/os/INetworkManagementService;Landroid/net/INetworkStatsService;Landroid/net/INetworkPolicyManager;)V
-    :try_end_395
-    .catch Ljava/lang/Throwable; {:try_start_387 .. :try_end_395} :catch_88c
+    :try_end_39a
+    .catch Ljava/lang/Throwable; {:try_start_38c .. :try_end_39a} :catch_891
 
-    :try_start_395
+    :try_start_39a
     const-string v3, "connectivity"
 
     move-object/from16 v0, v57
@@ -1126,13 +1165,13 @@
     invoke-virtual/range {v122 .. v122}, Lcom/android/server/WifiService;->checkAndStartWifi()V
 
     invoke-virtual/range {v124 .. v124}, Landroid/net/wifi/p2p/WifiP2pService;->connectivityServiceReady()V
-    :try_end_3ac
-    .catch Ljava/lang/Throwable; {:try_start_395 .. :try_end_3ac} :catch_a8a
+    :try_end_3b1
+    .catch Ljava/lang/Throwable; {:try_start_39a .. :try_end_3b1} :catch_a8f
 
     move-object/from16 v56, v57
 
-    :goto_3ae
-    :try_start_3ae
+    :goto_3b3
+    :try_start_3b3
     const-string v3, "SystemServer"
 
     const-string v9, "Network Service Discovery Service"
@@ -1148,11 +1187,11 @@
     move-object/from16 v0, v105
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_3c0
-    .catch Ljava/lang/Throwable; {:try_start_3ae .. :try_end_3c0} :catch_898
+    :try_end_3c5
+    .catch Ljava/lang/Throwable; {:try_start_3b3 .. :try_end_3c5} :catch_89d
 
-    :goto_3c0
-    :try_start_3c0
+    :goto_3c5
+    :try_start_3c5
     const-string v3, "SystemServer"
 
     const-string v9, "Throttle Service"
@@ -1164,22 +1203,22 @@
     move-object/from16 v0, v110
 
     invoke-direct {v0, v4}, Lcom/android/server/ThrottleService;-><init>(Landroid/content/Context;)V
-    :try_end_3ce
-    .catch Ljava/lang/Throwable; {:try_start_3c0 .. :try_end_3ce} :catch_8a4
+    :try_end_3d3
+    .catch Ljava/lang/Throwable; {:try_start_3c5 .. :try_end_3d3} :catch_8a9
 
-    :try_start_3ce
+    :try_start_3d3
     const-string v3, "throttle"
 
     move-object/from16 v0, v110
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_3d5
-    .catch Ljava/lang/Throwable; {:try_start_3ce .. :try_end_3d5} :catch_a85
+    :try_end_3da
+    .catch Ljava/lang/Throwable; {:try_start_3d3 .. :try_end_3da} :catch_a8a
 
     move-object/from16 v109, v110
 
-    :goto_3d7
-    :try_start_3d7
+    :goto_3dc
+    :try_start_3dc
     const-string v3, "SystemServer"
 
     const-string v9, "UpdateLock Service"
@@ -1193,16 +1232,16 @@
     invoke-direct {v9, v4}, Lcom/android/server/UpdateLockService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_3e8
-    .catch Ljava/lang/Throwable; {:try_start_3d7 .. :try_end_3e8} :catch_8b0
+    :try_end_3ed
+    .catch Ljava/lang/Throwable; {:try_start_3dc .. :try_end_3ed} :catch_8b5
 
-    :goto_3e8
-    if-eqz v84, :cond_3ed
+    :goto_3ed
+    if-eqz v84, :cond_3f2
 
     invoke-virtual/range {v84 .. v84}, Lcom/android/server/MountService;->waitForAsecScan()V
 
-    :cond_3ed
-    :try_start_3ed
+    :cond_3f2
+    :try_start_3f2
     const-string v3, "SystemServer"
 
     const-string v9, "Profile Manager"
@@ -1214,40 +1253,40 @@
     move-object/from16 v0, v96
 
     invoke-direct {v0, v4}, Lcom/android/server/ProfileManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_3fb
-    .catch Ljava/lang/Throwable; {:try_start_3ed .. :try_end_3fb} :catch_8bc
+    :try_end_400
+    .catch Ljava/lang/Throwable; {:try_start_3f2 .. :try_end_400} :catch_8c1
 
-    :try_start_3fb
+    :try_start_400
     const-string v3, "profile"
 
     move-object/from16 v0, v96
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_402
-    .catch Ljava/lang/Throwable; {:try_start_3fb .. :try_end_402} :catch_a80
+    :try_end_407
+    .catch Ljava/lang/Throwable; {:try_start_400 .. :try_end_407} :catch_a85
 
     move-object/from16 v95, v96
 
-    :goto_404
-    if-eqz v42, :cond_409
-
-    :try_start_406
-    invoke-virtual/range {v42 .. v42}, Landroid/accounts/AccountManagerService;->systemReady()V
-    :try_end_409
-    .catch Ljava/lang/Throwable; {:try_start_406 .. :try_end_409} :catch_8c8
-
-    :cond_409
     :goto_409
-    if-eqz v58, :cond_40e
+    if-eqz v42, :cond_40e
 
     :try_start_40b
-    invoke-virtual/range {v58 .. v58}, Landroid/content/ContentService;->systemReady()V
+    invoke-virtual/range {v42 .. v42}, Landroid/accounts/AccountManagerService;->systemReady()V
     :try_end_40e
-    .catch Ljava/lang/Throwable; {:try_start_40b .. :try_end_40e} :catch_8d4
+    .catch Ljava/lang/Throwable; {:try_start_40b .. :try_end_40e} :catch_8cd
 
     :cond_40e
     :goto_40e
-    :try_start_40e
+    if-eqz v58, :cond_413
+
+    :try_start_410
+    invoke-virtual/range {v58 .. v58}, Landroid/content/ContentService;->systemReady()V
+    :try_end_413
+    .catch Ljava/lang/Throwable; {:try_start_410 .. :try_end_413} :catch_8d9
+
+    :cond_413
+    :goto_413
+    :try_start_413
     const-string v3, "SystemServer"
 
     const-string v9, "Notification Manager"
@@ -1263,10 +1302,10 @@
     move-object/from16 v2, v77
 
     invoke-direct {v0, v4, v1, v2}, Lcom/android/server/NotificationManagerService;-><init>(Landroid/content/Context;Lcom/android/server/StatusBarManagerService;Lcom/android/server/LightsService;)V
-    :try_end_420
-    .catch Ljava/lang/Throwable; {:try_start_40e .. :try_end_420} :catch_8e0
+    :try_end_425
+    .catch Ljava/lang/Throwable; {:try_start_413 .. :try_end_425} :catch_8e5
 
-    :try_start_420
+    :try_start_425
     const-string v3, "notification"
 
     move-object/from16 v0, v91
@@ -1276,13 +1315,13 @@
     move-object/from16 v0, v91
 
     invoke-virtual {v8, v0}, Lcom/android/server/net/NetworkPolicyManagerService;->bindNotificationManager(Landroid/app/INotificationManager;)V
-    :try_end_42c
-    .catch Ljava/lang/Throwable; {:try_start_420 .. :try_end_42c} :catch_a7b
+    :try_end_431
+    .catch Ljava/lang/Throwable; {:try_start_425 .. :try_end_431} :catch_a80
 
     move-object/from16 v90, v91
 
-    :goto_42e
-    :try_start_42e
+    :goto_433
+    :try_start_433
     const-string v3, "SystemServer"
 
     const-string v9, "Device Storage Monitor"
@@ -1296,11 +1335,11 @@
     invoke-direct {v9, v4}, Lcom/android/server/DeviceStorageMonitorService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_43f
-    .catch Ljava/lang/Throwable; {:try_start_42e .. :try_end_43f} :catch_8ec
+    :try_end_444
+    .catch Ljava/lang/Throwable; {:try_start_433 .. :try_end_444} :catch_8f1
 
-    :goto_43f
-    :try_start_43f
+    :goto_444
+    :try_start_444
     const-string v3, "SystemServer"
 
     const-string v9, "Location Manager"
@@ -1312,22 +1351,22 @@
     move-object/from16 v0, v80
 
     invoke-direct {v0, v4}, Lcom/android/server/LocationManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_44d
-    .catch Ljava/lang/Throwable; {:try_start_43f .. :try_end_44d} :catch_8f8
+    :try_end_452
+    .catch Ljava/lang/Throwable; {:try_start_444 .. :try_end_452} :catch_8fd
 
-    :try_start_44d
+    :try_start_452
     const-string v3, "location"
 
     move-object/from16 v0, v80
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_454
-    .catch Ljava/lang/Throwable; {:try_start_44d .. :try_end_454} :catch_a76
+    :try_end_459
+    .catch Ljava/lang/Throwable; {:try_start_452 .. :try_end_459} :catch_a7b
 
     move-object/from16 v79, v80
 
-    :goto_456
-    :try_start_456
+    :goto_45b
+    :try_start_45b
     const-string v3, "SystemServer"
 
     const-string v9, "Country Detector"
@@ -1339,22 +1378,22 @@
     move-object/from16 v0, v60
 
     invoke-direct {v0, v4}, Lcom/android/server/CountryDetectorService;-><init>(Landroid/content/Context;)V
-    :try_end_464
-    .catch Ljava/lang/Throwable; {:try_start_456 .. :try_end_464} :catch_904
+    :try_end_469
+    .catch Ljava/lang/Throwable; {:try_start_45b .. :try_end_469} :catch_909
 
-    :try_start_464
+    :try_start_469
     const-string v3, "country_detector"
 
     move-object/from16 v0, v60
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_46b
-    .catch Ljava/lang/Throwable; {:try_start_464 .. :try_end_46b} :catch_a71
+    :try_end_470
+    .catch Ljava/lang/Throwable; {:try_start_469 .. :try_end_470} :catch_a76
 
     move-object/from16 v59, v60
 
-    :goto_46d
-    :try_start_46d
+    :goto_472
+    :try_start_472
     const-string v3, "SystemServer"
 
     const-string v9, "Search Service"
@@ -1368,11 +1407,11 @@
     invoke-direct {v9, v4}, Landroid/server/search/SearchManagerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_47e
-    .catch Ljava/lang/Throwable; {:try_start_46d .. :try_end_47e} :catch_910
+    :try_end_483
+    .catch Ljava/lang/Throwable; {:try_start_472 .. :try_end_483} :catch_915
 
-    :goto_47e
-    :try_start_47e
+    :goto_483
+    :try_start_483
     const-string v3, "SystemServer"
 
     const-string v9, "DropBox Service"
@@ -1392,10 +1431,10 @@
     invoke-direct {v9, v4, v10}, Lcom/android/server/DropBoxManagerService;-><init>(Landroid/content/Context;Ljava/io/File;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_496
-    .catch Ljava/lang/Throwable; {:try_start_47e .. :try_end_496} :catch_91c
+    :try_end_49b
+    .catch Ljava/lang/Throwable; {:try_start_483 .. :try_end_49b} :catch_921
 
-    :goto_496
+    :goto_49b
     invoke-virtual {v4}, Landroid/content/Context;->getResources()Landroid/content/res/Resources;
 
     move-result-object v3
@@ -1406,38 +1445,38 @@
 
     move-result v3
 
-    if-eqz v3, :cond_4bc
+    if-eqz v3, :cond_4c1
 
-    :try_start_4a3
+    :try_start_4a8
     const-string v3, "SystemServer"
 
     const-string v9, "Wallpaper Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    if-nez v16, :cond_4bc
+    if-nez v16, :cond_4c1
 
     new-instance v121, Lcom/android/server/WallpaperManagerService;
 
     move-object/from16 v0, v121
 
     invoke-direct {v0, v4}, Lcom/android/server/WallpaperManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_4b3
-    .catch Ljava/lang/Throwable; {:try_start_4a3 .. :try_end_4b3} :catch_928
+    :try_end_4b8
+    .catch Ljava/lang/Throwable; {:try_start_4a8 .. :try_end_4b8} :catch_92d
 
-    :try_start_4b3
+    :try_start_4b8
     const-string v3, "wallpaper"
 
     move-object/from16 v0, v121
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_4ba
-    .catch Ljava/lang/Throwable; {:try_start_4b3 .. :try_end_4ba} :catch_a6c
+    :try_end_4bf
+    .catch Ljava/lang/Throwable; {:try_start_4b8 .. :try_end_4bf} :catch_a71
 
     move-object/from16 v120, v121
 
-    :cond_4bc
-    :goto_4bc
+    :cond_4c1
+    :goto_4c1
     const-string v3, "0"
 
     const-string v9, "system_init.startaudioservice"
@@ -1450,9 +1489,9 @@
 
     move-result v3
 
-    if-nez v3, :cond_4db
+    if-nez v3, :cond_4e0
 
-    :try_start_4ca
+    :try_start_4cf
     const-string v3, "SystemServer"
 
     const-string v9, "Audio Service"
@@ -1466,12 +1505,12 @@
     invoke-direct {v9, v4}, Landroid/media/AudioService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_4db
-    .catch Ljava/lang/Throwable; {:try_start_4ca .. :try_end_4db} :catch_934
+    :try_end_4e0
+    .catch Ljava/lang/Throwable; {:try_start_4cf .. :try_end_4e0} :catch_939
 
-    :cond_4db
-    :goto_4db
-    :try_start_4db
+    :cond_4e0
+    :goto_4e0
+    :try_start_4e0
     const-string v3, "SystemServer"
 
     const-string v9, "Dock Observer"
@@ -1483,15 +1522,15 @@
     move-object/from16 v0, v65
 
     invoke-direct {v0, v4, v6}, Lcom/android/server/DockObserver;-><init>(Landroid/content/Context;Lcom/android/server/PowerManagerService;)V
-    :try_end_4e9
-    .catch Ljava/lang/Throwable; {:try_start_4db .. :try_end_4e9} :catch_940
+    :try_end_4ee
+    .catch Ljava/lang/Throwable; {:try_start_4e0 .. :try_end_4ee} :catch_945
 
     move-object/from16 v64, v65
 
-    :goto_4eb
-    if-eqz v73, :cond_4fd
+    :goto_4f0
+    if-eqz v73, :cond_502
 
-    :try_start_4ed
+    :try_start_4f2
     const-string v3, "SystemServer"
 
     const-string v9, "Rotation Switch Observer"
@@ -1503,14 +1542,14 @@
     move-object/from16 v0, v102
 
     invoke-direct {v0, v4}, Lcom/android/server/RotationSwitchObserver;-><init>(Landroid/content/Context;)V
-    :try_end_4fb
-    .catch Ljava/lang/Throwable; {:try_start_4ed .. :try_end_4fb} :catch_94c
+    :try_end_500
+    .catch Ljava/lang/Throwable; {:try_start_4f2 .. :try_end_500} :catch_951
 
     move-object/from16 v101, v102
 
-    :cond_4fd
-    :goto_4fd
-    :try_start_4fd
+    :cond_502
+    :goto_502
+    :try_start_502
     const-string v3, "SystemServer"
 
     const-string v9, "Wired Accessory Observer"
@@ -1520,11 +1559,11 @@
     new-instance v3, Lcom/android/server/WiredAccessoryObserver;
 
     invoke-direct {v3, v4}, Lcom/android/server/WiredAccessoryObserver;-><init>(Landroid/content/Context;)V
-    :try_end_509
-    .catch Ljava/lang/Throwable; {:try_start_4fd .. :try_end_509} :catch_958
+    :try_end_50e
+    .catch Ljava/lang/Throwable; {:try_start_502 .. :try_end_50e} :catch_95d
 
-    :goto_509
-    :try_start_509
+    :goto_50e
+    :try_start_50e
     const-string v3, "SystemServer"
 
     const-string v9, "USB Service"
@@ -1536,22 +1575,22 @@
     move-object/from16 v0, v116
 
     invoke-direct {v0, v4}, Lcom/android/server/usb/UsbService;-><init>(Landroid/content/Context;)V
-    :try_end_517
-    .catch Ljava/lang/Throwable; {:try_start_509 .. :try_end_517} :catch_964
+    :try_end_51c
+    .catch Ljava/lang/Throwable; {:try_start_50e .. :try_end_51c} :catch_969
 
-    :try_start_517
+    :try_start_51c
     const-string v3, "usb"
 
     move-object/from16 v0, v116
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_51e
-    .catch Ljava/lang/Throwable; {:try_start_517 .. :try_end_51e} :catch_a67
+    :try_end_523
+    .catch Ljava/lang/Throwable; {:try_start_51c .. :try_end_523} :catch_a6c
 
     move-object/from16 v115, v116
 
-    :goto_520
-    :try_start_520
+    :goto_525
+    :try_start_525
     const-string v3, "SystemServer"
 
     const-string v9, "Serial Service"
@@ -1563,22 +1602,22 @@
     move-object/from16 v0, v104
 
     invoke-direct {v0, v4}, Lcom/android/server/SerialService;-><init>(Landroid/content/Context;)V
-    :try_end_52e
-    .catch Ljava/lang/Throwable; {:try_start_520 .. :try_end_52e} :catch_970
+    :try_end_533
+    .catch Ljava/lang/Throwable; {:try_start_525 .. :try_end_533} :catch_975
 
-    :try_start_52e
+    :try_start_533
     const-string v3, "serial"
 
     move-object/from16 v0, v104
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_535
-    .catch Ljava/lang/Throwable; {:try_start_52e .. :try_end_535} :catch_a62
+    :try_end_53a
+    .catch Ljava/lang/Throwable; {:try_start_533 .. :try_end_53a} :catch_a67
 
     move-object/from16 v103, v104
 
-    :goto_537
-    :try_start_537
+    :goto_53c
+    :try_start_53c
     const-string v3, "SystemServer"
 
     const-string v9, "UI Mode Manager Service"
@@ -1590,13 +1629,13 @@
     move-object/from16 v0, v114
 
     invoke-direct {v0, v4}, Lcom/android/server/UiModeManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_545
-    .catch Ljava/lang/Throwable; {:try_start_537 .. :try_end_545} :catch_97c
+    :try_end_54a
+    .catch Ljava/lang/Throwable; {:try_start_53c .. :try_end_54a} :catch_981
 
     move-object/from16 v113, v114
 
-    :goto_547
-    :try_start_547
+    :goto_54c
+    :try_start_54c
     const-string v3, "SystemServer"
 
     const-string v9, "Backup Service"
@@ -1610,11 +1649,11 @@
     invoke-direct {v9, v4}, Lcom/android/server/BackupManagerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_558
-    .catch Ljava/lang/Throwable; {:try_start_547 .. :try_end_558} :catch_988
+    :try_end_55d
+    .catch Ljava/lang/Throwable; {:try_start_54c .. :try_end_55d} :catch_98d
 
-    :goto_558
-    :try_start_558
+    :goto_55d
+    :try_start_55d
     const-string v3, "SystemServer"
 
     const-string v9, "AppWidget Service"
@@ -1626,22 +1665,22 @@
     move-object/from16 v0, v46
 
     invoke-direct {v0, v4}, Lcom/android/server/AppWidgetService;-><init>(Landroid/content/Context;)V
-    :try_end_566
-    .catch Ljava/lang/Throwable; {:try_start_558 .. :try_end_566} :catch_994
+    :try_end_56b
+    .catch Ljava/lang/Throwable; {:try_start_55d .. :try_end_56b} :catch_999
 
-    :try_start_566
+    :try_start_56b
     const-string v3, "appwidget"
 
     move-object/from16 v0, v46
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_56d
-    .catch Ljava/lang/Throwable; {:try_start_566 .. :try_end_56d} :catch_a5d
+    :try_end_572
+    .catch Ljava/lang/Throwable; {:try_start_56b .. :try_end_572} :catch_a62
 
     move-object/from16 v45, v46
 
-    :goto_56f
-    :try_start_56f
+    :goto_574
+    :try_start_574
     const-string v3, "SystemServer"
 
     const-string v9, "Recognition Service"
@@ -1653,13 +1692,13 @@
     move-object/from16 v0, v100
 
     invoke-direct {v0, v4}, Lcom/android/server/RecognitionManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_57d
-    .catch Ljava/lang/Throwable; {:try_start_56f .. :try_end_57d} :catch_9a0
+    :try_end_582
+    .catch Ljava/lang/Throwable; {:try_start_574 .. :try_end_582} :catch_9a5
 
     move-object/from16 v99, v100
 
-    :goto_57f
-    :try_start_57f
+    :goto_584
+    :try_start_584
     const-string v3, "SystemServer"
 
     const-string v9, "DiskStats Service"
@@ -1673,11 +1712,11 @@
     invoke-direct {v9, v4}, Lcom/android/server/DiskStatsService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_590
-    .catch Ljava/lang/Throwable; {:try_start_57f .. :try_end_590} :catch_9ac
+    :try_end_595
+    .catch Ljava/lang/Throwable; {:try_start_584 .. :try_end_595} :catch_9b1
 
-    :goto_590
-    :try_start_590
+    :goto_595
+    :try_start_595
     const-string v3, "SystemServer"
 
     const-string v9, "SamplingProfiler Service"
@@ -1691,11 +1730,11 @@
     invoke-direct {v9, v4}, Lcom/android/server/SamplingProfilerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_5a1
-    .catch Ljava/lang/Throwable; {:try_start_590 .. :try_end_5a1} :catch_9b8
+    :try_end_5a6
+    .catch Ljava/lang/Throwable; {:try_start_595 .. :try_end_5a6} :catch_9bd
 
-    :goto_5a1
-    :try_start_5a1
+    :goto_5a6
+    :try_start_5a6
     const-string v3, "SystemServer"
 
     const-string v9, "NetworkTimeUpdateService"
@@ -1707,13 +1746,13 @@
     move-object/from16 v0, v89
 
     invoke-direct {v0, v4}, Lcom/android/server/NetworkTimeUpdateService;-><init>(Landroid/content/Context;)V
-    :try_end_5af
-    .catch Ljava/lang/Throwable; {:try_start_5a1 .. :try_end_5af} :catch_9c4
+    :try_end_5b4
+    .catch Ljava/lang/Throwable; {:try_start_5a6 .. :try_end_5b4} :catch_9c9
 
     move-object/from16 v88, v89
 
-    :goto_5b1
-    :try_start_5b1
+    :goto_5b6
+    :try_start_5b6
     const-string v3, "SystemServer"
 
     const-string v9, "CommonTimeManagementService"
@@ -1725,22 +1764,22 @@
     move-object/from16 v0, v54
 
     invoke-direct {v0, v4}, Lcom/android/server/CommonTimeManagementService;-><init>(Landroid/content/Context;)V
-    :try_end_5bf
-    .catch Ljava/lang/Throwable; {:try_start_5b1 .. :try_end_5bf} :catch_9d0
+    :try_end_5c4
+    .catch Ljava/lang/Throwable; {:try_start_5b6 .. :try_end_5c4} :catch_9d5
 
-    :try_start_5bf
+    :try_start_5c4
     const-string v3, "commontime_management"
 
     move-object/from16 v0, v54
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_5c6
-    .catch Ljava/lang/Throwable; {:try_start_5bf .. :try_end_5c6} :catch_a58
+    :try_end_5cb
+    .catch Ljava/lang/Throwable; {:try_start_5c4 .. :try_end_5cb} :catch_a5d
 
     move-object/from16 v53, v54
 
-    :goto_5c8
-    :try_start_5c8
+    :goto_5cd
+    :try_start_5cd
     const-string v3, "SystemServer"
 
     const-string v9, "CertBlacklister"
@@ -1750,10 +1789,10 @@
     new-instance v3, Lcom/android/server/CertBlacklister;
 
     invoke-direct {v3, v4}, Lcom/android/server/CertBlacklister;-><init>(Landroid/content/Context;)V
-    :try_end_5d4
-    .catch Ljava/lang/Throwable; {:try_start_5c8 .. :try_end_5d4} :catch_9dc
+    :try_end_5d9
+    .catch Ljava/lang/Throwable; {:try_start_5cd .. :try_end_5d9} :catch_9e1
 
-    :goto_5d4
+    :goto_5d9
     invoke-virtual {v4}, Landroid/content/Context;->getResources()Landroid/content/res/Resources;
 
     move-result-object v3
@@ -1764,9 +1803,9 @@
 
     move-result v3
 
-    if-eqz v3, :cond_5f8
+    if-eqz v3, :cond_5fd
 
-    :try_start_5e1
+    :try_start_5e6
     const-string v3, "SystemServer"
 
     const-string v9, "Dreams Service"
@@ -1778,23 +1817,23 @@
     move-object/from16 v0, v67
 
     invoke-direct {v0, v4}, Landroid/service/dreams/DreamManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_5ef
-    .catch Ljava/lang/Throwable; {:try_start_5e1 .. :try_end_5ef} :catch_9e8
+    :try_end_5f4
+    .catch Ljava/lang/Throwable; {:try_start_5e6 .. :try_end_5f4} :catch_9ed
 
-    :try_start_5ef
+    :try_start_5f4
     const-string v3, "dreams"
 
     move-object/from16 v0, v67
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_5f6
-    .catch Ljava/lang/Throwable; {:try_start_5ef .. :try_end_5f6} :catch_a54
+    :try_end_5fb
+    .catch Ljava/lang/Throwable; {:try_start_5f4 .. :try_end_5fb} :catch_a59
 
     move-object/from16 v66, v67
 
-    :cond_5f8
-    :goto_5f8
-    :try_start_5f8
+    :cond_5fd
+    :goto_5fd
+    :try_start_5fd
     const-string v3, "SystemServer"
 
     const-string v9, "AssetRedirectionManager Service"
@@ -1808,10 +1847,10 @@
     invoke-direct {v9, v4}, Lcom/android/server/AssetRedirectionManagerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_609
-    .catch Ljava/lang/Throwable; {:try_start_5f8 .. :try_end_609} :catch_9f4
+    :try_end_60e
+    .catch Ljava/lang/Throwable; {:try_start_5fd .. :try_end_60e} :catch_9f9
 
-    :goto_609
+    :goto_60e
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/ServerThread;->mContentResolver:Landroid/content/ContentResolver;
@@ -1856,7 +1895,7 @@
 
     move-result v29
 
-    if-eqz v29, :cond_a00
+    if-eqz v29, :cond_a05
 
     invoke-static {}, Lcom/android/server/am/ActivityManagerService;->self()Lcom/android/server/am/ActivityManagerService;
 
@@ -1874,38 +1913,38 @@
 
     invoke-virtual {v3}, Ldalvik/system/VMRuntime;->disableJitCompilation()V
 
-    :goto_64a
-    :try_start_64a
-    invoke-virtual/range {v117 .. v117}, Lcom/android/server/VibratorService;->systemReady()V
-    :try_end_64d
-    .catch Ljava/lang/Throwable; {:try_start_64a .. :try_end_64d} :catch_a09
-
-    :goto_64d
-    if-eqz v62, :cond_652
-
+    :goto_64f
     :try_start_64f
-    invoke-virtual/range {v62 .. v62}, Lcom/android/server/DevicePolicyManagerService;->systemReady()V
+    invoke-virtual/range {v117 .. v117}, Lcom/android/server/VibratorService;->systemReady()V
     :try_end_652
-    .catch Ljava/lang/Throwable; {:try_start_64f .. :try_end_652} :catch_a15
+    .catch Ljava/lang/Throwable; {:try_start_64f .. :try_end_652} :catch_a0e
 
-    :cond_652
     :goto_652
-    if-eqz v90, :cond_657
+    if-eqz v62, :cond_657
 
     :try_start_654
-    invoke-virtual/range {v90 .. v90}, Lcom/android/server/NotificationManagerService;->systemReady()V
+    invoke-virtual/range {v62 .. v62}, Lcom/android/server/DevicePolicyManagerService;->systemReady()V
     :try_end_657
-    .catch Ljava/lang/Throwable; {:try_start_654 .. :try_end_657} :catch_a21
+    .catch Ljava/lang/Throwable; {:try_start_654 .. :try_end_657} :catch_a1a
 
     :cond_657
     :goto_657
-    :try_start_657
+    if-eqz v90, :cond_65c
+
+    :try_start_659
+    invoke-virtual/range {v90 .. v90}, Lcom/android/server/NotificationManagerService;->systemReady()V
+    :try_end_65c
+    .catch Ljava/lang/Throwable; {:try_start_659 .. :try_end_65c} :catch_a26
+
+    :cond_65c
+    :goto_65c
+    :try_start_65c
     invoke-virtual/range {v126 .. v126}, Lcom/android/server/wm/WindowManagerService;->systemReady()V
-    :try_end_65a
-    .catch Ljava/lang/Throwable; {:try_start_657 .. :try_end_65a} :catch_a2d
+    :try_end_65f
+    .catch Ljava/lang/Throwable; {:try_start_65c .. :try_end_65f} :catch_a32
 
-    :goto_65a
-    if-eqz v29, :cond_663
+    :goto_65f
+    if-eqz v29, :cond_668
 
     invoke-static {}, Lcom/android/server/am/ActivityManagerService;->self()Lcom/android/server/am/ActivityManagerService;
 
@@ -1913,7 +1952,7 @@
 
     invoke-virtual {v3}, Lcom/android/server/am/ActivityManagerService;->showSafeModeOverlay()V
 
-    :cond_663
+    :cond_668
     invoke-virtual/range {v126 .. v126}, Lcom/android/server/wm/WindowManagerService;->computeNewConfiguration()Landroid/content/res/Configuration;
 
     move-result-object v55
@@ -1950,18 +1989,18 @@
 
     invoke-virtual {v6}, Lcom/android/server/PowerManagerService;->systemReady()V
 
-    :try_start_68b
+    :try_start_690
     invoke-interface/range {v93 .. v93}, Landroid/content/pm/IPackageManager;->systemReady()V
-    :try_end_68e
-    .catch Ljava/lang/Throwable; {:try_start_68b .. :try_end_68e} :catch_a39
+    :try_end_693
+    .catch Ljava/lang/Throwable; {:try_start_690 .. :try_end_693} :catch_a3e
 
-    :goto_68e
-    :try_start_68e
+    :goto_693
+    :try_start_693
     invoke-virtual/range {v81 .. v81}, Lcom/android/internal/widget/LockSettingsService;->systemReady()V
-    :try_end_691
-    .catch Ljava/lang/Throwable; {:try_start_68e .. :try_end_691} :catch_a45
+    :try_end_696
+    .catch Ljava/lang/Throwable; {:try_start_693 .. :try_end_696} :catch_a4a
 
-    :goto_691
+    :goto_696
     new-instance v71, Landroid/content/IntentFilter;
 
     invoke-direct/range {v71 .. v71}, Landroid/content/IntentFilter;-><init>()V
@@ -2074,7 +2113,7 @@
 
     move-result v3
 
-    if-eqz v3, :cond_715
+    if-eqz v3, :cond_71a
 
     const-string v3, "SystemServer"
 
@@ -2082,7 +2121,7 @@
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    :cond_715
+    :cond_71a
     invoke-static {}, Landroid/os/Looper;->loop()V
 
     const-string v3, "SystemServer"
@@ -2093,25 +2132,25 @@
 
     return-void
 
-    :cond_720
+    :cond_725
     const/16 v98, 0x0
 
     goto/16 :goto_38
 
-    :cond_724
+    :cond_729
     const/16 v97, 0x0
 
     goto/16 :goto_4a
 
-    :cond_728
+    :cond_72d
     invoke-static/range {v70 .. v70}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I
 
     move-result v69
 
     goto/16 :goto_63
 
-    :cond_72e
-    :try_start_72e
+    :cond_733
+    :try_start_733
     const-string v3, "1"
 
     move-object/from16 v0, v61
@@ -2132,15 +2171,15 @@
 
     goto/16 :goto_11c
 
-    :cond_743
+    :cond_748
     const/4 v3, 0x0
 
     goto/16 :goto_11f
 
-    :catch_746
+    :catch_74b
     move-exception v68
 
-    :goto_747
+    :goto_74c
     const-string v3, "SystemServer"
 
     const-string v9, "Failure starting Account Manager"
@@ -2148,19 +2187,19 @@
     move-object/from16 v0, v68
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
-    :try_end_750
-    .catch Ljava/lang/RuntimeException; {:try_start_72e .. :try_end_750} :catch_752
+    :try_end_755
+    .catch Ljava/lang/RuntimeException; {:try_start_733 .. :try_end_755} :catch_757
 
     goto/16 :goto_14d
 
-    :catch_752
+    :catch_757
     move-exception v68
 
     move-object/from16 v7, v44
 
     move-object/from16 v5, v47
 
-    :goto_757
+    :goto_75c
     const-string v3, "System"
 
     const-string v9, "******************************************"
@@ -2175,51 +2214,51 @@
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    goto/16 :goto_215
+    goto/16 :goto_21a
 
-    :cond_769
+    :cond_76e
     const/4 v3, 0x0
 
     goto/16 :goto_15a
 
-    :cond_76c
+    :cond_771
     const/4 v3, 0x0
 
     move v9, v3
 
-    goto/16 :goto_1d8
+    goto/16 :goto_1dd
 
-    :cond_770
+    :cond_775
     const/4 v3, 0x0
 
-    goto/16 :goto_1db
+    goto/16 :goto_1e0
 
-    :cond_773
+    :cond_778
     const/4 v3, 0x1
 
     move/from16 v0, v69
 
-    if-ne v0, v3, :cond_787
+    if-ne v0, v3, :cond_78c
 
-    :try_start_778
+    :try_start_77d
     const-string v3, "SystemServer"
 
     const-string v9, "No Bluetooth Service (factory test)"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    goto/16 :goto_211
+    goto/16 :goto_216
 
-    :catch_781
+    :catch_786
     move-exception v68
 
     move-object/from16 v117, v118
 
     move-object/from16 v77, v78
 
-    goto :goto_757
+    goto :goto_75c
 
-    :cond_787
+    :cond_78c
     const-string v3, "SystemServer"
 
     const-string v9, "Bluetooth Service"
@@ -2231,10 +2270,10 @@
     move-object/from16 v0, v49
 
     invoke-direct {v0, v4}, Landroid/server/BluetoothService;-><init>(Landroid/content/Context;)V
-    :try_end_795
-    .catch Ljava/lang/RuntimeException; {:try_start_778 .. :try_end_795} :catch_781
+    :try_end_79a
+    .catch Ljava/lang/RuntimeException; {:try_start_77d .. :try_end_79a} :catch_786
 
-    :try_start_795
+    :try_start_79a
     const-string v3, "bluetooth"
 
     move-object/from16 v0, v49
@@ -2255,7 +2294,7 @@
 
     move-result v3
 
-    if-nez v3, :cond_7c2
+    if-nez v3, :cond_7c7
 
     new-instance v51, Landroid/server/BluetoothA2dpService;
 
@@ -2264,10 +2303,10 @@
     move-object/from16 v1, v49
 
     invoke-direct {v0, v4, v1}, Landroid/server/BluetoothA2dpService;-><init>(Landroid/content/Context;Landroid/server/BluetoothService;)V
-    :try_end_7b6
-    .catch Ljava/lang/RuntimeException; {:try_start_795 .. :try_end_7b6} :catch_aed
+    :try_end_7bb
+    .catch Ljava/lang/RuntimeException; {:try_start_79a .. :try_end_7bb} :catch_af2
 
-    :try_start_7b6
+    :try_start_7bb
     const-string v3, "bluetooth_a2dp"
 
     move-object/from16 v0, v51
@@ -2275,13 +2314,13 @@
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
 
     invoke-virtual/range {v49 .. v49}, Landroid/server/BluetoothService;->initAfterA2dpRegistration()V
-    :try_end_7c0
-    .catch Ljava/lang/RuntimeException; {:try_start_7b6 .. :try_end_7c0} :catch_af6
+    :try_end_7c5
+    .catch Ljava/lang/RuntimeException; {:try_start_7bb .. :try_end_7c5} :catch_afb
 
     move-object/from16 v50, v51
 
-    :cond_7c2
-    :try_start_7c2
+    :cond_7c7
+    :try_start_7c7
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/ServerThread;->mContentResolver:Landroid/content/ContentResolver;
@@ -2294,21 +2333,21 @@
 
     move-result v52
 
-    if-eqz v52, :cond_7d2
+    if-eqz v52, :cond_7d7
 
     invoke-virtual/range {v49 .. v49}, Landroid/server/BluetoothService;->enable()Z
-    :try_end_7d2
-    .catch Ljava/lang/RuntimeException; {:try_start_7c2 .. :try_end_7d2} :catch_aed
+    :try_end_7d7
+    .catch Ljava/lang/RuntimeException; {:try_start_7c7 .. :try_end_7d7} :catch_af2
 
-    :cond_7d2
+    :cond_7d7
     move-object/from16 v48, v49
 
-    goto/16 :goto_211
+    goto/16 :goto_216
 
-    :catch_7d6
+    :catch_7db
     move-exception v68
 
-    :goto_7d7
+    :goto_7dc
     const-string v3, "starting Input Manager Service"
 
     move-object/from16 v0, p0
@@ -2317,9 +2356,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_256
+    goto/16 :goto_25b
 
-    :catch_7e2
+    :catch_7e7
     move-exception v68
 
     const-string v3, "starting Accessibility Manager"
@@ -2330,9 +2369,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_267
+    goto/16 :goto_26c
 
-    :catch_7ee
+    :catch_7f3
     move-exception v68
 
     const-string v3, "making display ready"
@@ -2343,9 +2382,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_26a
+    goto/16 :goto_26f
 
-    :catch_7fa
+    :catch_7ff
     move-exception v68
 
     const-string v3, "performing boot dexopt"
@@ -2356,12 +2395,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_26d
+    goto/16 :goto_272
 
-    :catch_806
+    :catch_80b
     move-exception v68
 
-    :goto_807
+    :goto_80c
     const-string v3, "starting Mount Service"
 
     move-object/from16 v0, p0
@@ -2370,12 +2409,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_2ac
+    goto/16 :goto_2b1
 
-    :catch_812
+    :catch_817
     move-exception v68
 
-    :goto_813
+    :goto_818
     const-string v3, "starting LockSettingsService service"
 
     move-object/from16 v0, p0
@@ -2384,12 +2423,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_2c3
+    goto/16 :goto_2c8
 
-    :catch_81e
+    :catch_823
     move-exception v68
 
-    :goto_81f
+    :goto_824
     const-string v3, "starting DevicePolicyService"
 
     move-object/from16 v0, p0
@@ -2398,12 +2437,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_2da
+    goto/16 :goto_2df
 
-    :catch_82a
+    :catch_82f
     move-exception v68
 
-    :goto_82b
+    :goto_830
     const-string v3, "starting StatusBarManagerService"
 
     move-object/from16 v0, p0
@@ -2412,9 +2451,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_2f3
+    goto/16 :goto_2f8
 
-    :catch_836
+    :catch_83b
     move-exception v68
 
     const-string v3, "starting Clipboard Service"
@@ -2425,9 +2464,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_304
+    goto/16 :goto_309
 
-    :catch_842
+    :catch_847
     move-exception v68
 
     const-string v3, "starting NetworkManagement Service"
@@ -2438,12 +2477,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_314
+    goto/16 :goto_319
 
-    :catch_84e
+    :catch_853
     move-exception v68
 
-    :goto_84f
+    :goto_854
     const-string v3, "starting Text Service Manager Service"
 
     move-object/from16 v0, p0
@@ -2452,12 +2491,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_32b
+    goto/16 :goto_330
 
-    :catch_85a
+    :catch_85f
     move-exception v68
 
-    :goto_85b
+    :goto_860
     const-string v3, "starting NetworkStats Service"
 
     move-object/from16 v0, p0
@@ -2466,14 +2505,14 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_342
+    goto/16 :goto_347
 
-    :catch_866
+    :catch_86b
     move-exception v68
 
     move-object/from16 v8, v86
 
-    :goto_869
+    :goto_86e
     const-string v3, "starting NetworkPolicy Service"
 
     move-object/from16 v0, p0
@@ -2482,12 +2521,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_359
+    goto/16 :goto_35e
 
-    :catch_874
+    :catch_879
     move-exception v68
 
-    :goto_875
+    :goto_87a
     const-string v3, "starting Wi-Fi P2pService"
 
     move-object/from16 v0, p0
@@ -2496,12 +2535,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_370
+    goto/16 :goto_375
 
-    :catch_880
+    :catch_885
     move-exception v68
 
-    :goto_881
+    :goto_886
     const-string v3, "starting Wi-Fi Service"
 
     move-object/from16 v0, p0
@@ -2510,12 +2549,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_387
+    goto/16 :goto_38c
 
-    :catch_88c
+    :catch_891
     move-exception v68
 
-    :goto_88d
+    :goto_892
     const-string v3, "starting Connectivity Service"
 
     move-object/from16 v0, p0
@@ -2524,9 +2563,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_3ae
+    goto/16 :goto_3b3
 
-    :catch_898
+    :catch_89d
     move-exception v68
 
     const-string v3, "starting Service Discovery Service"
@@ -2537,12 +2576,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_3c0
+    goto/16 :goto_3c5
 
-    :catch_8a4
+    :catch_8a9
     move-exception v68
 
-    :goto_8a5
+    :goto_8aa
     const-string v3, "starting ThrottleService"
 
     move-object/from16 v0, p0
@@ -2551,9 +2590,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_3d7
+    goto/16 :goto_3dc
 
-    :catch_8b0
+    :catch_8b5
     move-exception v68
 
     const-string v3, "starting UpdateLockService"
@@ -2564,12 +2603,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_3e8
+    goto/16 :goto_3ed
 
-    :catch_8bc
+    :catch_8c1
     move-exception v68
 
-    :goto_8bd
+    :goto_8c2
     const-string v3, "SystemServer"
 
     const-string v9, "Failure starting Profile Manager"
@@ -2578,9 +2617,9 @@
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    goto/16 :goto_404
+    goto/16 :goto_409
 
-    :catch_8c8
+    :catch_8cd
     move-exception v68
 
     const-string v3, "making Account Manager Service ready"
@@ -2591,9 +2630,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_409
+    goto/16 :goto_40e
 
-    :catch_8d4
+    :catch_8d9
     move-exception v68
 
     const-string v3, "making Content Service ready"
@@ -2604,12 +2643,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_40e
+    goto/16 :goto_413
 
-    :catch_8e0
+    :catch_8e5
     move-exception v68
 
-    :goto_8e1
+    :goto_8e6
     const-string v3, "starting Notification Manager"
 
     move-object/from16 v0, p0
@@ -2618,9 +2657,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_42e
+    goto/16 :goto_433
 
-    :catch_8ec
+    :catch_8f1
     move-exception v68
 
     const-string v3, "starting DeviceStorageMonitor service"
@@ -2631,12 +2670,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_43f
+    goto/16 :goto_444
 
-    :catch_8f8
+    :catch_8fd
     move-exception v68
 
-    :goto_8f9
+    :goto_8fe
     const-string v3, "starting Location Manager"
 
     move-object/from16 v0, p0
@@ -2645,12 +2684,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_456
+    goto/16 :goto_45b
 
-    :catch_904
+    :catch_909
     move-exception v68
 
-    :goto_905
+    :goto_90a
     const-string v3, "starting Country Detector"
 
     move-object/from16 v0, p0
@@ -2659,9 +2698,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_46d
+    goto/16 :goto_472
 
-    :catch_910
+    :catch_915
     move-exception v68
 
     const-string v3, "starting Search Service"
@@ -2672,9 +2711,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_47e
+    goto/16 :goto_483
 
-    :catch_91c
+    :catch_921
     move-exception v68
 
     const-string v3, "starting DropBoxManagerService"
@@ -2685,12 +2724,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_496
+    goto/16 :goto_49b
 
-    :catch_928
+    :catch_92d
     move-exception v68
 
-    :goto_929
+    :goto_92e
     const-string v3, "starting Wallpaper Service"
 
     move-object/from16 v0, p0
@@ -2699,9 +2738,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_4bc
+    goto/16 :goto_4c1
 
-    :catch_934
+    :catch_939
     move-exception v68
 
     const-string v3, "starting Audio Service"
@@ -2712,9 +2751,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_4db
+    goto/16 :goto_4e0
 
-    :catch_940
+    :catch_945
     move-exception v68
 
     const-string v3, "starting DockObserver"
@@ -2725,9 +2764,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_4eb
+    goto/16 :goto_4f0
 
-    :catch_94c
+    :catch_951
     move-exception v68
 
     const-string v3, "starting RotationSwitchObserver"
@@ -2738,9 +2777,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_4fd
+    goto/16 :goto_502
 
-    :catch_958
+    :catch_95d
     move-exception v68
 
     const-string v3, "starting WiredAccessoryObserver"
@@ -2751,12 +2790,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_509
+    goto/16 :goto_50e
 
-    :catch_964
+    :catch_969
     move-exception v68
 
-    :goto_965
+    :goto_96a
     const-string v3, "starting UsbService"
 
     move-object/from16 v0, p0
@@ -2765,12 +2804,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_520
+    goto/16 :goto_525
 
-    :catch_970
+    :catch_975
     move-exception v68
 
-    :goto_971
+    :goto_976
     const-string v3, "SystemServer"
 
     const-string v9, "Failure starting SerialService"
@@ -2779,9 +2818,9 @@
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    goto/16 :goto_537
+    goto/16 :goto_53c
 
-    :catch_97c
+    :catch_981
     move-exception v68
 
     const-string v3, "starting UiModeManagerService"
@@ -2792,9 +2831,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_547
+    goto/16 :goto_54c
 
-    :catch_988
+    :catch_98d
     move-exception v68
 
     const-string v3, "SystemServer"
@@ -2805,12 +2844,12 @@
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    goto/16 :goto_558
+    goto/16 :goto_55d
 
-    :catch_994
+    :catch_999
     move-exception v68
 
-    :goto_995
+    :goto_99a
     const-string v3, "starting AppWidget Service"
 
     move-object/from16 v0, p0
@@ -2819,9 +2858,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_56f
+    goto/16 :goto_574
 
-    :catch_9a0
+    :catch_9a5
     move-exception v68
 
     const-string v3, "starting Recognition Service"
@@ -2832,9 +2871,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_57f
+    goto/16 :goto_584
 
-    :catch_9ac
+    :catch_9b1
     move-exception v68
 
     const-string v3, "starting DiskStats Service"
@@ -2845,9 +2884,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_590
+    goto/16 :goto_595
 
-    :catch_9b8
+    :catch_9bd
     move-exception v68
 
     const-string v3, "starting SamplingProfiler Service"
@@ -2858,9 +2897,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_5a1
+    goto/16 :goto_5a6
 
-    :catch_9c4
+    :catch_9c9
     move-exception v68
 
     const-string v3, "starting NetworkTimeUpdate service"
@@ -2871,12 +2910,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_5b1
+    goto/16 :goto_5b6
 
-    :catch_9d0
+    :catch_9d5
     move-exception v68
 
-    :goto_9d1
+    :goto_9d6
     const-string v3, "starting CommonTimeManagementService service"
 
     move-object/from16 v0, p0
@@ -2885,9 +2924,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_5c8
+    goto/16 :goto_5cd
 
-    :catch_9dc
+    :catch_9e1
     move-exception v68
 
     const-string v3, "starting CertBlacklister"
@@ -2898,12 +2937,12 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_5d4
+    goto/16 :goto_5d9
 
-    :catch_9e8
+    :catch_9ed
     move-exception v68
 
-    :goto_9e9
+    :goto_9ee
     const-string v3, "starting DreamManagerService"
 
     move-object/from16 v0, p0
@@ -2912,9 +2951,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_5f8
+    goto/16 :goto_5fd
 
-    :catch_9f4
+    :catch_9f9
     move-exception v68
 
     const-string v3, "SystemServer"
@@ -2925,18 +2964,18 @@
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    goto/16 :goto_609
+    goto/16 :goto_60e
 
-    :cond_a00
+    :cond_a05
     invoke-static {}, Ldalvik/system/VMRuntime;->getRuntime()Ldalvik/system/VMRuntime;
 
     move-result-object v3
 
     invoke-virtual {v3}, Ldalvik/system/VMRuntime;->startJitCompilation()V
 
-    goto/16 :goto_64a
+    goto/16 :goto_64f
 
-    :catch_a09
+    :catch_a0e
     move-exception v68
 
     const-string v3, "making Vibrator Service ready"
@@ -2947,9 +2986,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_64d
+    goto/16 :goto_652
 
-    :catch_a15
+    :catch_a1a
     move-exception v68
 
     const-string v3, "making Device Policy Service ready"
@@ -2960,9 +2999,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_652
+    goto/16 :goto_657
 
-    :catch_a21
+    :catch_a26
     move-exception v68
 
     const-string v3, "making Notification Service ready"
@@ -2973,9 +3012,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_657
+    goto/16 :goto_65c
 
-    :catch_a2d
+    :catch_a32
     move-exception v68
 
     const-string v3, "making Window Manager Service ready"
@@ -2986,9 +3025,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_65a
+    goto/16 :goto_65f
 
-    :catch_a39
+    :catch_a3e
     move-exception v68
 
     const-string v3, "making Package Manager Service ready"
@@ -2999,9 +3038,9 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_68e
+    goto/16 :goto_693
 
-    :catch_a45
+    :catch_a4a
     move-exception v68
 
     const-string v3, "making Lock Settings Service ready"
@@ -3012,171 +3051,171 @@
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_691
+    goto/16 :goto_696
 
-    :catch_a51
+    :catch_a56
     move-exception v3
 
     goto/16 :goto_12b
 
-    :catch_a54
+    :catch_a59
     move-exception v68
 
     move-object/from16 v66, v67
 
-    goto :goto_9e9
+    goto :goto_9ee
 
-    :catch_a58
+    :catch_a5d
     move-exception v68
 
     move-object/from16 v53, v54
 
-    goto/16 :goto_9d1
+    goto/16 :goto_9d6
 
-    :catch_a5d
+    :catch_a62
     move-exception v68
 
     move-object/from16 v45, v46
 
-    goto/16 :goto_995
+    goto/16 :goto_99a
 
-    :catch_a62
+    :catch_a67
     move-exception v68
 
     move-object/from16 v103, v104
 
-    goto/16 :goto_971
+    goto/16 :goto_976
 
-    :catch_a67
+    :catch_a6c
     move-exception v68
 
     move-object/from16 v115, v116
 
-    goto/16 :goto_965
+    goto/16 :goto_96a
 
-    :catch_a6c
+    :catch_a71
     move-exception v68
 
     move-object/from16 v120, v121
 
-    goto/16 :goto_929
+    goto/16 :goto_92e
 
-    :catch_a71
+    :catch_a76
     move-exception v68
 
     move-object/from16 v59, v60
 
-    goto/16 :goto_905
+    goto/16 :goto_90a
 
-    :catch_a76
+    :catch_a7b
     move-exception v68
 
     move-object/from16 v79, v80
 
-    goto/16 :goto_8f9
+    goto/16 :goto_8fe
 
-    :catch_a7b
+    :catch_a80
     move-exception v68
 
     move-object/from16 v90, v91
 
-    goto/16 :goto_8e1
+    goto/16 :goto_8e6
 
-    :catch_a80
+    :catch_a85
     move-exception v68
 
     move-object/from16 v95, v96
 
-    goto/16 :goto_8bd
+    goto/16 :goto_8c2
 
-    :catch_a85
+    :catch_a8a
     move-exception v68
 
     move-object/from16 v109, v110
 
-    goto/16 :goto_8a5
+    goto/16 :goto_8aa
 
-    :catch_a8a
+    :catch_a8f
     move-exception v68
 
     move-object/from16 v56, v57
 
-    goto/16 :goto_88d
+    goto/16 :goto_892
 
-    :catch_a8f
+    :catch_a94
     move-exception v68
 
     move-object/from16 v122, v123
 
-    goto/16 :goto_881
+    goto/16 :goto_886
 
-    :catch_a94
+    :catch_a99
     move-exception v68
 
     move-object/from16 v124, v125
 
-    goto/16 :goto_875
+    goto/16 :goto_87a
 
-    :catch_a99
+    :catch_a9e
     move-exception v68
 
-    goto/16 :goto_869
+    goto/16 :goto_86e
 
-    :catch_a9c
+    :catch_aa1
     move-exception v68
 
     move-object/from16 v12, v87
 
-    goto/16 :goto_85b
+    goto/16 :goto_860
 
-    :catch_aa1
+    :catch_aa6
     move-exception v68
 
     move-object/from16 v111, v112
 
-    goto/16 :goto_84f
+    goto/16 :goto_854
 
-    :catch_aa6
+    :catch_aab
     move-exception v68
 
     move-object/from16 v107, v108
 
-    goto/16 :goto_82b
+    goto/16 :goto_830
 
-    :catch_aab
+    :catch_ab0
     move-exception v68
 
     move-object/from16 v62, v63
 
-    goto/16 :goto_81f
+    goto/16 :goto_824
 
-    :catch_ab0
+    :catch_ab5
     move-exception v68
 
     move-object/from16 v81, v82
 
-    goto/16 :goto_813
+    goto/16 :goto_818
 
-    :catch_ab5
+    :catch_aba
     move-exception v68
 
     move-object/from16 v84, v85
 
-    goto/16 :goto_807
+    goto/16 :goto_80c
 
-    :catch_aba
+    :catch_abf
     move-exception v3
 
-    goto/16 :goto_280
+    goto/16 :goto_285
 
-    :catch_abd
+    :catch_ac2
     move-exception v68
 
     move-object/from16 v74, v75
 
-    goto/16 :goto_7d7
+    goto/16 :goto_7dc
 
-    :catch_ac2
+    :catch_ac7
     move-exception v68
 
     move-object/from16 v7, v44
@@ -3185,9 +3224,9 @@
 
     move-object/from16 v6, v94
 
-    goto/16 :goto_757
+    goto/16 :goto_75c
 
-    :catch_acb
+    :catch_ad0
     move-exception v68
 
     move-object/from16 v7, v44
@@ -3196,9 +3235,9 @@
 
     move-object/from16 v42, v43
 
-    goto/16 :goto_757
+    goto/16 :goto_75c
 
-    :catch_ad4
+    :catch_ad9
     move-exception v68
 
     move-object/from16 v7, v44
@@ -3207,18 +3246,18 @@
 
     move-object/from16 v77, v78
 
-    goto/16 :goto_757
+    goto/16 :goto_75c
 
-    :catch_add
+    :catch_ae2
     move-exception v68
 
     move-object/from16 v7, v44
 
     move-object/from16 v77, v78
 
-    goto/16 :goto_757
+    goto/16 :goto_75c
 
-    :catch_ae4
+    :catch_ae9
     move-exception v68
 
     move-object/from16 v7, v44
@@ -3227,9 +3266,9 @@
 
     move-object/from16 v77, v78
 
-    goto/16 :goto_757
+    goto/16 :goto_75c
 
-    :catch_aed
+    :catch_af2
     move-exception v68
 
     move-object/from16 v48, v49
@@ -3238,9 +3277,9 @@
 
     move-object/from16 v77, v78
 
-    goto/16 :goto_757
+    goto/16 :goto_75c
 
-    :catch_af6
+    :catch_afb
     move-exception v68
 
     move-object/from16 v50, v51
@@ -3251,17 +3290,17 @@
 
     move-object/from16 v77, v78
 
-    goto/16 :goto_757
+    goto/16 :goto_75c
 
-    :catch_b01
+    :catch_b06
     move-exception v68
 
     move-object/from16 v42, v43
 
-    goto/16 :goto_747
+    goto/16 :goto_74c
 
-    :cond_b06
+    :cond_b0b
     move-object/from16 v8, v86
 
-    goto/16 :goto_609
+    goto/16 :goto_60e
 .end method
diff -Npru stock-services/smali/com/android/server/TelephonyRegistry$1.smali ext-services/smali/com/android/server/TelephonyRegistry$1.smali
--- stock-services/smali/com/android/server/TelephonyRegistry$1.smali	2012-11-06 15:04:28.114608270 -0600
+++ ext-services/smali/com/android/server/TelephonyRegistry$1.smali	1969-12-31 18:00:00.000000000 -0600
@@ -1,14 +0,0 @@
-.class synthetic Lcom/android/server/TelephonyRegistry$1;
-.super Ljava/lang/Object;
-.source "TelephonyRegistry.java"
-
-
-# annotations
-.annotation system Ldalvik/annotation/EnclosingClass;
-    value = Lcom/android/server/TelephonyRegistry;
-.end annotation
-
-.annotation system Ldalvik/annotation/InnerClass;
-    accessFlags = 0x1008
-    name = null
-.end annotation
diff -Npru stock-services/smali/com/android/server/TelephonyRegistry$Record.smali ext-services/smali/com/android/server/TelephonyRegistry$Record.smali
--- stock-services/smali/com/android/server/TelephonyRegistry$Record.smali	2012-11-06 15:04:28.118608295 -0600
+++ ext-services/smali/com/android/server/TelephonyRegistry$Record.smali	2012-11-06 15:04:19.350564817 -0600
@@ -1,4 +1,4 @@
-.class Lcom/android/server/TelephonyRegistry$Record;
+.class public Lcom/android/server/TelephonyRegistry$Record;
 .super Ljava/lang/Object;
 .source "TelephonyRegistry.java"
 
@@ -9,7 +9,7 @@
 .end annotation
 
 .annotation system Ldalvik/annotation/InnerClass;
-    accessFlags = 0xa
+    accessFlags = 0x9
     name = "Record"
 .end annotation
 
@@ -25,18 +25,10 @@
 
 
 # direct methods
-.method private constructor <init>()V
+.method public constructor <init>()V
     .registers 1
 
     invoke-direct {p0}, Ljava/lang/Object;-><init>()V
 
     return-void
 .end method
-
-.method synthetic constructor <init>(Lcom/android/server/TelephonyRegistry$1;)V
-    .registers 2
-
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry$Record;-><init>()V
-
-    return-void
-.end method
diff -Npru stock-services/smali/com/android/server/TelephonyRegistry.smali ext-services/smali/com/android/server/TelephonyRegistry.smali
--- stock-services/smali/com/android/server/TelephonyRegistry.smali	2012-11-06 15:04:28.142608414 -0600
+++ ext-services/smali/com/android/server/TelephonyRegistry.smali	2012-11-06 15:04:19.178563960 -0600
@@ -6,7 +6,6 @@
 # annotations
 .annotation system Ldalvik/annotation/MemberClasses;
     value = {
-        Lcom/android/server/TelephonyRegistry$1;,
         Lcom/android/server/TelephonyRegistry$Record;
     }
 .end annotation
@@ -23,15 +22,15 @@
 # instance fields
 .field private final mBatteryStats:Lcom/android/internal/app/IBatteryStats;
 
-.field private mCallForwarding:Z
+.field protected mCallForwarding:Z
 
-.field private mCallIncomingNumber:Ljava/lang/String;
+.field protected mCallIncomingNumber:Ljava/lang/String;
 
-.field private mCallState:I
+.field protected mCallState:I
 
-.field private mCellInfo:Landroid/telephony/CellInfo;
+.field protected mCellInfo:Landroid/telephony/CellInfo;
 
-.field private mCellLocation:Landroid/os/Bundle;
+.field protected mCellLocation:Landroid/os/Bundle;
 
 .field private mConnectedApns:Ljava/util/ArrayList;
     .annotation system Ldalvik/annotation/Signature;
@@ -44,9 +43,9 @@
     .end annotation
 .end field
 
-.field private final mContext:Landroid/content/Context;
+.field protected final mContext:Landroid/content/Context;
 
-.field private mDataActivity:I
+.field protected mDataActivity:I
 
 .field private mDataConnectionApn:Ljava/lang/String;
 
@@ -54,19 +53,19 @@
 
 .field private mDataConnectionLinkProperties:Landroid/net/LinkProperties;
 
-.field private mDataConnectionNetworkType:I
+.field protected mDataConnectionNetworkType:I
 
 .field private mDataConnectionPossible:Z
 
 .field private mDataConnectionReason:Ljava/lang/String;
 
-.field private mDataConnectionState:I
+.field protected mDataConnectionState:I
 
-.field private mMessageWaiting:Z
+.field protected mMessageWaiting:Z
 
-.field private mOtaspMode:I
+.field protected mOtaspMode:I
 
-.field private final mRecords:Ljava/util/ArrayList;
+.field protected final mRecords:Ljava/util/ArrayList;
     .annotation system Ldalvik/annotation/Signature;
         value = {
             "Ljava/util/ArrayList",
@@ -77,7 +76,7 @@
     .end annotation
 .end field
 
-.field private final mRemoveList:Ljava/util/ArrayList;
+.field protected final mRemoveList:Ljava/util/ArrayList;
     .annotation system Ldalvik/annotation/Signature;
         value = {
             "Ljava/util/ArrayList",
@@ -88,13 +87,13 @@
     .end annotation
 .end field
 
-.field private mServiceState:Landroid/telephony/ServiceState;
+.field protected mServiceState:Landroid/telephony/ServiceState;
 
-.field private mSignalStrength:Landroid/telephony/SignalStrength;
+.field protected mSignalStrength:Landroid/telephony/SignalStrength;
 
 
 # direct methods
-.method constructor <init>(Landroid/content/Context;)V
+.method protected constructor <init>(Landroid/content/Context;)V
     .registers 5
 
     const/4 v2, 0x0
@@ -381,8 +380,8 @@
     return-void
 .end method
 
-.method private broadcastServiceStateChanged(Landroid/telephony/ServiceState;)V
-    .registers 8
+.method private broadcastSignalStrengthChanged(Landroid/telephony/SignalStrength;)V
+    .registers 7
 
     invoke-static {}, Landroid/os/Binder;->clearCallingIdentity()J
 
@@ -391,29 +390,29 @@
     :try_start_4
     iget-object v4, p0, Lcom/android/server/TelephonyRegistry;->mBatteryStats:Lcom/android/internal/app/IBatteryStats;
 
-    invoke-virtual {p1}, Landroid/telephony/ServiceState;->getState()I
-
-    move-result v5
-
-    invoke-interface {v4, v5}, Lcom/android/internal/app/IBatteryStats;->notePhoneState(I)V
-    :try_end_d
-    .catchall {:try_start_4 .. :try_end_d} :catchall_28
-    .catch Landroid/os/RemoteException; {:try_start_4 .. :try_end_d} :catch_2d
+    invoke-interface {v4, p1}, Lcom/android/internal/app/IBatteryStats;->notePhoneSignalStrength(Landroid/telephony/SignalStrength;)V
+    :try_end_9
+    .catchall {:try_start_4 .. :try_end_9} :catchall_29
+    .catch Landroid/os/RemoteException; {:try_start_4 .. :try_end_9} :catch_2e
 
-    :goto_d
+    :goto_9
     invoke-static {v1, v2}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     new-instance v3, Landroid/content/Intent;
 
-    const-string v4, "android.intent.action.SERVICE_STATE"
+    const-string v4, "android.intent.action.SIG_STR"
 
     invoke-direct {v3, v4}, Landroid/content/Intent;-><init>(Ljava/lang/String;)V
 
+    const/high16 v4, 0x2000
+
+    invoke-virtual {v3, v4}, Landroid/content/Intent;->addFlags(I)Landroid/content/Intent;
+
     new-instance v0, Landroid/os/Bundle;
 
     invoke-direct {v0}, Landroid/os/Bundle;-><init>()V
 
-    invoke-virtual {p1, v0}, Landroid/telephony/ServiceState;->fillInNotifierBundle(Landroid/os/Bundle;)V
+    invoke-virtual {p1, v0}, Landroid/telephony/SignalStrength;->fillInNotifierBundle(Landroid/os/Bundle;)V
 
     invoke-virtual {v3, v0}, Landroid/content/Intent;->putExtras(Landroid/os/Bundle;)Landroid/content/Intent;
 
@@ -423,21 +422,23 @@
 
     return-void
 
-    :catchall_28
+    :catchall_29
     move-exception v4
 
     invoke-static {v1, v2}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     throw v4
 
-    :catch_2d
+    :catch_2e
     move-exception v4
 
-    goto :goto_d
+    goto :goto_9
 .end method
 
-.method private broadcastSignalStrengthChanged(Landroid/telephony/SignalStrength;)V
-    .registers 7
+
+# virtual methods
+.method protected broadcastServiceStateChanged(Landroid/telephony/ServiceState;)V
+    .registers 8
 
     invoke-static {}, Landroid/os/Binder;->clearCallingIdentity()J
 
@@ -446,29 +447,29 @@
     :try_start_4
     iget-object v4, p0, Lcom/android/server/TelephonyRegistry;->mBatteryStats:Lcom/android/internal/app/IBatteryStats;
 
-    invoke-interface {v4, p1}, Lcom/android/internal/app/IBatteryStats;->notePhoneSignalStrength(Landroid/telephony/SignalStrength;)V
-    :try_end_9
-    .catchall {:try_start_4 .. :try_end_9} :catchall_29
-    .catch Landroid/os/RemoteException; {:try_start_4 .. :try_end_9} :catch_2e
+    invoke-virtual {p1}, Landroid/telephony/ServiceState;->getState()I
 
-    :goto_9
+    move-result v5
+
+    invoke-interface {v4, v5}, Lcom/android/internal/app/IBatteryStats;->notePhoneState(I)V
+    :try_end_d
+    .catchall {:try_start_4 .. :try_end_d} :catchall_28
+    .catch Landroid/os/RemoteException; {:try_start_4 .. :try_end_d} :catch_2d
+
+    :goto_d
     invoke-static {v1, v2}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     new-instance v3, Landroid/content/Intent;
 
-    const-string v4, "android.intent.action.SIG_STR"
+    const-string v4, "android.intent.action.SERVICE_STATE"
 
     invoke-direct {v3, v4}, Landroid/content/Intent;-><init>(Ljava/lang/String;)V
 
-    const/high16 v4, 0x2000
-
-    invoke-virtual {v3, v4}, Landroid/content/Intent;->addFlags(I)Landroid/content/Intent;
-
     new-instance v0, Landroid/os/Bundle;
 
     invoke-direct {v0}, Landroid/os/Bundle;-><init>()V
 
-    invoke-virtual {p1, v0}, Landroid/telephony/SignalStrength;->fillInNotifierBundle(Landroid/os/Bundle;)V
+    invoke-virtual {p1, v0}, Landroid/telephony/ServiceState;->fillInNotifierBundle(Landroid/os/Bundle;)V
 
     invoke-virtual {v3, v0}, Landroid/content/Intent;->putExtras(Landroid/os/Bundle;)Landroid/content/Intent;
 
@@ -478,20 +479,20 @@
 
     return-void
 
-    :catchall_29
+    :catchall_28
     move-exception v4
 
     invoke-static {v1, v2}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     throw v4
 
-    :catch_2e
+    :catch_2d
     move-exception v4
 
-    goto :goto_9
+    goto :goto_d
 .end method
 
-.method private checkListenerPermission(I)V
+.method protected checkListenerPermission(I)V
     .registers 5
 
     const/4 v2, 0x0
@@ -532,7 +533,7 @@
     return-void
 .end method
 
-.method private checkNotifyPermission(Ljava/lang/String;)Z
+.method protected checkNotifyPermission(Ljava/lang/String;)Z
     .registers 5
 
     iget-object v1, p0, Lcom/android/server/TelephonyRegistry;->mContext:Landroid/content/Context;
@@ -602,111 +603,6 @@
     goto :goto_b
 .end method
 
-.method private handleRemoveListLocked()V
-    .registers 4
-
-    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
-
-    invoke-virtual {v2}, Ljava/util/ArrayList;->size()I
-
-    move-result v2
-
-    if-lez v2, :cond_23
-
-    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
-
-    invoke-virtual {v2}, Ljava/util/ArrayList;->iterator()Ljava/util/Iterator;
-
-    move-result-object v1
-
-    :goto_e
-    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z
-
-    move-result v2
-
-    if-eqz v2, :cond_1e
-
-    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;
-
-    move-result-object v0
-
-    check-cast v0, Landroid/os/IBinder;
-
-    invoke-direct {p0, v0}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
-
-    goto :goto_e
-
-    :cond_1e
-    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
-
-    invoke-virtual {v2}, Ljava/util/ArrayList;->clear()V
-
-    :cond_23
-    return-void
-.end method
-
-.method private remove(Landroid/os/IBinder;)V
-    .registers 6
-
-    iget-object v3, p0, Lcom/android/server/TelephonyRegistry;->mRecords:Ljava/util/ArrayList;
-
-    monitor-enter v3
-
-    :try_start_3
-    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRecords:Ljava/util/ArrayList;
-
-    invoke-virtual {v2}, Ljava/util/ArrayList;->size()I
-
-    move-result v1
-
-    const/4 v0, 0x0
-
-    :goto_a
-    if-ge v0, v1, :cond_22
-
-    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRecords:Ljava/util/ArrayList;
-
-    invoke-virtual {v2, v0}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;
-
-    move-result-object v2
-
-    check-cast v2, Lcom/android/server/TelephonyRegistry$Record;
-
-    iget-object v2, v2, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
-
-    if-ne v2, p1, :cond_1f
-
-    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRecords:Ljava/util/ArrayList;
-
-    invoke-virtual {v2, v0}, Ljava/util/ArrayList;->remove(I)Ljava/lang/Object;
-
-    monitor-exit v3
-
-    :goto_1e
-    return-void
-
-    :cond_1f
-    add-int/lit8 v0, v0, 0x1
-
-    goto :goto_a
-
-    :cond_22
-    monitor-exit v3
-
-    goto :goto_1e
-
-    :catchall_24
-    move-exception v2
-
-    monitor-exit v3
-    :try_end_26
-    .catchall {:try_start_3 .. :try_end_26} :catchall_24
-
-    throw v2
-.end method
-
-
-# virtual methods
 .method public dump(Ljava/io/FileDescriptor;Ljava/io/PrintWriter;[Ljava/lang/String;)V
     .registers 10
 
@@ -1204,12 +1100,55 @@
     goto/16 :goto_32
 .end method
 
+.method protected handleRemoveListLocked()V
+    .registers 4
+
+    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
+
+    invoke-virtual {v2}, Ljava/util/ArrayList;->size()I
+
+    move-result v2
+
+    if-lez v2, :cond_23
+
+    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
+
+    invoke-virtual {v2}, Ljava/util/ArrayList;->iterator()Ljava/util/Iterator;
+
+    move-result-object v1
+
+    :goto_e
+    invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z
+
+    move-result v2
+
+    if-eqz v2, :cond_1e
+
+    invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;
+
+    move-result-object v0
+
+    check-cast v0, Landroid/os/IBinder;
+
+    invoke-virtual {p0, v0}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+
+    goto :goto_e
+
+    :cond_1e
+    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
+
+    invoke-virtual {v2}, Ljava/util/ArrayList;->clear()V
+
+    :cond_23
+    return-void
+.end method
+
 .method public listen(Ljava/lang/String;Lcom/android/internal/telephony/IPhoneStateListener;IZ)V
     .registers 17
 
-    if-eqz p3, :cond_133
+    if-eqz p3, :cond_131
 
-    invoke-direct {p0, p3}, Lcom/android/server/TelephonyRegistry;->checkListenerPermission(I)V
+    invoke-virtual {p0, p3}, Lcom/android/server/TelephonyRegistry;->checkListenerPermission(I)V
 
     iget-object v9, p0, Lcom/android/server/TelephonyRegistry;->mRecords:Ljava/util/ArrayList;
 
@@ -1226,7 +1165,7 @@
 
     invoke-virtual {v8}, Ljava/util/ArrayList;->size()I
     :try_end_12
-    .catchall {:try_start_9 .. :try_end_12} :catchall_db
+    .catchall {:try_start_9 .. :try_end_12} :catchall_da
 
     move-result v0
 
@@ -1246,7 +1185,7 @@
 
     check-cast v5, Lcom/android/server/TelephonyRegistry$Record;
     :try_end_1f
-    .catchall {:try_start_17 .. :try_end_1f} :catchall_13b
+    .catchall {:try_start_17 .. :try_end_1f} :catchall_139
 
     :try_start_1f
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
@@ -1262,7 +1201,7 @@
 
     iput p3, v5, Lcom/android/server/TelephonyRegistry$Record;->events:I
     :try_end_2a
-    .catchall {:try_start_1f .. :try_end_2a} :catchall_db
+    .catchall {:try_start_1f .. :try_end_2a} :catchall_da
 
     if-eqz p4, :cond_c1
 
@@ -1281,8 +1220,8 @@
 
     invoke-interface {v8, v10}, Lcom/android/internal/telephony/IPhoneStateListener;->onServiceStateChanged(Landroid/telephony/ServiceState;)V
     :try_end_3c
-    .catchall {:try_start_30 .. :try_end_3c} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_30 .. :try_end_3c} :catch_de
+    .catchall {:try_start_30 .. :try_end_3c} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_30 .. :try_end_3c} :catch_dd
 
     :cond_3c
     :goto_3c
@@ -1308,8 +1247,8 @@
     :cond_4d
     invoke-interface {v8, v3}, Lcom/android/internal/telephony/IPhoneStateListener;->onSignalStrengthChanged(I)V
     :try_end_50
-    .catchall {:try_start_40 .. :try_end_50} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_40 .. :try_end_50} :catch_e6
+    .catchall {:try_start_40 .. :try_end_50} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_40 .. :try_end_50} :catch_e5
 
     :cond_50
     :goto_50
@@ -1324,8 +1263,8 @@
 
     invoke-interface {v8, v10}, Lcom/android/internal/telephony/IPhoneStateListener;->onMessageWaitingIndicatorChanged(Z)V
     :try_end_5b
-    .catchall {:try_start_54 .. :try_end_5b} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_54 .. :try_end_5b} :catch_ee
+    .catchall {:try_start_54 .. :try_end_5b} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_54 .. :try_end_5b} :catch_ed
 
     :cond_5b
     :goto_5b
@@ -1340,8 +1279,8 @@
 
     invoke-interface {v8, v10}, Lcom/android/internal/telephony/IPhoneStateListener;->onCallForwardingIndicatorChanged(Z)V
     :try_end_66
-    .catchall {:try_start_5f .. :try_end_66} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_5f .. :try_end_66} :catch_f6
+    .catchall {:try_start_5f .. :try_end_66} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_5f .. :try_end_66} :catch_f5
 
     :cond_66
     :goto_66
@@ -1360,8 +1299,8 @@
 
     invoke-interface {v8, v10}, Lcom/android/internal/telephony/IPhoneStateListener;->onCellLocationChanged(Landroid/os/Bundle;)V
     :try_end_76
-    .catchall {:try_start_6a .. :try_end_76} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_6a .. :try_end_76} :catch_fe
+    .catchall {:try_start_6a .. :try_end_76} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_6a .. :try_end_76} :catch_fd
 
     :cond_76
     :goto_76
@@ -1378,8 +1317,8 @@
 
     invoke-interface {v8, v10, v11}, Lcom/android/internal/telephony/IPhoneStateListener;->onCallStateChanged(ILjava/lang/String;)V
     :try_end_83
-    .catchall {:try_start_7a .. :try_end_83} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_7a .. :try_end_83} :catch_106
+    .catchall {:try_start_7a .. :try_end_83} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_7a .. :try_end_83} :catch_105
 
     :cond_83
     :goto_83
@@ -1396,8 +1335,8 @@
 
     invoke-interface {v8, v10, v11}, Lcom/android/internal/telephony/IPhoneStateListener;->onDataConnectionStateChanged(II)V
     :try_end_90
-    .catchall {:try_start_87 .. :try_end_90} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_87 .. :try_end_90} :catch_10e
+    .catchall {:try_start_87 .. :try_end_90} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_87 .. :try_end_90} :catch_10d
 
     :cond_90
     :goto_90
@@ -1412,8 +1351,8 @@
 
     invoke-interface {v8, v10}, Lcom/android/internal/telephony/IPhoneStateListener;->onDataActivity(I)V
     :try_end_9b
-    .catchall {:try_start_94 .. :try_end_9b} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_94 .. :try_end_9b} :catch_116
+    .catchall {:try_start_94 .. :try_end_9b} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_94 .. :try_end_9b} :catch_115
 
     :cond_9b
     :goto_9b
@@ -1428,8 +1367,8 @@
 
     invoke-interface {v8, v10}, Lcom/android/internal/telephony/IPhoneStateListener;->onSignalStrengthsChanged(Landroid/telephony/SignalStrength;)V
     :try_end_a6
-    .catchall {:try_start_9f .. :try_end_a6} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_9f .. :try_end_a6} :catch_11e
+    .catchall {:try_start_9f .. :try_end_a6} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_9f .. :try_end_a6} :catch_11c
 
     :cond_a6
     :goto_a6
@@ -1444,8 +1383,8 @@
 
     invoke-interface {v8, v10}, Lcom/android/internal/telephony/IPhoneStateListener;->onOtaspChanged(I)V
     :try_end_b1
-    .catchall {:try_start_aa .. :try_end_b1} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_aa .. :try_end_b1} :catch_125
+    .catchall {:try_start_aa .. :try_end_b1} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_aa .. :try_end_b1} :catch_123
 
     :cond_b1
     :goto_b1
@@ -1464,15 +1403,15 @@
 
     invoke-interface {v8, v10}, Lcom/android/internal/telephony/IPhoneStateListener;->onCellInfoChanged(Landroid/telephony/CellInfo;)V
     :try_end_c1
-    .catchall {:try_start_b5 .. :try_end_c1} :catchall_db
-    .catch Landroid/os/RemoteException; {:try_start_b5 .. :try_end_c1} :catch_12c
+    .catchall {:try_start_b5 .. :try_end_c1} :catchall_da
+    .catch Landroid/os/RemoteException; {:try_start_b5 .. :try_end_c1} :catch_12a
 
     :cond_c1
     :goto_c1
     :try_start_c1
     monitor-exit v9
     :try_end_c2
-    .catchall {:try_start_c1 .. :try_end_c2} :catchall_db
+    .catchall {:try_start_c1 .. :try_end_c2} :catchall_da
 
     :goto_c2
     return-void
@@ -1488,13 +1427,11 @@
     :try_start_c8
     new-instance v5, Lcom/android/server/TelephonyRegistry$Record;
 
-    const/4 v8, 0x0
-
-    invoke-direct {v5, v8}, Lcom/android/server/TelephonyRegistry$Record;-><init>(Lcom/android/server/TelephonyRegistry$1;)V
-    :try_end_ce
-    .catchall {:try_start_c8 .. :try_end_ce} :catchall_13b
+    invoke-direct {v5}, Lcom/android/server/TelephonyRegistry$Record;-><init>()V
+    :try_end_cd
+    .catchall {:try_start_c8 .. :try_end_cd} :catchall_139
 
-    :try_start_ce
+    :try_start_cd
     iput-object v1, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
     iput-object p2, v5, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
@@ -1507,133 +1444,133 @@
 
     goto/16 :goto_23
 
-    :catchall_db
+    :catchall_da
     move-exception v8
 
-    :goto_dc
+    :goto_db
     monitor-exit v9
-    :try_end_dd
-    .catchall {:try_start_ce .. :try_end_dd} :catchall_db
+    :try_end_dc
+    .catchall {:try_start_cd .. :try_end_dc} :catchall_da
 
     throw v8
 
-    :catch_de
+    :catch_dd
     move-exception v2
 
-    :try_start_df
+    :try_start_de
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
     goto/16 :goto_3c
 
-    :catch_e6
+    :catch_e5
     move-exception v2
 
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
     goto/16 :goto_50
 
-    :catch_ee
+    :catch_ed
     move-exception v2
 
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
     goto/16 :goto_5b
 
-    :catch_f6
+    :catch_f5
     move-exception v2
 
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
     goto/16 :goto_66
 
-    :catch_fe
+    :catch_fd
     move-exception v2
 
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
     goto/16 :goto_76
 
-    :catch_106
+    :catch_105
     move-exception v2
 
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
     goto/16 :goto_83
 
-    :catch_10e
+    :catch_10d
     move-exception v2
 
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
     goto/16 :goto_90
 
-    :catch_116
+    :catch_115
     move-exception v2
 
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
-    goto/16 :goto_9b
+    goto :goto_9b
 
-    :catch_11e
+    :catch_11c
     move-exception v2
 
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
     goto :goto_a6
 
-    :catch_125
+    :catch_123
     move-exception v2
 
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
     goto :goto_b1
 
-    :catch_12c
+    :catch_12a
     move-exception v2
 
     iget-object v8, v5, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
-    :try_end_132
-    .catchall {:try_start_df .. :try_end_132} :catchall_db
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    :try_end_130
+    .catchall {:try_start_de .. :try_end_130} :catchall_da
 
     goto :goto_c1
 
-    :cond_133
+    :cond_131
     invoke-interface {p2}, Lcom/android/internal/telephony/IPhoneStateListener;->asBinder()Landroid/os/IBinder;
 
     move-result-object v8
 
-    invoke-direct {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
+    invoke-virtual {p0, v8}, Lcom/android/server/TelephonyRegistry;->remove(Landroid/os/IBinder;)V
 
     goto :goto_c2
 
-    :catchall_13b
+    :catchall_139
     move-exception v8
 
     move-object v5, v6
 
-    goto :goto_dc
+    goto :goto_db
 .end method
 
 .method public notifyCallForwardingChanged(Z)V
@@ -1641,7 +1578,7 @@
 
     const-string v3, "notifyCallForwardingChanged()"
 
-    invoke-direct {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v3
 
@@ -1719,7 +1656,7 @@
 
     :cond_38
     :try_start_38
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
+    invoke-virtual {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
 
     monitor-exit v4
     :try_end_3c
@@ -1733,7 +1670,7 @@
 
     const-string v3, "notifyCallState()"
 
-    invoke-direct {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v3
 
@@ -1813,7 +1750,7 @@
 
     :cond_3a
     :try_start_3a
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
+    invoke-virtual {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
 
     monitor-exit v4
     :try_end_3e
@@ -1829,7 +1766,7 @@
 
     const-string v3, "notifyCellInfo()"
 
-    invoke-direct {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v3
 
@@ -1911,7 +1848,7 @@
 
     :cond_3d
     :try_start_3d
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
+    invoke-virtual {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
 
     monitor-exit v4
     :try_end_41
@@ -1925,7 +1862,7 @@
 
     const-string v3, "notifyCellLocation()"
 
-    invoke-direct {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v3
 
@@ -2007,7 +1944,7 @@
 
     :cond_3d
     :try_start_3d
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
+    invoke-virtual {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
 
     monitor-exit v4
     :try_end_41
@@ -2021,7 +1958,7 @@
 
     const-string v3, "notifyDataActivity()"
 
-    invoke-direct {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v3
 
@@ -2099,7 +2036,7 @@
 
     :cond_38
     :try_start_38
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
+    invoke-virtual {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
 
     monitor-exit v4
     :try_end_3c
@@ -2113,7 +2050,7 @@
 
     const-string v1, "notifyDataConnection()"
 
-    invoke-direct {p0, v1}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v1}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v1
 
@@ -2281,7 +2218,7 @@
     goto :goto_28
 
     :cond_89
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
+    invoke-virtual {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
 
     :cond_8c
     monitor-exit v2
@@ -2316,7 +2253,7 @@
 
     const-string v0, "notifyDataConnectionFailed()"
 
-    invoke-direct {p0, v0}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v0}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v0
 
@@ -2336,7 +2273,7 @@
 
     const-string v3, "notifyMessageWaitingChanged()"
 
-    invoke-direct {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v3
 
@@ -2414,7 +2351,7 @@
 
     :cond_38
     :try_start_38
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
+    invoke-virtual {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
 
     monitor-exit v4
     :try_end_3c
@@ -2428,7 +2365,7 @@
 
     const-string v3, "notifyOtaspChanged()"
 
-    invoke-direct {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v3
 
@@ -2506,7 +2443,7 @@
 
     :cond_38
     :try_start_38
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
+    invoke-virtual {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
 
     monitor-exit v4
     :try_end_3c
@@ -2516,11 +2453,11 @@
 .end method
 
 .method public notifyServiceState(Landroid/telephony/ServiceState;)V
-    .registers 8
+    .registers 10
 
     const-string v3, "notifyServiceState()"
 
-    invoke-direct {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v3}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v3
 
@@ -2537,19 +2474,29 @@
     :try_start_c
     iput-object p1, p0, Lcom/android/server/TelephonyRegistry;->mServiceState:Landroid/telephony/ServiceState;
 
+    iget-object v3, p0, Lcom/android/server/TelephonyRegistry;->mServiceState:Landroid/telephony/ServiceState;
+
+    const-string v5, ""
+
+    const-string v6, ""
+
+    const-string v7, ""
+
+    invoke-virtual {v3, v5, v6, v7}, Landroid/telephony/ServiceState;->setOperatorName(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
+
     iget-object v3, p0, Lcom/android/server/TelephonyRegistry;->mRecords:Ljava/util/ArrayList;
 
     invoke-virtual {v3}, Ljava/util/ArrayList;->iterator()Ljava/util/Iterator;
 
     move-result-object v1
 
-    :cond_14
-    :goto_14
+    :cond_1f
+    :goto_1f
     invoke-interface {v1}, Ljava/util/Iterator;->hasNext()Z
 
     move-result v3
 
-    if-eqz v3, :cond_3d
+    if-eqz v3, :cond_51
 
     invoke-interface {v1}, Ljava/util/Iterator;->next()Ljava/lang/Object;
 
@@ -2558,14 +2505,22 @@
     check-cast v2, Lcom/android/server/TelephonyRegistry$Record;
 
     iget v3, v2, Lcom/android/server/TelephonyRegistry$Record;->events:I
-    :try_end_22
-    .catchall {:try_start_c .. :try_end_22} :catchall_3a
+    :try_end_2d
+    .catchall {:try_start_c .. :try_end_2d} :catchall_4e
 
     and-int/lit8 v3, v3, 0x1
 
-    if-eqz v3, :cond_14
+    if-eqz v3, :cond_1f
+
+    :try_start_31
+    const-string v3, ""
+
+    const-string v5, ""
+
+    const-string v6, ""
+
+    invoke-virtual {p1, v3, v5, v6}, Landroid/telephony/ServiceState;->setOperatorName(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
 
-    :try_start_26
     iget-object v3, v2, Lcom/android/server/TelephonyRegistry$Record;->callback:Lcom/android/internal/telephony/IPhoneStateListener;
 
     new-instance v5, Landroid/telephony/ServiceState;
@@ -2573,42 +2528,42 @@
     invoke-direct {v5, p1}, Landroid/telephony/ServiceState;-><init>(Landroid/telephony/ServiceState;)V
 
     invoke-interface {v3, v5}, Lcom/android/internal/telephony/IPhoneStateListener;->onServiceStateChanged(Landroid/telephony/ServiceState;)V
-    :try_end_30
-    .catchall {:try_start_26 .. :try_end_30} :catchall_3a
-    .catch Landroid/os/RemoteException; {:try_start_26 .. :try_end_30} :catch_31
+    :try_end_44
+    .catchall {:try_start_31 .. :try_end_44} :catchall_4e
+    .catch Landroid/os/RemoteException; {:try_start_31 .. :try_end_44} :catch_45
 
-    goto :goto_14
+    goto :goto_1f
 
-    :catch_31
+    :catch_45
     move-exception v0
 
-    :try_start_32
+    :try_start_46
     iget-object v3, p0, Lcom/android/server/TelephonyRegistry;->mRemoveList:Ljava/util/ArrayList;
 
     iget-object v5, v2, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
 
     invoke-virtual {v3, v5}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
 
-    goto :goto_14
+    goto :goto_1f
 
-    :catchall_3a
+    :catchall_4e
     move-exception v3
 
     monitor-exit v4
-    :try_end_3c
-    .catchall {:try_start_32 .. :try_end_3c} :catchall_3a
+    :try_end_50
+    .catchall {:try_start_46 .. :try_end_50} :catchall_4e
 
     throw v3
 
-    :cond_3d
-    :try_start_3d
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
+    :cond_51
+    :try_start_51
+    invoke-virtual {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
 
     monitor-exit v4
-    :try_end_41
-    .catchall {:try_start_3d .. :try_end_41} :catchall_3a
+    :try_end_55
+    .catchall {:try_start_51 .. :try_end_55} :catchall_4e
 
-    invoke-direct {p0, p1}, Lcom/android/server/TelephonyRegistry;->broadcastServiceStateChanged(Landroid/telephony/ServiceState;)V
+    invoke-virtual {p0, p1}, Lcom/android/server/TelephonyRegistry;->broadcastServiceStateChanged(Landroid/telephony/ServiceState;)V
 
     goto :goto_8
 .end method
@@ -2618,7 +2573,7 @@
 
     const-string v4, "notifySignalStrength()"
 
-    invoke-direct {p0, v4}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
+    invoke-virtual {p0, v4}, Lcom/android/server/TelephonyRegistry;->checkNotifyPermission(Ljava/lang/String;)Z
 
     move-result v4
 
@@ -2741,7 +2696,7 @@
     goto :goto_30
 
     :cond_5a
-    invoke-direct {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
+    invoke-virtual {p0}, Lcom/android/server/TelephonyRegistry;->handleRemoveListLocked()V
 
     monitor-exit v5
     :try_end_5e
@@ -2751,3 +2706,63 @@
 
     goto :goto_8
 .end method
+
+.method protected remove(Landroid/os/IBinder;)V
+    .registers 6
+
+    iget-object v3, p0, Lcom/android/server/TelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    monitor-enter v3
+
+    :try_start_3
+    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    invoke-virtual {v2}, Ljava/util/ArrayList;->size()I
+
+    move-result v1
+
+    const/4 v0, 0x0
+
+    :goto_a
+    if-ge v0, v1, :cond_22
+
+    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    invoke-virtual {v2, v0}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;
+
+    move-result-object v2
+
+    check-cast v2, Lcom/android/server/TelephonyRegistry$Record;
+
+    iget-object v2, v2, Lcom/android/server/TelephonyRegistry$Record;->binder:Landroid/os/IBinder;
+
+    if-ne v2, p1, :cond_1f
+
+    iget-object v2, p0, Lcom/android/server/TelephonyRegistry;->mRecords:Ljava/util/ArrayList;
+
+    invoke-virtual {v2, v0}, Ljava/util/ArrayList;->remove(I)Ljava/lang/Object;
+
+    monitor-exit v3
+
+    :goto_1e
+    return-void
+
+    :cond_1f
+    add-int/lit8 v0, v0, 0x1
+
+    goto :goto_a
+
+    :cond_22
+    monitor-exit v3
+
+    goto :goto_1e
+
+    :catchall_24
+    move-exception v2
+
+    monitor-exit v3
+    :try_end_26
+    .catchall {:try_start_3 .. :try_end_26} :catchall_24
+
+    throw v2
+.end method
