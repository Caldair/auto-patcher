diff -Npru stock-services/smali/com/android/server/accessibility/AccessibilityManagerService$MainHanler.smali pdroid-services/smali/com/android/server/accessibility/AccessibilityManagerService$MainHanler.smali
--- stock-services/smali/com/android/server/accessibility/AccessibilityManagerService$MainHanler.smali	2012-09-01 16:59:50.842748544 -0500
+++ pdroid-services/smali/com/android/server/accessibility/AccessibilityManagerService$MainHanler.smali	2012-09-01 17:00:07.122829298 -0500
@@ -183,7 +183,7 @@
 
     move-result-object v7
 
-    const v8, 0x10403c8
+    const v8, 0x10403c6
 
     invoke-virtual {v7, v8}, Landroid/app/AlertDialog$Builder;->setTitle(I)Landroid/app/AlertDialog$Builder;
 
@@ -193,7 +193,7 @@
 
     iget-object v8, v8, Lcom/android/server/accessibility/AccessibilityManagerService;->mContext:Landroid/content/Context;
 
-    const v9, 0x10403c9
+    const v9, 0x10403c7
 
     const/4 v10, 0x1
 
diff -Npru stock-services/smali/com/android/server/am/ActivityManagerService.smali pdroid-services/smali/com/android/server/am/ActivityManagerService.smali
--- stock-services/smali/com/android/server/am/ActivityManagerService.smali	2012-09-01 16:59:51.074749714 -0500
+++ pdroid-services/smali/com/android/server/am/ActivityManagerService.smali	2012-09-01 17:00:07.750832417 -0500
@@ -41289,7 +41289,7 @@
     :try_start_16
     monitor-enter p0
     :try_end_17
-    .catchall {:try_start_16 .. :try_end_17} :catchall_3b
+    .catchall {:try_start_16 .. :try_end_17} :catchall_42
 
     :try_start_17
     invoke-virtual {p0, p1}, Lcom/android/server/am/ActivityManagerService;->broadcastRecordForReceiverLocked(Landroid/os/IBinder;)Lcom/android/server/am/BroadcastRecord;
@@ -41317,40 +41317,46 @@
     :cond_28
     monitor-exit p0
     :try_end_29
-    .catchall {:try_start_17 .. :try_end_29} :catchall_38
+    .catchall {:try_start_17 .. :try_end_29} :catchall_3f
 
-    if-eqz v7, :cond_31
+    if-eqz v7, :cond_38
 
     :try_start_2b
     iget-object v0, v1, Lcom/android/server/am/BroadcastRecord;->queue:Lcom/android/server/am/BroadcastQueue;
 
+    iget-object v2, p0, Lcom/android/server/am/ActivityManagerService;->mContext:Landroid/content/Context;
+
+    invoke-virtual {v0, v2}, Lcom/android/server/am/BroadcastQueue;->setContext(Landroid/content/Context;)V
+
+    iget-object v0, v1, Lcom/android/server/am/BroadcastRecord;->queue:Lcom/android/server/am/BroadcastQueue;
+
     const/4 v2, 0x0
 
     invoke-virtual {v0, v2}, Lcom/android/server/am/BroadcastQueue;->processNextBroadcast(Z)V
 
-    :cond_31
+    :cond_38
     invoke-virtual {p0}, Lcom/android/server/am/ActivityManagerService;->trimApplications()V
-    :try_end_34
-    .catchall {:try_start_2b .. :try_end_34} :catchall_3b
+    :try_end_3b
+    .catchall {:try_start_2b .. :try_end_3b} :catchall_42
 
     invoke-static {v8, v9}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     return-void
 
-    :catchall_38
+    :catchall_3f
     move-exception v0
 
-    :try_start_39
+    :try_start_40
     monitor-exit p0
-    :try_end_3a
-    .catchall {:try_start_39 .. :try_end_3a} :catchall_38
+    :try_end_41
+    .catchall {:try_start_40 .. :try_end_41} :catchall_3f
 
-    :try_start_3a
+    :try_start_41
     throw v0
-    :try_end_3b
-    .catchall {:try_start_3a .. :try_end_3b} :catchall_3b
+    :try_end_42
+    .catchall {:try_start_41 .. :try_end_42} :catchall_42
 
-    :catchall_3b
+    :catchall_42
     move-exception v0
 
     invoke-static {v8, v9}, Landroid/os/Binder;->restoreCallingIdentity(J)V
@@ -58082,7 +58088,7 @@
 
     move-result-object v3
 
-    const v4, 0x104035f
+    const v4, 0x104035d
 
     invoke-virtual {v3, v4}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -58099,7 +58105,7 @@
 
     move-result-object v3
 
-    const v4, 0x1040360
+    const v4, 0x104035e
 
     invoke-virtual {v3, v4}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -59113,7 +59119,7 @@
     :try_start_5
     monitor-enter p0
     :try_end_6
-    .catchall {:try_start_5 .. :try_end_6} :catchall_61
+    .catchall {:try_start_5 .. :try_end_6} :catchall_68
 
     :try_start_6
     iget-object v0, p0, Lcom/android/server/am/ActivityManagerService;->mRegisteredReceivers:Ljava/util/HashMap;
@@ -59128,11 +59134,11 @@
 
     check-cast v12, Lcom/android/server/am/ReceiverList;
 
-    if-eqz v12, :cond_54
+    if-eqz v12, :cond_5b
 
     iget-object v0, v12, Lcom/android/server/am/ReceiverList;->curBroadcast:Lcom/android/server/am/BroadcastRecord;
 
-    if-eqz v0, :cond_35
+    if-eqz v0, :cond_3c
 
     iget-object v11, v12, Lcom/android/server/am/ReceiverList;->curBroadcast:Lcom/android/server/am/BroadcastRecord;
 
@@ -59156,20 +59162,26 @@
 
     move-result v7
 
-    if-eqz v7, :cond_35
+    if-eqz v7, :cond_3c
 
     const/4 v8, 0x1
 
     iget-object v0, v11, Lcom/android/server/am/BroadcastRecord;->queue:Lcom/android/server/am/BroadcastQueue;
 
+    iget-object v1, p0, Lcom/android/server/am/ActivityManagerService;->mContext:Landroid/content/Context;
+
+    invoke-virtual {v0, v1}, Lcom/android/server/am/BroadcastQueue;->setContext(Landroid/content/Context;)V
+
+    iget-object v0, v11, Lcom/android/server/am/BroadcastRecord;->queue:Lcom/android/server/am/BroadcastQueue;
+
     const/4 v1, 0x0
 
     invoke-virtual {v0, v1}, Lcom/android/server/am/BroadcastQueue;->processNextBroadcast(Z)V
 
-    :cond_35
+    :cond_3c
     iget-object v0, v12, Lcom/android/server/am/ReceiverList;->app:Lcom/android/server/am/ProcessRecord;
 
-    if-eqz v0, :cond_40
+    if-eqz v0, :cond_47
 
     iget-object v0, v12, Lcom/android/server/am/ReceiverList;->app:Lcom/android/server/am/ProcessRecord;
 
@@ -59177,12 +59189,12 @@
 
     invoke-virtual {v0, v12}, Ljava/util/HashSet;->remove(Ljava/lang/Object;)Z
 
-    :cond_40
+    :cond_47
     invoke-virtual {p0, v12}, Lcom/android/server/am/ActivityManagerService;->removeReceiverLocked(Lcom/android/server/am/ReceiverList;)V
 
     iget-boolean v0, v12, Lcom/android/server/am/ReceiverList;->linkedToDeath:Z
 
-    if-eqz v0, :cond_54
+    if-eqz v0, :cond_5b
 
     const/4 v0, 0x0
 
@@ -59198,37 +59210,37 @@
 
     invoke-interface {v0, v12, v1}, Landroid/os/IBinder;->unlinkToDeath(Landroid/os/IBinder$DeathRecipient;I)Z
 
-    :cond_54
+    :cond_5b
     monitor-exit p0
-    :try_end_55
-    .catchall {:try_start_6 .. :try_end_55} :catchall_5e
+    :try_end_5c
+    .catchall {:try_start_6 .. :try_end_5c} :catchall_65
 
-    if-eqz v8, :cond_5a
+    if-eqz v8, :cond_61
 
-    :try_start_57
+    :try_start_5e
     invoke-virtual {p0}, Lcom/android/server/am/ActivityManagerService;->trimApplications()V
-    :try_end_5a
-    .catchall {:try_start_57 .. :try_end_5a} :catchall_61
+    :try_end_61
+    .catchall {:try_start_5e .. :try_end_61} :catchall_68
 
-    :cond_5a
+    :cond_61
     invoke-static {v9, v10}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     return-void
 
-    :catchall_5e
+    :catchall_65
     move-exception v0
 
-    :try_start_5f
+    :try_start_66
     monitor-exit p0
-    :try_end_60
-    .catchall {:try_start_5f .. :try_end_60} :catchall_5e
+    :try_end_67
+    .catchall {:try_start_66 .. :try_end_67} :catchall_65
 
-    :try_start_60
+    :try_start_67
     throw v0
-    :try_end_61
-    .catchall {:try_start_60 .. :try_end_61} :catchall_61
+    :try_end_68
+    .catchall {:try_start_67 .. :try_end_68} :catchall_68
 
-    :catchall_61
+    :catchall_68
     move-exception v0
 
     invoke-static {v9, v10}, Landroid/os/Binder;->restoreCallingIdentity(J)V
diff -Npru stock-services/smali/com/android/server/am/BroadcastQueue.smali pdroid-services/smali/com/android/server/am/BroadcastQueue.smali
--- stock-services/smali/com/android/server/am/BroadcastQueue.smali	2012-09-01 16:59:51.154750103 -0500
+++ pdroid-services/smali/com/android/server/am/BroadcastQueue.smali	2012-09-01 17:00:07.854832920 -0500
@@ -34,6 +34,8 @@
 
 .field mBroadcastsScheduled:Z
 
+.field mContext:Landroid/content/Context;
+
 .field final mHandler:Landroid/os/Handler;
 
 .field final mOrderedBroadcasts:Ljava/util/ArrayList;
@@ -73,7 +75,9 @@
 
 # direct methods
 .method constructor <init>(Lcom/android/server/am/ActivityManagerService;Ljava/lang/String;J)V
-    .registers 6
+    .registers 7
+
+    const/4 v1, 0x0
 
     invoke-direct {p0}, Ljava/lang/Object;-><init>()V
 
@@ -99,9 +103,7 @@
 
     iput-boolean v0, p0, Lcom/android/server/am/BroadcastQueue;->mBroadcastsScheduled:Z
 
-    const/4 v0, 0x0
-
-    iput-object v0, p0, Lcom/android/server/am/BroadcastQueue;->mPendingBroadcast:Lcom/android/server/am/BroadcastRecord;
+    iput-object v1, p0, Lcom/android/server/am/BroadcastQueue;->mPendingBroadcast:Lcom/android/server/am/BroadcastRecord;
 
     new-instance v0, Lcom/android/server/am/BroadcastQueue$1;
 
@@ -109,6 +111,8 @@
 
     iput-object v0, p0, Lcom/android/server/am/BroadcastQueue;->mHandler:Landroid/os/Handler;
 
+    iput-object v1, p0, Lcom/android/server/am/BroadcastQueue;->mContext:Landroid/content/Context;
+
     iput-object p1, p0, Lcom/android/server/am/BroadcastQueue;->mService:Lcom/android/server/am/ActivityManagerService;
 
     iput-object p2, p0, Lcom/android/server/am/BroadcastQueue;->mQueueName:Ljava/lang/String;
@@ -559,6 +563,122 @@
     goto :goto_153
 .end method
 
+.method private enforcePrivacyPermission(Ljava/lang/Object;Lcom/android/server/am/BroadcastRecord;)V
+    .registers 10
+
+    iget-object v4, p0, Lcom/android/server/am/BroadcastQueue;->mContext:Landroid/content/Context;
+
+    if-eqz v4, :cond_40
+
+    if-eqz p2, :cond_40
+
+    iget-object v4, p2, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    if-eqz v4, :cond_40
+
+    iget-object v4, p2, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    invoke-virtual {v4}, Landroid/content/Intent;->getAction()Ljava/lang/String;
+
+    move-result-object v4
+
+    if-eqz v4, :cond_40
+
+    const/4 v2, 0x0
+
+    const/4 v3, -0x1
+
+    :try_start_14
+    instance-of v4, p1, Lcom/android/server/am/BroadcastFilter;
+
+    if-eqz v4, :cond_41
+
+    move-object v0, p1
+
+    check-cast v0, Lcom/android/server/am/BroadcastFilter;
+
+    move-object v4, v0
+
+    iget-object v4, v4, Lcom/android/server/am/BroadcastFilter;->receiverList:Lcom/android/server/am/ReceiverList;
+
+    iget-object v4, v4, Lcom/android/server/am/ReceiverList;->app:Lcom/android/server/am/ProcessRecord;
+
+    iget-object v4, v4, Lcom/android/server/am/ProcessRecord;->info:Landroid/content/pm/ApplicationInfo;
+
+    iget-object v2, v4, Landroid/content/pm/ApplicationInfo;->packageName:Ljava/lang/String;
+
+    check-cast p1, Lcom/android/server/am/BroadcastFilter;
+
+    iget-object v4, p1, Lcom/android/server/am/BroadcastFilter;->receiverList:Lcom/android/server/am/ReceiverList;
+
+    iget-object v4, v4, Lcom/android/server/am/ReceiverList;->app:Lcom/android/server/am/ProcessRecord;
+
+    iget-object v4, v4, Lcom/android/server/am/ProcessRecord;->info:Landroid/content/pm/ApplicationInfo;
+
+    iget v3, v4, Landroid/content/pm/ApplicationInfo;->uid:I
+    :try_end_2e
+    .catch Ljava/lang/Exception; {:try_start_14 .. :try_end_2e} :catch_58
+
+    :cond_2e
+    :goto_2e
+    if-eqz v2, :cond_40
+
+    const/4 v4, -0x1
+
+    if-eq v3, v4, :cond_40
+
+    iget-object v4, p2, Lcom/android/server/am/BroadcastRecord;->intent:Landroid/content/Intent;
+
+    iget-object v5, p0, Lcom/android/server/am/BroadcastQueue;->mContext:Landroid/content/Context;
+
+    iget-object v6, p2, Lcom/android/server/am/BroadcastRecord;->receivers:Ljava/util/List;
+
+    invoke-interface {v6}, Ljava/util/List;->size()I
+
+    move-result v6
+
+    invoke-static {v2, v3, v4, v5, v6}, Landroid/privacy/surrogate/PrivacyActivityManagerService;->enforcePrivacyPermission(Ljava/lang/String;ILandroid/content/Intent;Landroid/content/Context;I)V
+
+    :cond_40
+    :goto_40
+    return-void
+
+    :cond_41
+    :try_start_41
+    instance-of v4, p1, Landroid/content/pm/ResolveInfo;
+
+    if-eqz v4, :cond_2e
+
+    move-object v0, p1
+
+    check-cast v0, Landroid/content/pm/ResolveInfo;
+
+    move-object v4, v0
+
+    iget-object v4, v4, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
+
+    iget-object v4, v4, Landroid/content/pm/ActivityInfo;->applicationInfo:Landroid/content/pm/ApplicationInfo;
+
+    iget-object v2, v4, Landroid/content/pm/ApplicationInfo;->packageName:Ljava/lang/String;
+
+    check-cast p1, Landroid/content/pm/ResolveInfo;
+
+    iget-object v4, p1, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
+
+    iget-object v4, v4, Landroid/content/pm/ActivityInfo;->applicationInfo:Landroid/content/pm/ApplicationInfo;
+
+    iget v3, v4, Landroid/content/pm/ApplicationInfo;->uid:I
+    :try_end_57
+    .catch Ljava/lang/Exception; {:try_start_41 .. :try_end_57} :catch_58
+
+    goto :goto_2e
+
+    :catch_58
+    move-exception v1
+
+    goto :goto_40
+.end method
+
 .method private static performReceiveLocked(Lcom/android/server/am/ProcessRecord;Landroid/content/IIntentReceiver;Landroid/content/Intent;ILjava/lang/String;Landroid/os/Bundle;ZZ)V
     .registers 16
     .annotation system Ldalvik/annotation/Throws;
@@ -2541,7 +2661,7 @@
     iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->resultTo:Landroid/content/IIntentReceiver;
     :try_end_224
     .catchall {:try_start_1fd .. :try_end_224} :catchall_69
-    .catch Landroid/os/RemoteException; {:try_start_1fd .. :try_end_224} :catch_2b0
+    .catch Landroid/os/RemoteException; {:try_start_1fd .. :try_end_224} :catch_2b9
 
     :cond_224
     :goto_224
@@ -2641,11 +2761,19 @@
 
     move-result-object v22
 
+    move-object/from16 v0, p0
+
+    move-object/from16 v1, v22
+
+    move-object/from16 v2, v27
+
+    invoke-direct {v0, v1, v2}, Lcom/android/server/am/BroadcastQueue;->enforcePrivacyPermission(Ljava/lang/Object;Lcom/android/server/am/BroadcastRecord;)V
+
     move-object/from16 v0, v22
 
     instance-of v3, v0, Lcom/android/server/am/BroadcastFilter;
 
-    if-eqz v3, :cond_2dd
+    if-eqz v3, :cond_2e6
 
     move-object/from16 v0, v22
 
@@ -2667,15 +2795,15 @@
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->receiver:Landroid/os/IBinder;
 
-    if-eqz v3, :cond_2a5
+    if-eqz v3, :cond_2ae
 
     move-object/from16 v0, v27
 
     iget-boolean v3, v0, Lcom/android/server/am/BroadcastRecord;->ordered:Z
 
-    if-nez v3, :cond_2ad
+    if-nez v3, :cond_2b6
 
-    :cond_2a5
+    :cond_2ae
     const/4 v3, 0x0
 
     move-object/from16 v0, v27
@@ -2684,12 +2812,12 @@
 
     invoke-virtual/range {p0 .. p0}, Lcom/android/server/am/BroadcastQueue;->scheduleBroadcastsLocked()V
 
-    :cond_2ad
+    :cond_2b6
     monitor-exit v34
 
     goto/16 :goto_93
 
-    :catch_2b0
+    :catch_2b9
     move-exception v14
 
     const-string v3, "BroadcastQueue"
@@ -2734,7 +2862,7 @@
 
     goto/16 :goto_224
 
-    :cond_2dd
+    :cond_2e6
     move-object/from16 v0, v22
 
     check-cast v0, Landroid/content/pm/ResolveInfo;
@@ -2779,7 +2907,7 @@
 
     move-result v26
 
-    if-eqz v26, :cond_397
+    if-eqz v26, :cond_3a0
 
     move-object/from16 v0, v18
 
@@ -2787,7 +2915,7 @@
 
     iget-boolean v3, v3, Landroid/content/pm/ActivityInfo;->exported:Z
 
-    if-nez v3, :cond_446
+    if-nez v3, :cond_44f
 
     const-string v3, "BroadcastQueue"
 
@@ -2917,10 +3045,10 @@
 
     invoke-static {v3, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
 
-    :goto_395
+    :goto_39e
     const/16 v29, 0x1
 
-    :cond_397
+    :cond_3a0
     move-object/from16 v0, v18
 
     iget-object v3, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
@@ -2931,17 +3059,17 @@
 
     const/16 v5, 0x3e8
 
-    if-eq v3, v5, :cond_41f
+    if-eq v3, v5, :cond_428
 
     move-object/from16 v0, v27
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->requiredPermission:Ljava/lang/String;
-    :try_end_3a7
-    .catchall {:try_start_224 .. :try_end_3a7} :catchall_69
+    :try_end_3b0
+    .catchall {:try_start_224 .. :try_end_3b0} :catchall_69
 
-    if-eqz v3, :cond_41f
+    if-eqz v3, :cond_428
 
-    :try_start_3a9
+    :try_start_3b2
     invoke-static {}, Landroid/app/AppGlobals;->getPackageManager()Landroid/content/pm/IPackageManager;
 
     move-result-object v3
@@ -2959,16 +3087,16 @@
     iget-object v6, v6, Landroid/content/pm/ApplicationInfo;->packageName:Ljava/lang/String;
 
     invoke-interface {v3, v5, v6}, Landroid/content/pm/IPackageManager;->checkPermission(Ljava/lang/String;Ljava/lang/String;)I
-    :try_end_3bc
-    .catchall {:try_start_3a9 .. :try_end_3bc} :catchall_69
-    .catch Landroid/os/RemoteException; {:try_start_3a9 .. :try_end_3bc} :catch_4c8
+    :try_end_3c5
+    .catchall {:try_start_3b2 .. :try_end_3c5} :catchall_69
+    .catch Landroid/os/RemoteException; {:try_start_3b2 .. :try_end_3c5} :catch_4d1
 
     move-result v26
 
-    :goto_3bd
-    if-eqz v26, :cond_41f
+    :goto_3c6
+    if-eqz v26, :cond_428
 
-    :try_start_3bf
+    :try_start_3c8
     const-string v3, "BroadcastQueue"
 
     new-instance v5, Ljava/lang/StringBuilder;
@@ -3063,12 +3191,12 @@
 
     const/16 v29, 0x1
 
-    :cond_41f
+    :cond_428
     move-object/from16 v0, v27
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastRecord;->curApp:Lcom/android/server/am/ProcessRecord;
 
-    if-eqz v3, :cond_42f
+    if-eqz v3, :cond_438
 
     move-object/from16 v0, v27
 
@@ -3076,12 +3204,12 @@
 
     iget-boolean v3, v3, Lcom/android/server/am/ProcessRecord;->crashing:Z
 
-    if-eqz v3, :cond_42f
+    if-eqz v3, :cond_438
 
     const/16 v29, 0x1
 
-    :cond_42f
-    if-eqz v29, :cond_4cd
+    :cond_438
+    if-eqz v29, :cond_4d6
 
     const/4 v3, 0x0
 
@@ -3107,7 +3235,7 @@
 
     goto/16 :goto_93
 
-    :cond_446
+    :cond_44f
     const-string v3, "BroadcastQueue"
 
     new-instance v5, Ljava/lang/StringBuilder;
@@ -3234,16 +3362,16 @@
 
     invoke-static {v3, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
 
-    goto/16 :goto_395
+    goto/16 :goto_39e
 
-    :catch_4c8
+    :catch_4d1
     move-exception v14
 
     const/16 v26, -0x1
 
-    goto/16 :goto_3bd
+    goto/16 :goto_3c6
 
-    :cond_4cd
+    :cond_4d6
     const/4 v3, 0x1
 
     move-object/from16 v0, v27
@@ -3284,7 +3412,7 @@
 
     const/16 v5, 0x3e8
 
-    if-eq v3, v5, :cond_521
+    if-eq v3, v5, :cond_52a
 
     move-object/from16 v0, p0
 
@@ -3306,11 +3434,11 @@
 
     move-result v20
 
-    if-eqz v20, :cond_56a
+    if-eqz v20, :cond_573
 
     const/16 v31, 0x0
 
-    :goto_50f
+    :goto_518
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastQueue;->mService:Lcom/android/server/am/ActivityManagerService;
@@ -3329,7 +3457,7 @@
 
     iput-object v3, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
 
-    :cond_521
+    :cond_52a
     move-object/from16 v0, v18
 
     iget-object v3, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
@@ -3337,10 +3465,10 @@
     move-object/from16 v0, v27
 
     iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->curReceiver:Landroid/content/pm/ActivityInfo;
-    :try_end_529
-    .catchall {:try_start_3bf .. :try_end_529} :catchall_69
+    :try_end_532
+    .catchall {:try_start_3c8 .. :try_end_532} :catchall_69
 
-    :try_start_529
+    :try_start_532
     invoke-static {}, Landroid/app/AppGlobals;->getPackageManager()Landroid/content/pm/IPackageManager;
 
     move-result-object v3
@@ -3364,13 +3492,13 @@
     move-result v7
 
     invoke-interface {v3, v5, v6, v7}, Landroid/content/pm/IPackageManager;->setPackageStoppedState(Ljava/lang/String;ZI)V
-    :try_end_541
-    .catchall {:try_start_529 .. :try_end_541} :catchall_69
-    .catch Landroid/os/RemoteException; {:try_start_529 .. :try_end_541} :catch_671
-    .catch Ljava/lang/IllegalArgumentException; {:try_start_529 .. :try_end_541} :catch_573
+    :try_end_54a
+    .catchall {:try_start_532 .. :try_end_54a} :catchall_69
+    .catch Landroid/os/RemoteException; {:try_start_532 .. :try_end_54a} :catch_67a
+    .catch Ljava/lang/IllegalArgumentException; {:try_start_532 .. :try_end_54a} :catch_57c
 
-    :goto_541
-    :try_start_541
+    :goto_54a
+    :try_start_54a
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastQueue;->mService:Lcom/android/server/am/ActivityManagerService;
@@ -3387,15 +3515,15 @@
 
     move-result-object v13
 
-    if-eqz v13, :cond_5bc
+    if-eqz v13, :cond_5c5
 
     iget-object v3, v13, Lcom/android/server/am/ProcessRecord;->thread:Landroid/app/IApplicationThread;
-    :try_end_555
-    .catchall {:try_start_541 .. :try_end_555} :catchall_69
+    :try_end_55e
+    .catchall {:try_start_54a .. :try_end_55e} :catchall_69
 
-    if-eqz v3, :cond_5bc
+    if-eqz v3, :cond_5c5
 
-    :try_start_557
+    :try_start_560
     move-object/from16 v0, v18
 
     iget-object v3, v0, Landroid/content/pm/ResolveInfo;->activityInfo:Landroid/content/pm/ActivityInfo;
@@ -3409,16 +3537,16 @@
     move-object/from16 v1, v27
 
     invoke-direct {v0, v1, v13}, Lcom/android/server/am/BroadcastQueue;->processCurBroadcastLocked(Lcom/android/server/am/BroadcastRecord;Lcom/android/server/am/ProcessRecord;)V
-    :try_end_567
-    .catchall {:try_start_557 .. :try_end_567} :catchall_69
-    .catch Landroid/os/RemoteException; {:try_start_557 .. :try_end_567} :catch_59f
+    :try_end_570
+    .catchall {:try_start_560 .. :try_end_570} :catchall_69
+    .catch Landroid/os/RemoteException; {:try_start_560 .. :try_end_570} :catch_5a8
 
-    :try_start_567
+    :try_start_570
     monitor-exit v34
 
     goto/16 :goto_93
 
-    :cond_56a
+    :cond_573
     move-object/from16 v0, v27
 
     iget v3, v0, Lcom/android/server/am/BroadcastRecord;->callingUid:I
@@ -3427,9 +3555,9 @@
 
     move-result v31
 
-    goto :goto_50f
+    goto :goto_518
 
-    :catch_573
+    :catch_57c
     move-exception v14
 
     const-string v3, "BroadcastQueue"
@@ -3472,9 +3600,9 @@
 
     invoke-static {v3, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
 
-    goto :goto_541
+    goto :goto_54a
 
-    :catch_59f
+    :catch_5a8
     move-exception v14
 
     const-string v3, "BroadcastQueue"
@@ -3503,7 +3631,7 @@
 
     invoke-static {v3, v5, v14}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    :cond_5bc
+    :cond_5c5
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/am/BroadcastQueue;->mService:Lcom/android/server/am/ActivityManagerService;
@@ -3544,11 +3672,11 @@
 
     and-int/2addr v10, v11
 
-    if-eqz v10, :cond_660
+    if-eqz v10, :cond_669
 
     const/4 v10, 0x1
 
-    :goto_5e5
+    :goto_5ee
     const/4 v11, 0x0
 
     invoke-virtual/range {v3 .. v11}, Lcom/android/server/am/ActivityManagerService;->startProcessLocked(Ljava/lang/String;Landroid/content/pm/ApplicationInfo;ZILjava/lang/String;Landroid/content/ComponentName;ZZ)Lcom/android/server/am/ProcessRecord;
@@ -3559,7 +3687,7 @@
 
     iput-object v3, v0, Lcom/android/server/am/BroadcastRecord;->curApp:Lcom/android/server/am/ProcessRecord;
 
-    if-nez v3, :cond_662
+    if-nez v3, :cond_66b
 
     const-string v3, "BroadcastQueue"
 
@@ -3671,12 +3799,12 @@
 
     goto/16 :goto_93
 
-    :cond_660
+    :cond_669
     const/4 v10, 0x0
 
-    goto :goto_5e5
+    goto :goto_5ee
 
-    :cond_662
+    :cond_66b
     move-object/from16 v0, v27
 
     move-object/from16 v1, p0
@@ -3690,15 +3818,15 @@
     iput v0, v1, Lcom/android/server/am/BroadcastQueue;->mPendingBroadcastRecvIndex:I
 
     monitor-exit v34
-    :try_end_66f
-    .catchall {:try_start_567 .. :try_end_66f} :catchall_69
+    :try_end_678
+    .catchall {:try_start_570 .. :try_end_678} :catchall_69
 
     goto/16 :goto_93
 
-    :catch_671
+    :catch_67a
     move-exception v3
 
-    goto/16 :goto_541
+    goto/16 :goto_54a
 .end method
 
 .method public final replaceOrderedBroadcastLocked(Lcom/android/server/am/BroadcastRecord;)Z
@@ -3957,6 +4085,14 @@
     return-void
 .end method
 
+.method public setContext(Landroid/content/Context;)V
+    .registers 2
+
+    iput-object p1, p0, Lcom/android/server/am/BroadcastQueue;->mContext:Landroid/content/Context;
+
+    return-void
+.end method
+
 .method public skipCurrentReceiverLocked(Lcom/android/server/am/ProcessRecord;)V
     .registers 10
 
diff -Npru stock-services/smali/com/android/server/am/FactoryErrorDialog.smali pdroid-services/smali/com/android/server/am/FactoryErrorDialog.smali
--- stock-services/smali/com/android/server/am/FactoryErrorDialog.smali	2012-09-01 16:59:51.174750209 -0500
+++ pdroid-services/smali/com/android/server/am/FactoryErrorDialog.smali	2012-09-01 17:00:07.866832986 -0500
@@ -23,7 +23,7 @@
 
     invoke-virtual {p0, v3}, Lcom/android/server/am/FactoryErrorDialog;->setCancelable(Z)V
 
-    const v0, 0x104035e
+    const v0, 0x104035c
 
     invoke-virtual {p1, v0}, Landroid/content/Context;->getText(I)Ljava/lang/CharSequence;
 
@@ -35,7 +35,7 @@
 
     const/4 v0, -0x1
 
-    const v1, 0x1040361
+    const v1, 0x104035f
 
     invoke-virtual {p1, v1}, Landroid/content/Context;->getText(I)Ljava/lang/CharSequence;
 
diff -Npru stock-services/smali/com/android/server/connectivity/Tethering.smali pdroid-services/smali/com/android/server/connectivity/Tethering.smali
--- stock-services/smali/com/android/server/connectivity/Tethering.smali	2012-09-01 16:59:51.254750609 -0500
+++ pdroid-services/smali/com/android/server/connectivity/Tethering.smali	2012-09-01 17:00:07.910833211 -0500
@@ -342,7 +342,7 @@
 
     move-result-object v1
 
-    const v2, 0x1070023
+    const v2, 0x1070022
 
     invoke-virtual {v1, v2}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
@@ -3027,7 +3027,7 @@
 
     move-result-object v9
 
-    const v10, 0x107001f
+    const v10, 0x107001e
 
     invoke-virtual {v9, v10}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
@@ -3039,7 +3039,7 @@
 
     move-result-object v9
 
-    const v10, 0x1070020
+    const v10, 0x107001f
 
     invoke-virtual {v9, v10}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
@@ -3051,7 +3051,7 @@
 
     move-result-object v9
 
-    const v10, 0x1070022
+    const v10, 0x1070021
 
     invoke-virtual {v9, v10}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
@@ -3063,7 +3063,7 @@
 
     move-result-object v9
 
-    const v10, 0x1070025
+    const v10, 0x1070024
 
     invoke-virtual {v9, v10}, Landroid/content/res/Resources;->getIntArray(I)[I
 
diff -Npru stock-services/smali/com/android/server/ConnectivityService.smali pdroid-services/smali/com/android/server/ConnectivityService.smali
--- stock-services/smali/com/android/server/ConnectivityService.smali	2012-09-01 16:59:49.746743130 -0500
+++ pdroid-services/smali/com/android/server/ConnectivityService.smali	2012-09-01 17:00:05.554821520 -0500
@@ -610,7 +610,7 @@
 
     move-result-object v2
 
-    const v3, 0x107001d
+    const v3, 0x107001c
 
     invoke-virtual {v2, v3}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
@@ -800,7 +800,7 @@
 
     move-result-object v2
 
-    const v3, 0x107001b
+    const v3, 0x107001a
 
     invoke-virtual {v2, v3}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
@@ -1010,7 +1010,7 @@
 
     move-result-object v2
 
-    const v3, 0x107001c
+    const v3, 0x107001b
 
     invoke-virtual {v2, v3}, Landroid/content/res/Resources;->getIntArray(I)[I
 
diff -Npru stock-services/smali/com/android/server/net/NetworkPolicyManagerService.smali pdroid-services/smali/com/android/server/net/NetworkPolicyManagerService.smali
--- stock-services/smali/com/android/server/net/NetworkPolicyManagerService.smali	2012-09-01 16:59:51.434751497 -0500
+++ pdroid-services/smali/com/android/server/net/NetworkPolicyManagerService.smali	2012-09-01 17:00:08.066833973 -0500
@@ -1133,13 +1133,13 @@
     return-void
 
     :pswitch_40
-    const v1, 0x10404fe
+    const v1, 0x10404fd
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
     move-result-object v14
 
-    const v1, 0x10404ff
+    const v1, 0x10404fe
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getString(I)Ljava/lang/String;
 
@@ -1202,7 +1202,7 @@
     goto :goto_21
 
     :pswitch_8a
-    const v1, 0x1040504
+    const v1, 0x1040503
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -1260,7 +1260,7 @@
     goto/16 :goto_21
 
     :pswitch_c8
-    const v1, 0x1040500
+    const v1, 0x10404ff
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -1269,7 +1269,7 @@
     goto :goto_9d
 
     :pswitch_d0
-    const v1, 0x1040501
+    const v1, 0x1040500
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -1278,7 +1278,7 @@
     goto :goto_9d
 
     :pswitch_d8
-    const v1, 0x1040502
+    const v1, 0x1040501
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -1287,7 +1287,7 @@
     goto :goto_9d
 
     :pswitch_e0
-    const v1, 0x1040503
+    const v1, 0x1040502
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -1302,7 +1302,7 @@
 
     sub-long v10, p3, v4
 
-    const v1, 0x1040509
+    const v1, 0x1040508
 
     const/4 v4, 0x1
 
@@ -1380,7 +1380,7 @@
     goto/16 :goto_21
 
     :pswitch_13e
-    const v1, 0x1040505
+    const v1, 0x1040504
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -1389,7 +1389,7 @@
     goto :goto_113
 
     :pswitch_146
-    const v1, 0x1040506
+    const v1, 0x1040505
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -1398,7 +1398,7 @@
     goto :goto_113
 
     :pswitch_14e
-    const v1, 0x1040507
+    const v1, 0x1040506
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -1407,7 +1407,7 @@
     goto :goto_113
 
     :pswitch_156
-    const v1, 0x1040508
+    const v1, 0x1040507
 
     invoke-virtual {v12, v1}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
@@ -1465,13 +1465,13 @@
 
     invoke-direct {v7, v0}, Landroid/app/Notification$Builder;-><init>(Landroid/content/Context;)V
 
-    const v0, 0x104050a
+    const v0, 0x1040509
 
     invoke-virtual {v9, v0}, Landroid/content/res/Resources;->getText(I)Ljava/lang/CharSequence;
 
     move-result-object v10
 
-    const v0, 0x104050b
+    const v0, 0x104050a
 
     invoke-virtual {v9, v0}, Landroid/content/res/Resources;->getString(I)Ljava/lang/String;
 
diff -Npru stock-services/smali/com/android/server/pm/ShutdownThread.smali pdroid-services/smali/com/android/server/pm/ShutdownThread.smali
--- stock-services/smali/com/android/server/pm/ShutdownThread.smali	2012-09-01 16:59:51.658752630 -0500
+++ pdroid-services/smali/com/android/server/pm/ShutdownThread.smali	2012-09-01 17:00:08.218834738 -0500
@@ -164,7 +164,7 @@
 
     if-eqz v2, :cond_b8
 
-    const v2, 0x1040143
+    const v2, 0x1040141
 
     invoke-virtual {p0, v2}, Landroid/content/Context;->getText(I)Ljava/lang/CharSequence;
 
@@ -172,7 +172,7 @@
 
     invoke-virtual {v1, v2}, Landroid/app/ProgressDialog;->setTitle(Ljava/lang/CharSequence;)V
 
-    const v2, 0x104014b
+    const v2, 0x1040149
 
     invoke-virtual {p0, v2}, Landroid/content/Context;->getText(I)Ljava/lang/CharSequence;
 
@@ -323,7 +323,7 @@
     throw v2
 
     :cond_b8
-    const v2, 0x1040142
+    const v2, 0x1040140
 
     invoke-virtual {p0, v2}, Landroid/content/Context;->getText(I)Ljava/lang/CharSequence;
 
@@ -331,7 +331,7 @@
 
     invoke-virtual {v1, v2}, Landroid/app/ProgressDialog;->setTitle(Ljava/lang/CharSequence;)V
 
-    const v2, 0x1040150
+    const v2, 0x104014e
 
     invoke-virtual {p0, v2}, Landroid/content/Context;->getText(I)Ljava/lang/CharSequence;
 
@@ -561,7 +561,7 @@
 
     if-eqz v4, :cond_9d
 
-    const v3, 0x1040154
+    const v3, 0x1040152
 
     :goto_29
     const-string v4, "ShutdownThread"
@@ -604,7 +604,7 @@
 
     invoke-direct {v4, p0}, Landroid/app/AlertDialog$Builder;-><init>(Landroid/content/Context;)V
 
-    const v5, 0x1040143
+    const v5, 0x1040141
 
     invoke-virtual {v4, v5}, Landroid/app/AlertDialog$Builder;->setTitle(I)Landroid/app/AlertDialog$Builder;
 
@@ -680,12 +680,12 @@
 
     if-ne v2, v4, :cond_a4
 
-    const v3, 0x1040152
+    const v3, 0x1040150
 
     goto :goto_29
 
     :cond_a4
-    const v3, 0x1040151
+    const v3, 0x104014f
 
     goto :goto_29
 
@@ -698,7 +698,7 @@
 
     if-eqz v4, :cond_cf
 
-    const v4, 0x1040153
+    const v4, 0x1040151
 
     :goto_b4
     invoke-virtual {v5, v4}, Landroid/app/AlertDialog$Builder;->setTitle(I)Landroid/app/AlertDialog$Builder;
@@ -730,7 +730,7 @@
     goto :goto_87
 
     :cond_cf
-    const v4, 0x1040142
+    const v4, 0x1040140
 
     goto :goto_b4
 
diff -Npru stock-services/smali/com/android/server/PowerManagerService$10.smali pdroid-services/smali/com/android/server/PowerManagerService$10.smali
--- stock-services/smali/com/android/server/PowerManagerService$10.smali	2012-09-01 16:59:50.270745739 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$10.smali	2012-09-01 17:00:06.390825677 -0500
@@ -7,8 +7,8 @@
 
 
 # annotations
-.annotation system Ldalvik/annotation/EnclosingClass;
-    value = Lcom/android/server/PowerManagerService;
+.annotation system Ldalvik/annotation/EnclosingMethod;
+    value = Lcom/android/server/PowerManagerService;->reboot(Ljava/lang/String;)V
 .end annotation
 
 .annotation system Ldalvik/annotation/InnerClass;
@@ -20,13 +20,17 @@
 # instance fields
 .field final synthetic this$0:Lcom/android/server/PowerManagerService;
 
+.field final synthetic val$finalReason:Ljava/lang/String;
+
 
 # direct methods
-.method constructor <init>(Lcom/android/server/PowerManagerService;)V
-    .registers 2
+.method constructor <init>(Lcom/android/server/PowerManagerService;Ljava/lang/String;)V
+    .registers 3
 
     iput-object p1, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
 
+    iput-object p2, p0, Lcom/android/server/PowerManagerService$10;->val$finalReason:Ljava/lang/String;
+
     invoke-direct {p0}, Ljava/lang/Object;-><init>()V
 
     return-void
@@ -35,320 +39,34 @@
 
 # virtual methods
 .method public run()V
-    .registers 10
-
-    const/4 v3, 0x1
-
-    const/4 v4, 0x0
-
-    iget-object v5, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLocks:Lcom/android/server/PowerManagerService$LockList;
-    invoke-static {v5}, Lcom/android/server/PowerManagerService;->access$500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$LockList;
-
-    move-result-object v5
-
-    monitor-enter v5
-
-    const/4 v0, 0x0
-
-    :try_start_a
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7000(Lcom/android/server/PowerManagerService;)I
-
-    move-result v6
-
-    if-lez v6, :cond_c1
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #calls: Lcom/android/server/PowerManagerService;->isScreenTurningOffLocked()Z
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7100(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v6
-
-    if-nez v6, :cond_c1
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7200(Lcom/android/server/PowerManagerService;)[I
-
-    move-result-object v6
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterIndex:I
-    invoke-static {v7}, Lcom/android/server/PowerManagerService;->access$7300(Lcom/android/server/PowerManagerService;)I
-
-    move-result v7
-
-    aget v2, v6, v7
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7200(Lcom/android/server/PowerManagerService;)[I
-
-    move-result-object v6
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterIndex:I
-    invoke-static {v7}, Lcom/android/server/PowerManagerService;->access$7300(Lcom/android/server/PowerManagerService;)I
-
-    move-result v7
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$7000(Lcom/android/server/PowerManagerService;)I
+    .registers 4
 
-    move-result v8
+    monitor-enter p0
 
-    aput v8, v6, v7
+    :try_start_1
+    iget-object v0, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
 
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
+    #calls: Lcom/android/server/PowerManagerService;->getUiContext()Landroid/content/Context;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$6800(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
 
-    iget-object v7, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
+    move-result-object v0
 
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterIndex:I
-    invoke-static {v7}, Lcom/android/server/PowerManagerService;->access$7300(Lcom/android/server/PowerManagerService;)I
-
-    move-result v7
-
-    add-int/lit8 v7, v7, 0x1
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$7200(Lcom/android/server/PowerManagerService;)[I
-
-    move-result-object v8
-
-    array-length v8, v8
-
-    rem-int/2addr v7, v8
-
-    #setter for: Lcom/android/server/PowerManagerService;->mLightFilterIndex:I
-    invoke-static {v6, v7}, Lcom/android/server/PowerManagerService;->access$7302(Lcom/android/server/PowerManagerService;I)I
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSampleCounter:I
-    invoke-static {v7}, Lcom/android/server/PowerManagerService;->access$7400(Lcom/android/server/PowerManagerService;)I
-
-    move-result v7
-
-    add-int/lit8 v7, v7, 0x1
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$7200(Lcom/android/server/PowerManagerService;)[I
-
-    move-result-object v8
-
-    array-length v8, v8
-
-    invoke-static {v7, v8}, Ljava/lang/Math;->min(II)I
-
-    move-result v7
-
-    #setter for: Lcom/android/server/PowerManagerService;->mLightFilterSampleCounter:I
-    invoke-static {v6, v7}, Lcom/android/server/PowerManagerService;->access$7402(Lcom/android/server/PowerManagerService;I)I
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSampleCounter:I
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7400(Lcom/android/server/PowerManagerService;)I
-
-    move-result v6
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
-    invoke-static {v7}, Lcom/android/server/PowerManagerService;->access$7200(Lcom/android/server/PowerManagerService;)[I
-
-    move-result-object v7
-
-    array-length v7, v7
-
-    if-ge v6, v7, :cond_79
+    iget-object v1, p0, Lcom/android/server/PowerManagerService$10;->val$finalReason:Ljava/lang/String;
 
     const/4 v2, 0x0
 
-    :cond_79
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-    invoke-static {v7}, Lcom/android/server/PowerManagerService;->access$7000(Lcom/android/server/PowerManagerService;)I
-
-    move-result v7
+    invoke-static {v0, v1, v2}, Lcom/android/server/pm/ShutdownThread;->reboot(Landroid/content/Context;Ljava/lang/String;Z)V
 
-    invoke-static {v6, v7}, Lcom/android/server/PowerManagerService;->access$7512(Lcom/android/server/PowerManagerService;I)I
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    invoke-static {v6, v2}, Lcom/android/server/PowerManagerService;->access$7520(Lcom/android/server/PowerManagerService;I)I
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSum:I
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7500(Lcom/android/server/PowerManagerService;)I
-
-    move-result v6
-
-    int-to-float v6, v6
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSampleCounter:I
-    invoke-static {v7}, Lcom/android/server/PowerManagerService;->access$7400(Lcom/android/server/PowerManagerService;)I
-
-    move-result v7
-
-    int-to-float v7, v7
-
-    div-float/2addr v6, v7
-
-    invoke-static {v6}, Ljava/lang/Math;->round(F)I
-
-    move-result v1
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v6
-
-    float-to-int v6, v6
-
-    if-eq v1, v6, :cond_ab
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    const/4 v7, 0x1
-
-    #calls: Lcom/android/server/PowerManagerService;->lightSensorChangedLocked(IZ)V
-    invoke-static {v6, v1, v7}, Lcom/android/server/PowerManagerService;->access$6900(Lcom/android/server/PowerManagerService;IZ)V
-
-    :cond_ab
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v6
-
-    float-to-int v6, v6
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-    invoke-static {v7}, Lcom/android/server/PowerManagerService;->access$7000(Lcom/android/server/PowerManagerService;)I
-
-    move-result v7
-
-    if-eq v6, v7, :cond_db
-
-    iget-object v3, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    const/4 v4, 0x0
-
-    #setter for: Lcom/android/server/PowerManagerService;->mLightFilterEqualCounter:I
-    invoke-static {v3, v4}, Lcom/android/server/PowerManagerService;->access$7702(Lcom/android/server/PowerManagerService;I)I
-
-    const/4 v0, 0x1
-
-    :cond_c1
-    :goto_c1
-    if-eqz v0, :cond_f3
-
-    iget-object v3, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$4100(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
-
-    move-result-object v3
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterTask:Ljava/lang/Runnable;
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$7800(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
-
-    move-result-object v4
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterInterval:I
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7900(Lcom/android/server/PowerManagerService;)I
-
-    move-result v6
-
-    int-to-long v6, v6
-
-    invoke-virtual {v3, v4, v6, v7}, Landroid/os/Handler;->postDelayed(Ljava/lang/Runnable;J)Z
-
-    :goto_d9
-    monitor-exit v5
+    monitor-exit p0
 
     return-void
 
-    :cond_db
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7708(Lcom/android/server/PowerManagerService;)I
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterEqualCounter:I
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7700(Lcom/android/server/PowerManagerService;)I
-
-    move-result v6
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
-    invoke-static {v7}, Lcom/android/server/PowerManagerService;->access$7200(Lcom/android/server/PowerManagerService;)[I
-
-    move-result-object v7
-
-    array-length v7, v7
-
-    if-ge v6, v7, :cond_f1
-
-    move v0, v3
-
-    :goto_f0
-    goto :goto_c1
-
-    :cond_f1
-    move v0, v4
-
-    goto :goto_f0
-
-    :cond_f3
-    iget-object v3, p0, Lcom/android/server/PowerManagerService$10;->this$0:Lcom/android/server/PowerManagerService;
-
-    #calls: Lcom/android/server/PowerManagerService;->lightFilterStop()V
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$8000(Lcom/android/server/PowerManagerService;)V
-
-    goto :goto_d9
-
-    :catchall_f9
-    move-exception v3
+    :catchall_f
+    move-exception v0
 
-    monitor-exit v5
-    :try_end_fb
-    .catchall {:try_start_a .. :try_end_fb} :catchall_f9
+    monitor-exit p0
+    :try_end_11
+    .catchall {:try_start_1 .. :try_end_11} :catchall_f
 
-    throw v3
+    throw v0
 .end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService$11.smali pdroid-services/smali/com/android/server/PowerManagerService$11.smali
--- stock-services/smali/com/android/server/PowerManagerService$11.smali	2012-09-01 16:59:50.270745739 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$11.smali	2012-09-01 17:00:06.390825677 -0500
@@ -1,14 +1,11 @@
 .class Lcom/android/server/PowerManagerService$11;
-.super Ljava/lang/Object;
+.super Ljava/lang/Thread;
 .source "PowerManagerService.java"
 
-# interfaces
-.implements Ljava/lang/Runnable;
-
 
 # annotations
 .annotation system Ldalvik/annotation/EnclosingMethod;
-    value = Lcom/android/server/PowerManagerService;->reboot(Ljava/lang/String;)V
+    value = Lcom/android/server/PowerManagerService;->crash(Ljava/lang/String;)V
 .end annotation
 
 .annotation system Ldalvik/annotation/InnerClass;
@@ -20,18 +17,18 @@
 # instance fields
 .field final synthetic this$0:Lcom/android/server/PowerManagerService;
 
-.field final synthetic val$finalReason:Ljava/lang/String;
+.field final synthetic val$message:Ljava/lang/String;
 
 
 # direct methods
-.method constructor <init>(Lcom/android/server/PowerManagerService;Ljava/lang/String;)V
-    .registers 3
+.method constructor <init>(Lcom/android/server/PowerManagerService;Ljava/lang/String;Ljava/lang/String;)V
+    .registers 4
 
     iput-object p1, p0, Lcom/android/server/PowerManagerService$11;->this$0:Lcom/android/server/PowerManagerService;
 
-    iput-object p2, p0, Lcom/android/server/PowerManagerService$11;->val$finalReason:Ljava/lang/String;
+    iput-object p3, p0, Lcom/android/server/PowerManagerService$11;->val$message:Ljava/lang/String;
 
-    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
+    invoke-direct {p0, p2}, Ljava/lang/Thread;-><init>(Ljava/lang/String;)V
 
     return-void
 .end method
@@ -39,34 +36,13 @@
 
 # virtual methods
 .method public run()V
-    .registers 4
-
-    monitor-enter p0
-
-    :try_start_1
-    iget-object v0, p0, Lcom/android/server/PowerManagerService$11;->this$0:Lcom/android/server/PowerManagerService;
-
-    #calls: Lcom/android/server/PowerManagerService;->getUiContext()Landroid/content/Context;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$8100(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
-
-    move-result-object v0
-
-    iget-object v1, p0, Lcom/android/server/PowerManagerService$11;->val$finalReason:Ljava/lang/String;
-
-    const/4 v2, 0x0
-
-    invoke-static {v0, v1, v2}, Lcom/android/server/pm/ShutdownThread;->reboot(Landroid/content/Context;Ljava/lang/String;Z)V
-
-    monitor-exit p0
+    .registers 3
 
-    return-void
+    new-instance v0, Ljava/lang/RuntimeException;
 
-    :catchall_f
-    move-exception v0
+    iget-object v1, p0, Lcom/android/server/PowerManagerService$11;->val$message:Ljava/lang/String;
 
-    monitor-exit p0
-    :try_end_11
-    .catchall {:try_start_1 .. :try_end_11} :catchall_f
+    invoke-direct {v0, v1}, Ljava/lang/RuntimeException;-><init>(Ljava/lang/String;)V
 
     throw v0
 .end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService$12.smali pdroid-services/smali/com/android/server/PowerManagerService$12.smali
--- stock-services/smali/com/android/server/PowerManagerService$12.smali	2012-09-01 16:59:50.270745739 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$12.smali	2012-09-01 17:00:06.390825677 -0500
@@ -1,11 +1,14 @@
 .class Lcom/android/server/PowerManagerService$12;
-.super Ljava/lang/Thread;
+.super Ljava/lang/Object;
 .source "PowerManagerService.java"
 
+# interfaces
+.implements Landroid/hardware/SensorEventListener;
+
 
 # annotations
-.annotation system Ldalvik/annotation/EnclosingMethod;
-    value = Lcom/android/server/PowerManagerService;->crash(Ljava/lang/String;)V
+.annotation system Ldalvik/annotation/EnclosingClass;
+    value = Lcom/android/server/PowerManagerService;
 .end annotation
 
 .annotation system Ldalvik/annotation/InnerClass;
@@ -17,32 +20,232 @@
 # instance fields
 .field final synthetic this$0:Lcom/android/server/PowerManagerService;
 
-.field final synthetic val$message:Ljava/lang/String;
-
 
 # direct methods
-.method constructor <init>(Lcom/android/server/PowerManagerService;Ljava/lang/String;Ljava/lang/String;)V
-    .registers 4
+.method constructor <init>(Lcom/android/server/PowerManagerService;)V
+    .registers 2
 
     iput-object p1, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
 
-    iput-object p3, p0, Lcom/android/server/PowerManagerService$12;->val$message:Ljava/lang/String;
-
-    invoke-direct {p0, p2}, Ljava/lang/Thread;-><init>(Ljava/lang/String;)V
+    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
 
     return-void
 .end method
 
 
 # virtual methods
-.method public run()V
+.method public onAccuracyChanged(Landroid/hardware/Sensor;I)V
     .registers 3
 
-    new-instance v0, Ljava/lang/RuntimeException;
+    return-void
+.end method
+
+.method public onSensorChanged(Landroid/hardware/SensorEvent;)V
+    .registers 16
+
+    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J
+
+    move-result-wide v3
+
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #getter for: Lcom/android/server/PowerManagerService;->mLocks:Lcom/android/server/PowerManagerService$LockList;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$LockList;
+
+    move-result-object v9
+
+    monitor-enter v9
+
+    :try_start_b
+    iget-object v8, p1, Landroid/hardware/SensorEvent;->values:[F
+
+    const/4 v10, 0x0
+
+    aget v1, v8, v10
+
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #getter for: Lcom/android/server/PowerManagerService;->mLastProximityEventTime:J
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$7100(Lcom/android/server/PowerManagerService;)J
+
+    move-result-wide v10
+
+    sub-long v6, v3, v10
+
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #setter for: Lcom/android/server/PowerManagerService;->mLastProximityEventTime:J
+    invoke-static {v8, v3, v4}, Lcom/android/server/PowerManagerService;->access$7102(Lcom/android/server/PowerManagerService;J)J
+
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4000(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+
+    move-result-object v8
+
+    iget-object v10, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #getter for: Lcom/android/server/PowerManagerService;->mProximityTask:Ljava/lang/Runnable;
+    invoke-static {v10}, Lcom/android/server/PowerManagerService;->access$7200(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
+
+    move-result-object v10
+
+    invoke-virtual {v8, v10}, Landroid/os/Handler;->removeCallbacks(Ljava/lang/Runnable;)V
+
+    const/4 v5, 0x0
+
+    float-to-double v10, v1
+
+    const-wide/16 v12, 0x0
+
+    cmpl-double v8, v10, v12
+
+    if-ltz v8, :cond_83
+
+    const/high16 v8, 0x40a0
+
+    cmpg-float v8, v1, v8
+
+    if-gez v8, :cond_83
+
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #getter for: Lcom/android/server/PowerManagerService;->mProximitySensor:Landroid/hardware/Sensor;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$7300(Lcom/android/server/PowerManagerService;)Landroid/hardware/Sensor;
+
+    move-result-object v8
+
+    invoke-virtual {v8}, Landroid/hardware/Sensor;->getMaximumRange()F
+
+    move-result v8
+
+    cmpg-float v8, v1, v8
+
+    if-gez v8, :cond_83
+
+    const/4 v0, 0x1
+
+    :goto_49
+    const-wide/16 v10, 0x3e8
+
+    cmp-long v8, v6, v10
+
+    if-gez v8, :cond_87
+
+    iget-object v10, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    if-eqz v0, :cond_85
+
+    const/4 v8, 0x1
+
+    :goto_54
+    #setter for: Lcom/android/server/PowerManagerService;->mProximityPendingValue:I
+    invoke-static {v10, v8}, Lcom/android/server/PowerManagerService;->access$6102(Lcom/android/server/PowerManagerService;I)I
+
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4000(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+
+    move-result-object v8
+
+    iget-object v10, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #getter for: Lcom/android/server/PowerManagerService;->mProximityTask:Ljava/lang/Runnable;
+    invoke-static {v10}, Lcom/android/server/PowerManagerService;->access$7200(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
+
+    move-result-object v10
+
+    const-wide/16 v11, 0x3e8
+
+    sub-long/2addr v11, v6
+
+    invoke-virtual {v8, v10, v11, v12}, Landroid/os/Handler;->postDelayed(Ljava/lang/Runnable;J)Z
+
+    const/4 v5, 0x1
+
+    :goto_6a
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #getter for: Lcom/android/server/PowerManagerService;->mProximityPartialLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$6300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+
+    move-result-object v8
+
+    invoke-virtual {v8}, Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;->isHeld()Z
+
+    move-result v2
+
+    if-nez v2, :cond_96
+
+    if-eqz v5, :cond_96
+
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #getter for: Lcom/android/server/PowerManagerService;->mProximityPartialLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$6300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+
+    move-result-object v8
+
+    invoke-virtual {v8}, Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;->acquire()V
+
+    :cond_81
+    :goto_81
+    monitor-exit v9
+
+    return-void
+
+    :cond_83
+    const/4 v0, 0x0
+
+    goto :goto_49
+
+    :cond_85
+    const/4 v8, 0x0
+
+    goto :goto_54
+
+    :cond_87
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    const/4 v10, -0x1
+
+    #setter for: Lcom/android/server/PowerManagerService;->mProximityPendingValue:I
+    invoke-static {v8, v10}, Lcom/android/server/PowerManagerService;->access$6102(Lcom/android/server/PowerManagerService;I)I
+
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #calls: Lcom/android/server/PowerManagerService;->proximityChangedLocked(Z)V
+    invoke-static {v8, v0}, Lcom/android/server/PowerManagerService;->access$6200(Lcom/android/server/PowerManagerService;Z)V
+
+    goto :goto_6a
+
+    :catchall_93
+    move-exception v8
+
+    monitor-exit v9
+    :try_end_95
+    .catchall {:try_start_b .. :try_end_95} :catchall_93
+
+    throw v8
+
+    :cond_96
+    if-eqz v2, :cond_81
+
+    if-nez v5, :cond_81
+
+    :try_start_9a
+    iget-object v8, p0, Lcom/android/server/PowerManagerService$12;->this$0:Lcom/android/server/PowerManagerService;
+
+    #getter for: Lcom/android/server/PowerManagerService;->mProximityPartialLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$6300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
-    iget-object v1, p0, Lcom/android/server/PowerManagerService$12;->val$message:Ljava/lang/String;
+    move-result-object v8
 
-    invoke-direct {v0, v1}, Ljava/lang/RuntimeException;-><init>(Ljava/lang/String;)V
+    invoke-virtual {v8}, Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;->release()V
+    :try_end_a3
+    .catchall {:try_start_9a .. :try_end_a3} :catchall_93
 
-    throw v0
+    goto :goto_81
 .end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService$13.smali pdroid-services/smali/com/android/server/PowerManagerService$13.smali
--- stock-services/smali/com/android/server/PowerManagerService$13.smali	2012-09-01 16:59:50.274745753 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$13.smali	2012-09-01 17:00:06.390825677 -0500
@@ -41,211 +41,89 @@
 .end method
 
 .method public onSensorChanged(Landroid/hardware/SensorEvent;)V
-    .registers 16
+    .registers 6
 
-    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J
-
-    move-result-wide v3
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
+    iget-object v0, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mLocks:Lcom/android/server/PowerManagerService$LockList;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$LockList;
-
-    move-result-object v9
-
-    monitor-enter v9
-
-    :try_start_b
-    iget-object v8, p1, Landroid/hardware/SensorEvent;->values:[F
-
-    const/4 v10, 0x0
-
-    aget v1, v8, v10
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLastProximityEventTime:J
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$8400(Lcom/android/server/PowerManagerService;)J
-
-    move-result-wide v10
-
-    sub-long v6, v3, v10
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
-
-    #setter for: Lcom/android/server/PowerManagerService;->mLastProximityEventTime:J
-    invoke-static {v8, v3, v4}, Lcom/android/server/PowerManagerService;->access$8402(Lcom/android/server/PowerManagerService;J)J
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4100(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
-
-    move-result-object v8
-
-    iget-object v10, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mProximityTask:Ljava/lang/Runnable;
-    invoke-static {v10}, Lcom/android/server/PowerManagerService;->access$8500(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
-
-    move-result-object v10
-
-    invoke-virtual {v8, v10}, Landroid/os/Handler;->removeCallbacks(Ljava/lang/Runnable;)V
-
-    const/4 v5, 0x0
-
-    float-to-double v10, v1
-
-    const-wide/16 v12, 0x0
-
-    cmpl-double v8, v10, v12
-
-    if-ltz v8, :cond_83
-
-    const/high16 v8, 0x40a0
-
-    cmpg-float v8, v1, v8
-
-    if-gez v8, :cond_83
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$LockList;
 
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
+    move-result-object v1
 
-    #getter for: Lcom/android/server/PowerManagerService;->mProximitySensor:Landroid/hardware/Sensor;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$8600(Lcom/android/server/PowerManagerService;)Landroid/hardware/Sensor;
+    monitor-enter v1
 
-    move-result-object v8
+    :try_start_7
+    iget-object v0, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
 
-    invoke-virtual {v8}, Landroid/hardware/Sensor;->getMaximumRange()F
+    #calls: Lcom/android/server/PowerManagerService;->isScreenTurningOffLocked()Z
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$7400(Lcom/android/server/PowerManagerService;)Z
 
-    move-result v8
+    move-result v0
 
-    cmpg-float v8, v1, v8
+    if-eqz v0, :cond_11
 
-    if-gez v8, :cond_83
+    monitor-exit v1
 
-    const/4 v0, 0x1
-
-    :goto_49
-    const-wide/16 v10, 0x3e8
-
-    cmp-long v8, v6, v10
-
-    if-gez v8, :cond_87
-
-    iget-object v10, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
-
-    if-eqz v0, :cond_85
-
-    const/4 v8, 0x1
-
-    :goto_54
-    #setter for: Lcom/android/server/PowerManagerService;->mProximityPendingValue:I
-    invoke-static {v10, v8}, Lcom/android/server/PowerManagerService;->access$6302(Lcom/android/server/PowerManagerService;I)I
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4100(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
-
-    move-result-object v8
-
-    iget-object v10, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mProximityTask:Ljava/lang/Runnable;
-    invoke-static {v10}, Lcom/android/server/PowerManagerService;->access$8500(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
-
-    move-result-object v10
-
-    const-wide/16 v11, 0x3e8
-
-    sub-long/2addr v11, v6
-
-    invoke-virtual {v8, v10, v11, v12}, Landroid/os/Handler;->postDelayed(Ljava/lang/Runnable;J)Z
-
-    const/4 v5, 0x1
-
-    :goto_6a
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mProximityPartialLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$6500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-
-    move-result-object v8
-
-    invoke-virtual {v8}, Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;->isHeld()Z
-
-    move-result v2
-
-    if-nez v2, :cond_96
-
-    if-eqz v5, :cond_96
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
+    :goto_10
+    return-void
 
-    #getter for: Lcom/android/server/PowerManagerService;->mProximityPartialLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$6500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    :cond_11
+    iget-object v0, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
 
-    move-result-object v8
+    iget-object v2, p1, Landroid/hardware/SensorEvent;->values:[F
 
-    invoke-virtual {v8}, Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;->acquire()V
+    const/4 v3, 0x0
 
-    :cond_81
-    :goto_81
-    monitor-exit v9
+    aget v2, v2, v3
 
-    return-void
+    float-to-int v2, v2
 
-    :cond_83
-    const/4 v0, 0x0
+    iget-object v3, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
 
-    goto :goto_49
+    #getter for: Lcom/android/server/PowerManagerService;->mWaitingForFirstLightSensor:Z
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$7500(Lcom/android/server/PowerManagerService;)Z
 
-    :cond_85
-    const/4 v8, 0x0
+    move-result v3
 
-    goto :goto_54
+    #calls: Lcom/android/server/PowerManagerService;->handleLightSensorValue(IZ)V
+    invoke-static {v0, v2, v3}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;IZ)V
 
-    :cond_87
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
+    iget-object v0, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
 
-    const/4 v10, -0x1
+    #getter for: Lcom/android/server/PowerManagerService;->mWaitingForFirstLightSensor:Z
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$7500(Lcom/android/server/PowerManagerService;)Z
 
-    #setter for: Lcom/android/server/PowerManagerService;->mProximityPendingValue:I
-    invoke-static {v8, v10}, Lcom/android/server/PowerManagerService;->access$6302(Lcom/android/server/PowerManagerService;I)I
+    move-result v0
 
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
+    if-eqz v0, :cond_38
 
-    #calls: Lcom/android/server/PowerManagerService;->proximityChangedLocked(Z)V
-    invoke-static {v8, v0}, Lcom/android/server/PowerManagerService;->access$6400(Lcom/android/server/PowerManagerService;Z)V
+    iget-object v0, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
 
-    goto :goto_6a
+    #getter for: Lcom/android/server/PowerManagerService;->mPreparingForScreenOn:Z
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3100(Lcom/android/server/PowerManagerService;)Z
 
-    :catchall_93
-    move-exception v8
+    move-result v0
 
-    monitor-exit v9
-    :try_end_95
-    .catchall {:try_start_b .. :try_end_95} :catchall_93
+    if-nez v0, :cond_38
 
-    throw v8
+    iget-object v0, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
 
-    :cond_96
-    if-eqz v2, :cond_81
+    const/4 v2, 0x0
 
-    if-nez v5, :cond_81
+    #setter for: Lcom/android/server/PowerManagerService;->mWaitingForFirstLightSensor:Z
+    invoke-static {v0, v2}, Lcom/android/server/PowerManagerService;->access$7502(Lcom/android/server/PowerManagerService;Z)Z
 
-    :try_start_9a
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$13;->this$0:Lcom/android/server/PowerManagerService;
+    :cond_38
+    monitor-exit v1
 
-    #getter for: Lcom/android/server/PowerManagerService;->mProximityPartialLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$6500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    goto :goto_10
 
-    move-result-object v8
+    :catchall_3a
+    move-exception v0
 
-    invoke-virtual {v8}, Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;->release()V
-    :try_end_a3
-    .catchall {:try_start_9a .. :try_end_a3} :catchall_93
+    monitor-exit v1
+    :try_end_3c
+    .catchall {:try_start_7 .. :try_end_3c} :catchall_3a
 
-    goto :goto_81
+    throw v0
 .end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService$14.smali pdroid-services/smali/com/android/server/PowerManagerService$14.smali
--- stock-services/smali/com/android/server/PowerManagerService$14.smali	2012-09-01 16:59:50.278745767 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$14.smali	1969-12-31 18:00:00.000000000 -0600
@@ -1,547 +0,0 @@
-.class Lcom/android/server/PowerManagerService$14;
-.super Ljava/lang/Object;
-.source "PowerManagerService.java"
-
-# interfaces
-.implements Landroid/hardware/SensorEventListener;
-
-
-# annotations
-.annotation system Ldalvik/annotation/EnclosingClass;
-    value = Lcom/android/server/PowerManagerService;
-.end annotation
-
-.annotation system Ldalvik/annotation/InnerClass;
-    accessFlags = 0x0
-    name = null
-.end annotation
-
-
-# instance fields
-.field final synthetic this$0:Lcom/android/server/PowerManagerService;
-
-
-# direct methods
-.method constructor <init>(Lcom/android/server/PowerManagerService;)V
-    .registers 2
-
-    iput-object p1, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
-
-    return-void
-.end method
-
-
-# virtual methods
-.method public onAccuracyChanged(Landroid/hardware/Sensor;I)V
-    .registers 3
-
-    return-void
-.end method
-
-.method public onSensorChanged(Landroid/hardware/SensorEvent;)V
-    .registers 14
-
-    const/4 v11, -0x1
-
-    const/high16 v10, -0x4080
-
-    const/4 v4, 0x1
-
-    const/4 v5, 0x0
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLocks:Lcom/android/server/PowerManagerService$LockList;
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$LockList;
-
-    move-result-object v7
-
-    monitor-enter v7
-
-    :try_start_c
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #calls: Lcom/android/server/PowerManagerService;->isScreenTurningOffLocked()Z
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7100(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v6
-
-    if-eqz v6, :cond_16
-
-    monitor-exit v7
-
-    :goto_15
-    return-void
-
-    :cond_16
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    iget-object v8, p1, Landroid/hardware/SensorEvent;->values:[F
-
-    const/4 v9, 0x0
-
-    aget v8, v8, v9
-
-    float-to-int v8, v8
-
-    iget-object v9, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mWaitingForFirstLightSensor:Z
-    invoke-static {v9}, Lcom/android/server/PowerManagerService;->access$8700(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v9
-
-    #calls: Lcom/android/server/PowerManagerService;->handleLightSensorValue(IZ)V
-    invoke-static {v6, v8, v9}, Lcom/android/server/PowerManagerService;->access$8800(Lcom/android/server/PowerManagerService;IZ)V
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mWaitingForFirstLightSensor:Z
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$8700(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v6
-
-    if-eqz v6, :cond_3d
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mPreparingForScreenOn:Z
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$3200(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v6
-
-    if-nez v6, :cond_3d
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    const/4 v8, 0x0
-
-    #setter for: Lcom/android/server/PowerManagerService;->mWaitingForFirstLightSensor:Z
-    invoke-static {v6, v8}, Lcom/android/server/PowerManagerService;->access$8702(Lcom/android/server/PowerManagerService;Z)Z
-
-    :cond_3d
-    iget-object v6, p1, Landroid/hardware/SensorEvent;->values:[F
-
-    const/4 v8, 0x0
-
-    aget v6, v6, v8
-
-    float-to-int v3, v6
-
-    invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J
-
-    move-result-wide v1
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$4100(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
-
-    move-result-object v6
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mAutoBrightnessTask:Ljava/lang/Runnable;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$8900(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
-
-    move-result-object v8
-
-    invoke-virtual {v6, v8}, Landroid/os/Handler;->removeCallbacks(Ljava/lang/Runnable;)V
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #setter for: Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-    invoke-static {v6, v3}, Lcom/android/server/PowerManagerService;->access$7002(Lcom/android/server/PowerManagerService;I)I
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$4600(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v6
-
-    if-eqz v6, :cond_102
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterEnabled:Z
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$9000(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v6
-
-    if-eqz v6, :cond_102
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterRunning:Z
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$9100(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v4
-
-    if-eqz v4, :cond_ba
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v4
-
-    cmpl-float v4, v4, v10
-
-    if-eqz v4, :cond_ba
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v4
-
-    float-to-int v4, v4
-
-    sub-int v0, v3, v4
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterReset:I
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$9200(Lcom/android/server/PowerManagerService;)I
-
-    move-result v4
-
-    if-eq v4, v11, :cond_b4
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterReset:I
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$9200(Lcom/android/server/PowerManagerService;)I
-
-    move-result v4
-
-    if-le v0, v4, :cond_b4
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v4
-
-    const v5, 0x44bb8000
-
-    cmpg-float v4, v4, v5
-
-    if-gez v4, :cond_b4
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    iget-object v5, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v5}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v5
-
-    int-to-float v6, v0
-
-    const/high16 v8, 0x4000
-
-    div-float/2addr v6, v8
-
-    add-float/2addr v5, v6
-
-    float-to-int v5, v5
-
-    #calls: Lcom/android/server/PowerManagerService;->lightFilterReset(I)V
-    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$9300(Lcom/android/server/PowerManagerService;I)V
-
-    :cond_b4
-    :goto_b4
-    monitor-exit v7
-
-    goto/16 :goto_15
-
-    :catchall_b7
-    move-exception v4
-
-    monitor-exit v7
-    :try_end_b9
-    .catchall {:try_start_c .. :try_end_b9} :catchall_b7
-
-    throw v4
-
-    :cond_ba
-    :try_start_ba
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v4
-
-    cmpl-float v4, v4, v10
-
-    if-eqz v4, :cond_d6
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLastScreenOnTime:J
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$9400(Lcom/android/server/PowerManagerService;)J
-
-    move-result-wide v4
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorWarmupTime:I
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$9500(Lcom/android/server/PowerManagerService;)I
-
-    move-result v6
-
-    int-to-long v8, v6
-
-    add-long/2addr v4, v8
-
-    cmp-long v4, v1, v4
-
-    if-gez v4, :cond_e2
-
-    :cond_d6
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    const/4 v5, -0x1
-
-    #calls: Lcom/android/server/PowerManagerService;->lightFilterReset(I)V
-    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$9300(Lcom/android/server/PowerManagerService;I)V
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    const/4 v5, 0x1
-
-    #calls: Lcom/android/server/PowerManagerService;->lightSensorChangedLocked(IZ)V
-    invoke-static {v4, v3, v5}, Lcom/android/server/PowerManagerService;->access$6900(Lcom/android/server/PowerManagerService;IZ)V
-
-    :cond_e2
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterRunning:Z
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$9100(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v4
-
-    if-nez v4, :cond_b4
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    const/4 v5, 0x1
-
-    #setter for: Lcom/android/server/PowerManagerService;->mLightFilterRunning:Z
-    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$9102(Lcom/android/server/PowerManagerService;Z)Z
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$4100(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
-
-    move-result-object v4
-
-    iget-object v5, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightFilterTask:Ljava/lang/Runnable;
-    invoke-static {v5}, Lcom/android/server/PowerManagerService;->access$7800(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
-
-    move-result-object v5
-
-    const-wide/16 v8, 0x7d0
-
-    invoke-virtual {v4, v5, v8, v9}, Landroid/os/Handler;->postDelayed(Ljava/lang/Runnable;J)Z
-
-    goto :goto_b4
-
-    :cond_102
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v6
-
-    int-to-float v8, v3
-
-    cmpl-float v6, v6, v8
-
-    if-eqz v6, :cond_18e
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v6
-
-    cmpl-float v6, v6, v10
-
-    if-eqz v6, :cond_129
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLastScreenOnTime:J
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$9400(Lcom/android/server/PowerManagerService;)J
-
-    move-result-wide v8
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorWarmupTime:I
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$9500(Lcom/android/server/PowerManagerService;)I
-
-    move-result v6
-
-    int-to-long v10, v6
-
-    add-long/2addr v8, v10
-
-    cmp-long v6, v1, v8
-
-    if-gez v6, :cond_132
-
-    :cond_129
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    const/4 v5, 0x1
-
-    #calls: Lcom/android/server/PowerManagerService;->lightSensorChangedLocked(IZ)V
-    invoke-static {v4, v3, v5}, Lcom/android/server/PowerManagerService;->access$6900(Lcom/android/server/PowerManagerService;IZ)V
-
-    :cond_12f
-    :goto_12f
-    monitor-exit v7
-
-    goto/16 :goto_15
-
-    :cond_132
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$4100(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
-
-    move-result-object v6
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mAutoBrightnessTask:Ljava/lang/Runnable;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$8900(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
-
-    move-result-object v8
-
-    invoke-virtual {v6, v8}, Landroid/os/Handler;->removeCallbacks(Ljava/lang/Runnable;)V
-
-    iget-object v8, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    int-to-float v6, v3
-
-    iget-object v9, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v9}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v9
-
-    cmpg-float v6, v6, v9
-
-    if-gez v6, :cond_18a
-
-    move v6, v4
-
-    :goto_14f
-    #setter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingDecrease:Z
-    invoke-static {v8, v6}, Lcom/android/server/PowerManagerService;->access$6602(Lcom/android/server/PowerManagerService;Z)Z
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    int-to-float v8, v3
-
-    iget-object v9, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-    invoke-static {v9}, Lcom/android/server/PowerManagerService;->access$7600(Lcom/android/server/PowerManagerService;)F
-
-    move-result v9
-
-    cmpl-float v8, v8, v9
-
-    if-lez v8, :cond_18c
-
-    :goto_15f
-    #setter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingIncrease:Z
-    invoke-static {v6, v4}, Lcom/android/server/PowerManagerService;->access$6702(Lcom/android/server/PowerManagerService;Z)Z
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingDecrease:Z
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$6600(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v4
-
-    if-nez v4, :cond_172
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingIncrease:Z
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$6700(Lcom/android/server/PowerManagerService;)Z
-
-    move-result v4
-
-    if-eqz v4, :cond_12f
-
-    :cond_172
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    int-to-float v5, v3
-
-    #setter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingValue:F
-    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$6802(Lcom/android/server/PowerManagerService;F)F
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$4100(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
-
-    move-result-object v4
-
-    iget-object v5, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mAutoBrightnessTask:Ljava/lang/Runnable;
-    invoke-static {v5}, Lcom/android/server/PowerManagerService;->access$8900(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
-
-    move-result-object v5
-
-    const-wide/16 v8, 0x7d0
-
-    invoke-virtual {v4, v5, v8, v9}, Landroid/os/Handler;->postDelayed(Ljava/lang/Runnable;J)Z
-
-    goto :goto_12f
-
-    :cond_18a
-    move v6, v5
-
-    goto :goto_14f
-
-    :cond_18c
-    move v4, v5
-
-    goto :goto_15f
-
-    :cond_18e
-    iget-object v4, p0, Lcom/android/server/PowerManagerService$14;->this$0:Lcom/android/server/PowerManagerService;
-
-    int-to-float v5, v3
-
-    #setter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingValue:F
-    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$6802(Lcom/android/server/PowerManagerService;F)F
-    :try_end_194
-    .catchall {:try_start_ba .. :try_end_194} :catchall_b7
-
-    goto :goto_12f
-.end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService$2.smali pdroid-services/smali/com/android/server/PowerManagerService$2.smali
--- stock-services/smali/com/android/server/PowerManagerService$2.smali	2012-09-01 16:59:50.278745767 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$2.smali	2012-09-01 17:00:06.402825719 -0500
@@ -37,7 +37,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$2;->this$0:Lcom/android/server/PowerManagerService;
 
     #calls: Lcom/android/server/PowerManagerService;->updateSettingsValues()V
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$2600(Lcom/android/server/PowerManagerService;)V
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$2500(Lcom/android/server/PowerManagerService;)V
 
     return-void
 .end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService$3.smali pdroid-services/smali/com/android/server/PowerManagerService$3.smali
--- stock-services/smali/com/android/server/PowerManagerService$3.smali	2012-09-01 16:59:50.278745767 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$3.smali	2012-09-01 17:00:06.402825719 -0500
@@ -50,7 +50,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$3;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mPreparingForScreenOn:Z
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3200(Lcom/android/server/PowerManagerService;)Z
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3100(Lcom/android/server/PowerManagerService;)Z
 
     move-result v0
 
@@ -61,7 +61,7 @@
     const/4 v2, 0x0
 
     #setter for: Lcom/android/server/PowerManagerService;->mPreparingForScreenOn:Z
-    invoke-static {v0, v2}, Lcom/android/server/PowerManagerService;->access$3202(Lcom/android/server/PowerManagerService;Z)Z
+    invoke-static {v0, v2}, Lcom/android/server/PowerManagerService;->access$3102(Lcom/android/server/PowerManagerService;Z)Z
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService$3;->this$0:Lcom/android/server/PowerManagerService;
 
@@ -75,7 +75,7 @@
     const/4 v3, 0x1
 
     #calls: Lcom/android/server/PowerManagerService;->updateLightsLocked(II)V
-    invoke-static {v0, v2, v3}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;II)V
+    invoke-static {v0, v2, v3}, Lcom/android/server/PowerManagerService;->access$3200(Lcom/android/server/PowerManagerService;II)V
 
     const/16 v0, 0xaa7
 
@@ -98,7 +98,7 @@
     iget-object v4, p0, Lcom/android/server/PowerManagerService$3;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v4
 
@@ -115,7 +115,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$3;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v0
 
diff -Npru stock-services/smali/com/android/server/PowerManagerService$4.smali pdroid-services/smali/com/android/server/PowerManagerService$4.smali
--- stock-services/smali/com/android/server/PowerManagerService$4.smali	2012-09-01 16:59:50.282745786 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$4.smali	2012-09-01 17:00:06.414825787 -0500
@@ -59,7 +59,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastQueue:[I
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3500(Lcom/android/server/PowerManagerService;)[I
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)[I
 
     move-result-object v0
 
@@ -70,7 +70,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWhy:[I
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3600(Lcom/android/server/PowerManagerService;)[I
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3500(Lcom/android/server/PowerManagerService;)[I
 
     move-result-object v0
 
@@ -86,14 +86,14 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastQueue:[I
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3500(Lcom/android/server/PowerManagerService;)[I
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)[I
 
     move-result-object v0
 
     iget-object v3, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastQueue:[I
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$3500(Lcom/android/server/PowerManagerService;)[I
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)[I
 
     move-result-object v3
 
@@ -106,14 +106,14 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWhy:[I
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3600(Lcom/android/server/PowerManagerService;)[I
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3500(Lcom/android/server/PowerManagerService;)[I
 
     move-result-object v0
 
     iget-object v3, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWhy:[I
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$3600(Lcom/android/server/PowerManagerService;)[I
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$3500(Lcom/android/server/PowerManagerService;)[I
 
     move-result-object v3
 
@@ -139,7 +139,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mPreparingForScreenOn:Z
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3200(Lcom/android/server/PowerManagerService;)Z
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3100(Lcom/android/server/PowerManagerService;)Z
 
     move-result v0
 
@@ -150,12 +150,12 @@
     const/4 v3, 0x1
 
     #setter for: Lcom/android/server/PowerManagerService;->mPreparingForScreenOn:Z
-    invoke-static {v0, v3}, Lcom/android/server/PowerManagerService;->access$3202(Lcom/android/server/PowerManagerService;Z)Z
+    invoke-static {v0, v3}, Lcom/android/server/PowerManagerService;->access$3102(Lcom/android/server/PowerManagerService;Z)Z
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v0
 
@@ -166,7 +166,7 @@
     iget-object v3, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v3
 
@@ -192,7 +192,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenOnListener:Landroid/view/WindowManagerPolicy$ScreenOnListener;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3700(Lcom/android/server/PowerManagerService;)Landroid/view/WindowManagerPolicy$ScreenOnListener;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3600(Lcom/android/server/PowerManagerService;)Landroid/view/WindowManagerPolicy$ScreenOnListener;
 
     move-result-object v0
 
@@ -211,7 +211,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mContext:Landroid/content/Context;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3800(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3700(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
 
     move-result-object v0
 
@@ -226,28 +226,28 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mContext:Landroid/content/Context;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3800(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3700(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
 
     move-result-object v0
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenOnIntent:Landroid/content/Intent;
-    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$3900(Lcom/android/server/PowerManagerService;)Landroid/content/Intent;
+    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$3800(Lcom/android/server/PowerManagerService;)Landroid/content/Intent;
 
     move-result-object v1
 
     iget-object v3, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenOnBroadcastDone:Landroid/content/BroadcastReceiver;
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$4000(Lcom/android/server/PowerManagerService;)Landroid/content/BroadcastReceiver;
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$3900(Lcom/android/server/PowerManagerService;)Landroid/content/BroadcastReceiver;
 
     move-result-object v3
 
     iget-object v4, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$4100(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$4000(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
 
     move-result-object v4
 
@@ -301,7 +301,7 @@
     iget-object v6, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v6
 
@@ -318,7 +318,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v0
 
@@ -363,7 +363,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mContext:Landroid/content/Context;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3800(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3700(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
 
     move-result-object v0
 
@@ -378,28 +378,28 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mContext:Landroid/content/Context;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3800(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3700(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
 
     move-result-object v0
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenOffIntent:Landroid/content/Intent;
-    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$4200(Lcom/android/server/PowerManagerService;)Landroid/content/Intent;
+    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$4100(Lcom/android/server/PowerManagerService;)Landroid/content/Intent;
 
     move-result-object v1
 
     iget-object v3, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenOffBroadcastDone:Landroid/content/BroadcastReceiver;
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$4300(Lcom/android/server/PowerManagerService;)Landroid/content/BroadcastReceiver;
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$4200(Lcom/android/server/PowerManagerService;)Landroid/content/BroadcastReceiver;
 
     move-result-object v3
 
     iget-object v4, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$4100(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$4000(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
 
     move-result-object v4
 
@@ -443,7 +443,7 @@
     iget-object v6, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v6}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v6
 
@@ -469,12 +469,12 @@
     const/4 v4, 0x1
 
     #calls: Lcom/android/server/PowerManagerService;->updateLightsLocked(II)V
-    invoke-static {v0, v3, v4}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;II)V
+    invoke-static {v0, v3, v4}, Lcom/android/server/PowerManagerService;->access$3200(Lcom/android/server/PowerManagerService;II)V
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService$4;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v0
 
diff -Npru stock-services/smali/com/android/server/PowerManagerService$5.smali pdroid-services/smali/com/android/server/PowerManagerService$5.smali
--- stock-services/smali/com/android/server/PowerManagerService$5.smali	2012-09-01 16:59:50.286745808 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$5.smali	2012-09-01 17:00:06.414825787 -0500
@@ -83,7 +83,7 @@
     iget-object v4, p0, Lcom/android/server/PowerManagerService$5;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v4
 
@@ -100,7 +100,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$5;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v0
 
diff -Npru stock-services/smali/com/android/server/PowerManagerService$6.smali pdroid-services/smali/com/android/server/PowerManagerService$6.smali
--- stock-services/smali/com/android/server/PowerManagerService$6.smali	2012-09-01 16:59:50.286745808 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$6.smali	2012-09-01 17:00:06.414825787 -0500
@@ -83,7 +83,7 @@
     iget-object v4, p0, Lcom/android/server/PowerManagerService$6;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v4
 
@@ -100,7 +100,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$6;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v0
 
diff -Npru stock-services/smali/com/android/server/PowerManagerService$7.smali pdroid-services/smali/com/android/server/PowerManagerService$7.smali
--- stock-services/smali/com/android/server/PowerManagerService$7.smali	2012-09-01 16:59:50.286745808 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$7.smali	2012-09-01 17:00:06.418825802 -0500
@@ -40,7 +40,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$7;->this$0:Lcom/android/server/PowerManagerService;
 
     #calls: Lcom/android/server/PowerManagerService;->forceReenableScreen()V
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$4400(Lcom/android/server/PowerManagerService;)V
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$4300(Lcom/android/server/PowerManagerService;)V
 
     return-void
 .end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService$8.smali pdroid-services/smali/com/android/server/PowerManagerService$8.smali
--- stock-services/smali/com/android/server/PowerManagerService$8.smali	2012-09-01 16:59:50.286745808 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$8.smali	2012-09-01 17:00:06.418825802 -0500
@@ -54,7 +54,7 @@
     iget-object v2, p0, Lcom/android/server/PowerManagerService$8;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mProximityPendingValue:I
-    invoke-static {v2}, Lcom/android/server/PowerManagerService;->access$6300(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v2}, Lcom/android/server/PowerManagerService;->access$6100(Lcom/android/server/PowerManagerService;)I
 
     move-result v2
 
@@ -65,7 +65,7 @@
     iget-object v3, p0, Lcom/android/server/PowerManagerService$8;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mProximityPendingValue:I
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$6300(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$6100(Lcom/android/server/PowerManagerService;)I
 
     move-result v3
 
@@ -73,20 +73,20 @@
 
     :goto_1b
     #calls: Lcom/android/server/PowerManagerService;->proximityChangedLocked(Z)V
-    invoke-static {v2, v0}, Lcom/android/server/PowerManagerService;->access$6400(Lcom/android/server/PowerManagerService;Z)V
+    invoke-static {v2, v0}, Lcom/android/server/PowerManagerService;->access$6200(Lcom/android/server/PowerManagerService;Z)V
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService$8;->this$0:Lcom/android/server/PowerManagerService;
 
     const/4 v2, -0x1
 
     #setter for: Lcom/android/server/PowerManagerService;->mProximityPendingValue:I
-    invoke-static {v0, v2}, Lcom/android/server/PowerManagerService;->access$6302(Lcom/android/server/PowerManagerService;I)I
+    invoke-static {v0, v2}, Lcom/android/server/PowerManagerService;->access$6102(Lcom/android/server/PowerManagerService;I)I
 
     :cond_24
     iget-object v0, p0, Lcom/android/server/PowerManagerService$8;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mProximityPartialLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$6500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$6300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v0
 
@@ -99,7 +99,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$8;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mProximityPartialLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$6500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$6300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
 
     move-result-object v0
 
diff -Npru stock-services/smali/com/android/server/PowerManagerService$9.smali pdroid-services/smali/com/android/server/PowerManagerService$9.smali
--- stock-services/smali/com/android/server/PowerManagerService$9.smali	2012-09-01 16:59:50.290745838 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$9.smali	2012-09-01 17:00:06.418825802 -0500
@@ -50,7 +50,7 @@
     iget-object v1, p0, Lcom/android/server/PowerManagerService$9;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingDecrease:Z
-    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$6600(Lcom/android/server/PowerManagerService;)Z
+    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$6400(Lcom/android/server/PowerManagerService;)Z
 
     move-result v1
 
@@ -59,7 +59,7 @@
     iget-object v1, p0, Lcom/android/server/PowerManagerService$9;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingIncrease:Z
-    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$6700(Lcom/android/server/PowerManagerService;)Z
+    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$6500(Lcom/android/server/PowerManagerService;)Z
 
     move-result v1
 
@@ -69,7 +69,7 @@
     iget-object v1, p0, Lcom/android/server/PowerManagerService$9;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingValue:F
-    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$6800(Lcom/android/server/PowerManagerService;)F
+    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$6600(Lcom/android/server/PowerManagerService;)F
 
     move-result v1
 
@@ -80,21 +80,21 @@
     const/4 v3, 0x0
 
     #setter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingDecrease:Z
-    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$6602(Lcom/android/server/PowerManagerService;Z)Z
+    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$6402(Lcom/android/server/PowerManagerService;Z)Z
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService$9;->this$0:Lcom/android/server/PowerManagerService;
 
     const/4 v3, 0x0
 
     #setter for: Lcom/android/server/PowerManagerService;->mLightSensorPendingIncrease:Z
-    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$6702(Lcom/android/server/PowerManagerService;Z)Z
+    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$6502(Lcom/android/server/PowerManagerService;Z)Z
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService$9;->this$0:Lcom/android/server/PowerManagerService;
 
     const/4 v3, 0x0
 
     #calls: Lcom/android/server/PowerManagerService;->lightSensorChangedLocked(IZ)V
-    invoke-static {v1, v0, v3}, Lcom/android/server/PowerManagerService;->access$6900(Lcom/android/server/PowerManagerService;IZ)V
+    invoke-static {v1, v0, v3}, Lcom/android/server/PowerManagerService;->access$6700(Lcom/android/server/PowerManagerService;IZ)V
 
     :cond_30
     monitor-exit v2
diff -Npru stock-services/smali/com/android/server/PowerManagerService$LockList.smali pdroid-services/smali/com/android/server/PowerManagerService$LockList.smali
--- stock-services/smali/com/android/server/PowerManagerService$LockList.smali	2012-09-01 16:59:50.294745853 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$LockList.smali	2012-09-01 17:00:06.422825823 -0500
@@ -94,7 +94,7 @@
     iget v5, v3, Lcom/android/server/PowerManagerService$WakeLock;->flags:I
 
     #calls: Lcom/android/server/PowerManagerService;->isScreenLock(I)Z
-    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$8200(Lcom/android/server/PowerManagerService;I)Z
+    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$6900(Lcom/android/server/PowerManagerService;I)Z
 
     move-result v4
 
@@ -174,7 +174,7 @@
     iget v5, v3, Lcom/android/server/PowerManagerService$WakeLock;->flags:I
 
     #calls: Lcom/android/server/PowerManagerService;->isScreenLock(I)Z
-    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$8200(Lcom/android/server/PowerManagerService;I)Z
+    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$6900(Lcom/android/server/PowerManagerService;I)Z
 
     move-result v4
 
@@ -199,7 +199,7 @@
     const/4 v5, 0x0
 
     #setter for: Lcom/android/server/PowerManagerService;->mProxIgnoredBecauseScreenTurnedOff:Z
-    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$8302(Lcom/android/server/PowerManagerService;Z)Z
+    invoke-static {v4, v5}, Lcom/android/server/PowerManagerService;->access$7002(Lcom/android/server/PowerManagerService;Z)Z
 
     return v2
 .end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService$ScreenBrightnessAnimator$1.smali pdroid-services/smali/com/android/server/PowerManagerService$ScreenBrightnessAnimator$1.smali
--- stock-services/smali/com/android/server/PowerManagerService$ScreenBrightnessAnimator$1.smali	2012-09-01 16:59:50.298745867 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$ScreenBrightnessAnimator$1.smali	2012-09-01 17:00:06.430825866 -0500
@@ -43,22 +43,22 @@
     iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4600(Lcom/android/server/PowerManagerService;)Z
+    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4500(Lcom/android/server/PowerManagerService;)Z
 
     move-result v11
 
-    if-eqz v11, :cond_f0
+    if-eqz v11, :cond_bc
 
     iget-object v11, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator$1;->this$1:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
 
     iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mInitialAnimation:Z
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4700(Lcom/android/server/PowerManagerService;)Z
+    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4600(Lcom/android/server/PowerManagerService;)Z
 
     move-result v11
 
-    if-nez v11, :cond_f0
+    if-nez v11, :cond_bc
 
     move v0, v9
 
@@ -67,7 +67,7 @@
 
     const/16 v12, 0xa
 
-    if-ne v11, v12, :cond_fd
+    if-ne v11, v12, :cond_c8
 
     iget v4, p1, Landroid/os/Message;->arg1:I
 
@@ -86,7 +86,7 @@
     iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mLcdLight:Lcom/android/server/LightsService$Light;
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4800(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
+    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4700(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
 
     move-result-object v11
 
@@ -108,7 +108,7 @@
     iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mButtonLight:Lcom/android/server/LightsService$Light;
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$5000(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
+    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4900(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
 
     move-result-object v12
 
@@ -117,20 +117,20 @@
     iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mLightSensorButtonBrightness:I
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4900(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4800(Lcom/android/server/PowerManagerService;)I
 
     move-result v11
 
-    if-ltz v11, :cond_f3
+    if-ltz v11, :cond_bf
 
-    if-lez v8, :cond_f3
+    if-lez v8, :cond_bf
 
     iget-object v11, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator$1;->this$1:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
 
     iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mLightSensorButtonBrightness:I
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4900(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4800(Lcom/android/server/PowerManagerService;)I
 
     move-result v11
 
@@ -147,7 +147,7 @@
     iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mKeyboardLight:Lcom/android/server/LightsService$Light;
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$5200(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
+    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$5100(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
 
     move-result-object v12
 
@@ -156,20 +156,20 @@
     iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mLightSensorKeyboardBrightness:I
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$5100(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$5000(Lcom/android/server/PowerManagerService;)I
 
     move-result v11
 
-    if-ltz v11, :cond_f6
+    if-ltz v11, :cond_c1
 
-    if-lez v8, :cond_f6
+    if-lez v8, :cond_c1
 
     iget-object v11, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator$1;->this$1:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
 
     iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mLightSensorKeyboardBrightness:I
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$5100(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$5000(Lcom/android/server/PowerManagerService;)I
 
     move-result v11
 
@@ -177,66 +177,11 @@
     invoke-virtual {v12, v11}, Lcom/android/server/LightsService$Light;->setBrightness(I)V
 
     :cond_80
-    and-int/lit8 v11, v4, 0x2
-
-    if-eqz v11, :cond_96
-
-    iget-object v11, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator$1;->this$1:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
-
-    iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mLcdLight:Lcom/android/server/LightsService$Light;
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$4800(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
-
-    move-result-object v11
-
-    invoke-virtual {v11, v8, v0}, Lcom/android/server/LightsService$Light;->setBrightness(II)V
-
-    iget-object v11, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator$1;->this$1:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
-
-    iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
-
-    #setter for: Lcom/android/server/PowerManagerService;->mLastLcdValue:I
-    invoke-static {v11, v8}, Lcom/android/server/PowerManagerService;->access$5302(Lcom/android/server/PowerManagerService;I)I
-
-    :cond_96
-    and-int/lit8 v11, v4, 0x4
-
-    if-eqz v11, :cond_a5
-
-    iget-object v11, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator$1;->this$1:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
-
-    iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mButtonLight:Lcom/android/server/LightsService$Light;
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$5000(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
-
-    move-result-object v11
-
-    invoke-virtual {v11, v8}, Lcom/android/server/LightsService$Light;->setBrightness(I)V
-
-    :cond_a5
-    and-int/lit8 v11, v4, 0x8
-
-    if-eqz v11, :cond_b4
-
-    iget-object v11, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator$1;->this$1:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
-
-    iget-object v11, v11, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
-
-    #getter for: Lcom/android/server/PowerManagerService;->mKeyboardLight:Lcom/android/server/LightsService$Light;
-    invoke-static {v11}, Lcom/android/server/PowerManagerService;->access$5200(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
-
-    move-result-object v11
-
-    invoke-virtual {v11, v8}, Lcom/android/server/LightsService$Light;->setBrightness(I)V
-
-    :cond_b4
     const-wide/16 v11, 0x64
 
     cmp-long v11, v2, v11
 
-    if-lez v11, :cond_dc
+    if-lez v11, :cond_a8
 
     const-string v11, "PowerManagerService"
 
@@ -270,72 +215,72 @@
 
     invoke-static {v11, v12}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;)I
 
-    :cond_dc
+    :cond_a8
     const-wide/16 v11, 0x10
 
     cmp-long v11, v2, v11
 
-    if-gez v11, :cond_f8
+    if-gez v11, :cond_c3
 
     const/16 v1, 0x10
 
-    :goto_e4
+    :goto_b0
     monitor-enter p0
 
-    :try_start_e5
+    :try_start_b1
     iget-object v9, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator$1;->this$1:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
 
     iput v8, v9, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->currentValue:I
 
     monitor-exit p0
-    :try_end_ea
-    .catchall {:try_start_e5 .. :try_end_ea} :catchall_fa
+    :try_end_b6
+    .catchall {:try_start_b1 .. :try_end_b6} :catchall_c5
 
     iget-object v9, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator$1;->this$1:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
 
     #calls: Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->animateInternal(IZI)V
-    invoke-static {v9, v4, v10, v1}, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->access$5400(Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;IZI)V
+    invoke-static {v9, v4, v10, v1}, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->access$5200(Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;IZI)V
 
-    :cond_ef
-    :goto_ef
+    :cond_bb
+    :goto_bb
     return-void
 
-    :cond_f0
+    :cond_bc
     move v0, v10
 
     goto/16 :goto_17
 
-    :cond_f3
+    :cond_bf
     move v11, v8
 
-    goto/16 :goto_5a
+    goto :goto_5a
 
-    :cond_f6
+    :cond_c1
     move v11, v8
 
     goto :goto_7d
 
-    :cond_f8
+    :cond_c3
     move v1, v9
 
-    goto :goto_e4
+    goto :goto_b0
 
-    :catchall_fa
+    :catchall_c5
     move-exception v9
 
-    :try_start_fb
+    :try_start_c6
     monitor-exit p0
-    :try_end_fc
-    .catchall {:try_start_fb .. :try_end_fc} :catchall_fa
+    :try_end_c7
+    .catchall {:try_start_c6 .. :try_end_c7} :catchall_c5
 
     throw v9
 
-    :cond_fd
+    :cond_c8
     iget v9, p1, Landroid/os/Message;->what:I
 
     const/16 v10, 0xb
 
-    if-ne v9, v10, :cond_ef
+    if-ne v9, v10, :cond_bb
 
     iget v5, p1, Landroid/os/Message;->arg1:I
 
@@ -344,7 +289,7 @@
     iget-object v9, v9, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #calls: Lcom/android/server/PowerManagerService;->nativeStartSurfaceFlingerAnimation(I)V
-    invoke-static {v9, v5}, Lcom/android/server/PowerManagerService;->access$5500(Lcom/android/server/PowerManagerService;I)V
+    invoke-static {v9, v5}, Lcom/android/server/PowerManagerService;->access$5300(Lcom/android/server/PowerManagerService;I)V
 
-    goto :goto_ef
+    goto :goto_bb
 .end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService$ScreenBrightnessAnimator.smali pdroid-services/smali/com/android/server/PowerManagerService$ScreenBrightnessAnimator.smali
--- stock-services/smali/com/android/server/PowerManagerService$ScreenBrightnessAnimator.smali	2012-09-01 16:59:50.302745886 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$ScreenBrightnessAnimator.smali	2012-09-01 17:00:06.450825966 -0500
@@ -55,7 +55,7 @@
     return-void
 .end method
 
-.method static synthetic access$5400(Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;IZI)V
+.method static synthetic access$5200(Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;IZI)V
     .registers 4
 
     invoke-direct {p0, p1, p2, p3}, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->animateInternal(IZI)V
@@ -63,7 +63,7 @@
     return-void
 .end method
 
-.method static synthetic access$6200(Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;)I
+.method static synthetic access$6000(Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;)I
     .registers 2
 
     iget v0, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->currentMask:I
@@ -176,7 +176,7 @@
     add-int/2addr v9, v10
 
     #setter for: Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
-    invoke-static {v8, v9}, Lcom/android/server/PowerManagerService;->access$5702(Lcom/android/server/PowerManagerService;I)I
+    invoke-static {v8, v9}, Lcom/android/server/PowerManagerService;->access$5502(Lcom/android/server/PowerManagerService;I)I
 
     :cond_5b
     :goto_5b
@@ -185,7 +185,7 @@
     iget-object v8, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mHeadless:Z
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$5800(Lcom/android/server/PowerManagerService;)Z
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$5600(Lcom/android/server/PowerManagerService;)Z
 
     move-result v8
 
@@ -200,7 +200,7 @@
     iget-object v8, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenOffReason:I
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$5900(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$5700(Lcom/android/server/PowerManagerService;)I
 
     move-result v8
 
@@ -212,7 +212,7 @@
     iget-object v8, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenBrightnessHandler:Landroid/os/Handler;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4500(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4400(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
 
     move-result-object v8
 
@@ -230,7 +230,7 @@
     iget-object v8, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenBrightnessHandler:Landroid/os/Handler;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4500(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4400(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
 
     move-result-object v8
 
@@ -241,7 +241,7 @@
     iget-object v8, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenBrightnessHandler:Landroid/os/Handler;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4500(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4400(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
 
     move-result-object v8
 
@@ -254,7 +254,7 @@
     iget-object v8, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenBrightnessHandler:Landroid/os/Handler;
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4500(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$4400(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
 
     move-result-object v8
 
@@ -280,7 +280,7 @@
     iget v9, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->endSensorValue:I
 
     #setter for: Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
-    invoke-static {v8, v9}, Lcom/android/server/PowerManagerService;->access$5702(Lcom/android/server/PowerManagerService;I)I
+    invoke-static {v8, v9}, Lcom/android/server/PowerManagerService;->access$5502(Lcom/android/server/PowerManagerService;I)I
 
     iget v8, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->endValue:I
 
@@ -291,7 +291,7 @@
     const/4 v9, 0x0
 
     #setter for: Lcom/android/server/PowerManagerService;->mInitialAnimation:Z
-    invoke-static {v8, v9}, Lcom/android/server/PowerManagerService;->access$4702(Lcom/android/server/PowerManagerService;Z)Z
+    invoke-static {v8, v9}, Lcom/android/server/PowerManagerService;->access$4602(Lcom/android/server/PowerManagerService;Z)Z
 
     goto :goto_5b
 
@@ -309,7 +309,7 @@
     iget-object v8, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mAnimationSetting:I
-    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$2100(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v8}, Lcom/android/server/PowerManagerService;->access$2000(Lcom/android/server/PowerManagerService;)I
     :try_end_c5
     .catchall {:try_start_c0 .. :try_end_c5} :catchall_bd
 
@@ -326,7 +326,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$5700(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$5500(Lcom/android/server/PowerManagerService;)I
 
     move-result v0
 
@@ -356,7 +356,7 @@
     iget-object v2, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mButtonLight:Lcom/android/server/LightsService$Light;
-    invoke-static {v2}, Lcom/android/server/PowerManagerService;->access$5000(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
+    invoke-static {v2}, Lcom/android/server/PowerManagerService;->access$4900(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
 
     move-result-object v2
 
@@ -370,7 +370,7 @@
     iget-object v2, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mKeyboardLight:Lcom/android/server/LightsService$Light;
-    invoke-static {v2}, Lcom/android/server/PowerManagerService;->access$5200(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
+    invoke-static {v2}, Lcom/android/server/PowerManagerService;->access$5100(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
 
     move-result-object v2
 
@@ -401,7 +401,7 @@
     iget-object v3, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mInitialAnimation:Z
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$4700(Lcom/android/server/PowerManagerService;)Z
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$4600(Lcom/android/server/PowerManagerService;)Z
 
     move-result v3
 
@@ -416,7 +416,7 @@
     const/4 v4, 0x0
 
     #setter for: Lcom/android/server/PowerManagerService;->mInitialAnimation:Z
-    invoke-static {v3, v4}, Lcom/android/server/PowerManagerService;->access$4702(Lcom/android/server/PowerManagerService;Z)Z
+    invoke-static {v3, v4}, Lcom/android/server/PowerManagerService;->access$4602(Lcom/android/server/PowerManagerService;Z)Z
 
     :cond_42
     iget v3, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->currentValue:I
@@ -428,7 +428,7 @@
     iget-object v3, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$5700(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$5500(Lcom/android/server/PowerManagerService;)I
 
     move-result v3
 
@@ -441,7 +441,7 @@
     iget-object v3, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mWindowScaleAnimation:F
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$2000(Lcom/android/server/PowerManagerService;)F
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$1900(Lcom/android/server/PowerManagerService;)F
 
     move-result v3
 
@@ -482,7 +482,7 @@
     iget-object v2, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenBrightnessHandler:Landroid/os/Handler;
-    invoke-static {v2}, Lcom/android/server/PowerManagerService;->access$4500(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+    invoke-static {v2}, Lcom/android/server/PowerManagerService;->access$4400(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
 
     move-result-object v2
 
@@ -495,12 +495,12 @@
     iget-object v3, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mScreenOffReason:I
-    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$5900(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v3}, Lcom/android/server/PowerManagerService;->access$5700(Lcom/android/server/PowerManagerService;)I
 
     move-result v3
 
     #calls: Lcom/android/server/PowerManagerService;->screenOffFinishedAnimatingLocked(I)I
-    invoke-static {v2, v3}, Lcom/android/server/PowerManagerService;->access$6100(Lcom/android/server/PowerManagerService;I)I
+    invoke-static {v2, v3}, Lcom/android/server/PowerManagerService;->access$5900(Lcom/android/server/PowerManagerService;I)I
 
     const/16 v2, 0xc8
 
@@ -698,7 +698,7 @@
     iget v1, p0, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->currentMask:I
 
     #calls: Lcom/android/server/PowerManagerService;->dumpPowerState(I)Ljava/lang/String;
-    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$6000(I)Ljava/lang/String;
+    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$5800(I)Ljava/lang/String;
 
     move-result-object v1
 
@@ -781,7 +781,7 @@
     invoke-direct {v1, p0}, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator$1;-><init>(Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;)V
 
     #setter for: Lcom/android/server/PowerManagerService;->mScreenBrightnessHandler:Landroid/os/Handler;
-    invoke-static {v0, v1}, Lcom/android/server/PowerManagerService;->access$4502(Lcom/android/server/PowerManagerService;Landroid/os/Handler;)Landroid/os/Handler;
+    invoke-static {v0, v1}, Lcom/android/server/PowerManagerService;->access$4402(Lcom/android/server/PowerManagerService;Landroid/os/Handler;)Landroid/os/Handler;
 
     monitor-enter p0
 
@@ -791,7 +791,7 @@
     const/4 v1, 0x1
 
     #setter for: Lcom/android/server/PowerManagerService;->mInitComplete:Z
-    invoke-static {v0, v1}, Lcom/android/server/PowerManagerService;->access$5602(Lcom/android/server/PowerManagerService;Z)Z
+    invoke-static {v0, v1}, Lcom/android/server/PowerManagerService;->access$5402(Lcom/android/server/PowerManagerService;Z)Z
 
     invoke-virtual {p0}, Ljava/lang/Object;->notifyAll()V
 
diff -Npru stock-services/smali/com/android/server/PowerManagerService$SettingsObserver.smali pdroid-services/smali/com/android/server/PowerManagerService$SettingsObserver.smali
--- stock-services/smali/com/android/server/PowerManagerService$SettingsObserver.smali	2012-09-01 16:59:50.306745908 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$SettingsObserver.smali	2012-09-01 17:00:06.450825966 -0500
@@ -186,11 +186,6 @@
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService$SettingsObserver;->this$0:Lcom/android/server/PowerManagerService;
 
-    #calls: Lcom/android/server/PowerManagerService;->updateLightSettings()V
-    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$1700(Lcom/android/server/PowerManagerService;)V
-
-    iget-object v1, p0, Lcom/android/server/PowerManagerService$SettingsObserver;->this$0:Lcom/android/server/PowerManagerService;
-
     const-string v3, "screen_brightness_mode"
 
     const/4 v4, 0x0
@@ -200,12 +195,12 @@
     move-result v3
 
     #calls: Lcom/android/server/PowerManagerService;->setScreenBrightnessMode(I)V
-    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$1800(Lcom/android/server/PowerManagerService;I)V
+    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$1700(Lcom/android/server/PowerManagerService;I)V
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService$SettingsObserver;->this$0:Lcom/android/server/PowerManagerService;
 
     #calls: Lcom/android/server/PowerManagerService;->setScreenOffTimeoutsLocked()V
-    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$1900(Lcom/android/server/PowerManagerService;)V
+    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$1800(Lcom/android/server/PowerManagerService;)V
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService$SettingsObserver;->this$0:Lcom/android/server/PowerManagerService;
 
@@ -218,7 +213,7 @@
     move-result v3
 
     #setter for: Lcom/android/server/PowerManagerService;->mWindowScaleAnimation:F
-    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$2002(Lcom/android/server/PowerManagerService;F)F
+    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$1902(Lcom/android/server/PowerManagerService;F)F
 
     const-string v1, "transition_animation_scale"
 
@@ -233,41 +228,41 @@
     const/4 v3, 0x0
 
     #setter for: Lcom/android/server/PowerManagerService;->mAnimationSetting:I
-    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$2102(Lcom/android/server/PowerManagerService;I)I
+    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$2002(Lcom/android/server/PowerManagerService;I)I
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService$SettingsObserver;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mWindowScaleAnimation:F
-    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$2000(Lcom/android/server/PowerManagerService;)F
+    invoke-static {v1}, Lcom/android/server/PowerManagerService;->access$1900(Lcom/android/server/PowerManagerService;)F
 
     move-result v1
 
     cmpl-float v1, v1, v5
 
-    if-lez v1, :cond_7c
+    if-lez v1, :cond_77
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService$SettingsObserver;->this$0:Lcom/android/server/PowerManagerService;
 
     const/16 v3, 0x10
 
-    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$2176(Lcom/android/server/PowerManagerService;I)I
+    invoke-static {v1, v3}, Lcom/android/server/PowerManagerService;->access$2076(Lcom/android/server/PowerManagerService;I)I
 
-    :cond_7c
+    :cond_77
     cmpl-float v1, v0, v5
 
-    if-lez v1, :cond_80
+    if-lez v1, :cond_7b
 
-    :cond_80
+    :cond_7b
     monitor-exit v2
 
     return-void
 
-    :catchall_82
+    :catchall_7d
     move-exception v1
 
     monitor-exit v2
-    :try_end_84
-    .catchall {:try_start_9 .. :try_end_84} :catchall_82
+    :try_end_7f
+    .catchall {:try_start_9 .. :try_end_7f} :catchall_7d
 
     throw v1
 .end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService.smali pdroid-services/smali/com/android/server/PowerManagerService.smali
--- stock-services/smali/com/android/server/PowerManagerService.smali	2012-09-01 16:59:50.362746184 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService.smali	2012-09-01 17:00:06.542826420 -0500
@@ -111,8 +111,6 @@
 
 .field private static final TAG:Ljava/lang/String; = "PowerManagerService"
 
-.field private static final TAGF:Ljava/lang/String; = "LightFilter"
-
 .field private static final mDebugLightAnimation:Z
 
 .field private static final mDebugLightSensor:Z
@@ -129,8 +127,6 @@
 
 .field private mActivityService:Landroid/app/IActivityManager;
 
-.field private mAlwaysOnAndDimmed:Z
-
 .field mAnimateScreenLights:Z
 
 .field private mAnimationSetting:I
@@ -165,16 +161,6 @@
 
 .field private mContext:Landroid/content/Context;
 
-.field private mCustomButtonValues:[I
-
-.field private mCustomKeyboardValues:[I
-
-.field private mCustomLcdValues:[I
-
-.field private mCustomLightEnabled:Z
-
-.field private mCustomLightLevels:[I
-
 .field private mDimDelay:I
 
 .field private mDimScreen:Z
@@ -209,14 +195,8 @@
 
 .field private mKeylightDelay:I
 
-.field private mLastButtonValue:I
-
 .field private mLastEventTime:J
 
-.field private mLastKeyboardValue:I
-
-.field private mLastLcdValue:I
-
 .field private mLastProximityEventTime:J
 
 .field private mLastScreenOnTime:J
@@ -227,34 +207,6 @@
 
 .field private mLcdLight:Lcom/android/server/LightsService$Light;
 
-.field private mLightDecrease:Z
-
-.field private mLightFilterEnabled:Z
-
-.field private mLightFilterEqualCounter:I
-
-.field private mLightFilterIndex:I
-
-.field private mLightFilterInterval:I
-
-.field private mLightFilterReset:I
-
-.field private mLightFilterRunning:Z
-
-.field private mLightFilterSample:I
-
-.field private mLightFilterSampleCounter:I
-
-.field private mLightFilterSamples:[I
-
-.field private mLightFilterSum:I
-
-.field private mLightFilterTask:Ljava/lang/Runnable;
-
-.field private mLightFilterWindow:I
-
-.field private mLightHysteresis:F
-
 .field mLightListener:Landroid/hardware/SensorEventListener;
 
 .field private mLightSensor:Landroid/hardware/Sensor;
@@ -279,8 +231,6 @@
 
 .field private mLightSensorWarmupTime:I
 
-.field private mLightSettingsTag:J
-
 .field private mLightsService:Lcom/android/server/LightsService;
 
 .field private final mLocks:Lcom/android/server/PowerManagerService$LockList;
@@ -347,8 +297,6 @@
 
 .field private mScreenBrightnessSetting:I
 
-.field private mScreenDim:I
-
 .field private mScreenOffBroadcastDone:Landroid/content/BroadcastReceiver;
 
 .field private mScreenOffDelay:I
@@ -448,7 +396,7 @@
 
     new-array v2, v3, [I
 
-    fill-array-data v2, :array_fc
+    fill-array-data v2, :array_ea
 
     iput-object v2, p0, Lcom/android/server/PowerManagerService;->mBroadcastQueue:[I
 
@@ -556,16 +504,6 @@
 
     iput v2, p0, Lcom/android/server/PowerManagerService;->mAnimationSetting:I
 
-    const-wide/16 v2, -0x1
-
-    iput-wide v2, p0, Lcom/android/server/PowerManagerService;->mLightSettingsTag:J
-
-    const/16 v2, 0x14
-
-    iput v2, p0, Lcom/android/server/PowerManagerService;->mScreenDim:I
-
-    iput v5, p0, Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-
     new-instance v2, Lcom/android/server/PowerManagerService$3;
 
     invoke-direct {v2, p0}, Lcom/android/server/PowerManagerService$3;-><init>(Lcom/android/server/PowerManagerService;)V
@@ -610,22 +548,16 @@
 
     iput-boolean v6, p0, Lcom/android/server/PowerManagerService;->mInitialAnimation:Z
 
-    new-instance v2, Lcom/android/server/PowerManagerService$10;
+    new-instance v2, Lcom/android/server/PowerManagerService$12;
 
-    invoke-direct {v2, p0}, Lcom/android/server/PowerManagerService$10;-><init>(Lcom/android/server/PowerManagerService;)V
+    invoke-direct {v2, p0}, Lcom/android/server/PowerManagerService$12;-><init>(Lcom/android/server/PowerManagerService;)V
 
-    iput-object v2, p0, Lcom/android/server/PowerManagerService;->mLightFilterTask:Ljava/lang/Runnable;
+    iput-object v2, p0, Lcom/android/server/PowerManagerService;->mProximityListener:Landroid/hardware/SensorEventListener;
 
     new-instance v2, Lcom/android/server/PowerManagerService$13;
 
     invoke-direct {v2, p0}, Lcom/android/server/PowerManagerService$13;-><init>(Lcom/android/server/PowerManagerService;)V
 
-    iput-object v2, p0, Lcom/android/server/PowerManagerService;->mProximityListener:Landroid/hardware/SensorEventListener;
-
-    new-instance v2, Lcom/android/server/PowerManagerService$14;
-
-    invoke-direct {v2, p0}, Lcom/android/server/PowerManagerService$14;-><init>(Lcom/android/server/PowerManagerService;)V
-
     iput-object v2, p0, Lcom/android/server/PowerManagerService;->mLightListener:Landroid/hardware/SensorEventListener;
 
     invoke-static {}, Landroid/os/Binder;->clearCallingIdentity()J
@@ -660,9 +592,7 @@
 
     return-void
 
-    nop
-
-    :array_fc
+    :array_ea
     .array-data 0x4
         0xfft 0xfft 0xfft 0xfft
         0xfft 0xfft 0xfft 0xfft
@@ -726,15 +656,7 @@
     return p1
 .end method
 
-.method static synthetic access$1700(Lcom/android/server/PowerManagerService;)V
-    .registers 1
-
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->updateLightSettings()V
-
-    return-void
-.end method
-
-.method static synthetic access$1800(Lcom/android/server/PowerManagerService;I)V
+.method static synthetic access$1700(Lcom/android/server/PowerManagerService;I)V
     .registers 2
 
     invoke-direct {p0, p1}, Lcom/android/server/PowerManagerService;->setScreenBrightnessMode(I)V
@@ -742,7 +664,7 @@
     return-void
 .end method
 
-.method static synthetic access$1900(Lcom/android/server/PowerManagerService;)V
+.method static synthetic access$1800(Lcom/android/server/PowerManagerService;)V
     .registers 1
 
     invoke-direct {p0}, Lcom/android/server/PowerManagerService;->setScreenOffTimeoutsLocked()V
@@ -750,31 +672,31 @@
     return-void
 .end method
 
-.method static synthetic access$200(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$1900(Lcom/android/server/PowerManagerService;)F
     .registers 2
 
-    iget v0, p0, Lcom/android/server/PowerManagerService;->MY_UID:I
+    iget v0, p0, Lcom/android/server/PowerManagerService;->mWindowScaleAnimation:F
 
     return v0
 .end method
 
-.method static synthetic access$2000(Lcom/android/server/PowerManagerService;)F
+.method static synthetic access$1902(Lcom/android/server/PowerManagerService;F)F
     .registers 2
 
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mWindowScaleAnimation:F
+    iput p1, p0, Lcom/android/server/PowerManagerService;->mWindowScaleAnimation:F
 
-    return v0
+    return p1
 .end method
 
-.method static synthetic access$2002(Lcom/android/server/PowerManagerService;F)F
+.method static synthetic access$200(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
-    iput p1, p0, Lcom/android/server/PowerManagerService;->mWindowScaleAnimation:F
+    iget v0, p0, Lcom/android/server/PowerManagerService;->MY_UID:I
 
-    return p1
+    return v0
 .end method
 
-.method static synthetic access$2100(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$2000(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mAnimationSetting:I
@@ -782,7 +704,7 @@
     return v0
 .end method
 
-.method static synthetic access$2102(Lcom/android/server/PowerManagerService;I)I
+.method static synthetic access$2002(Lcom/android/server/PowerManagerService;I)I
     .registers 2
 
     iput p1, p0, Lcom/android/server/PowerManagerService;->mAnimationSetting:I
@@ -790,7 +712,7 @@
     return p1
 .end method
 
-.method static synthetic access$2176(Lcom/android/server/PowerManagerService;I)I
+.method static synthetic access$2076(Lcom/android/server/PowerManagerService;I)I
     .registers 3
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mAnimationSetting:I
@@ -802,7 +724,7 @@
     return v0
 .end method
 
-.method static synthetic access$2600(Lcom/android/server/PowerManagerService;)V
+.method static synthetic access$2500(Lcom/android/server/PowerManagerService;)V
     .registers 1
 
     invoke-direct {p0}, Lcom/android/server/PowerManagerService;->updateSettingsValues()V
@@ -810,7 +732,7 @@
     return-void
 .end method
 
-.method static synthetic access$2702(Lcom/android/server/PowerManagerService;I)I
+.method static synthetic access$2602(Lcom/android/server/PowerManagerService;I)I
     .registers 2
 
     iput p1, p0, Lcom/android/server/PowerManagerService;->mUserState:I
@@ -818,7 +740,7 @@
     return p1
 .end method
 
-.method static synthetic access$2800(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$2700(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mWakeLockState:I
@@ -826,7 +748,7 @@
     return v0
 .end method
 
-.method static synthetic access$2900(Lcom/android/server/PowerManagerService;I)V
+.method static synthetic access$2800(Lcom/android/server/PowerManagerService;I)V
     .registers 2
 
     invoke-direct {p0, p1}, Lcom/android/server/PowerManagerService;->setPowerState(I)V
@@ -834,23 +756,23 @@
     return-void
 .end method
 
-.method static synthetic access$300(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$2900(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
-    iget v0, p0, Lcom/android/server/PowerManagerService;->MY_PID:I
+    iget v0, p0, Lcom/android/server/PowerManagerService;->mDimDelay:I
 
     return v0
 .end method
 
-.method static synthetic access$3000(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$300(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mDimDelay:I
+    iget v0, p0, Lcom/android/server/PowerManagerService;->MY_PID:I
 
     return v0
 .end method
 
-.method static synthetic access$3100(Lcom/android/server/PowerManagerService;JJI)V
+.method static synthetic access$3000(Lcom/android/server/PowerManagerService;JJI)V
     .registers 6
 
     invoke-direct/range {p0 .. p5}, Lcom/android/server/PowerManagerService;->setTimeoutLocked(JJI)V
@@ -858,7 +780,7 @@
     return-void
 .end method
 
-.method static synthetic access$3200(Lcom/android/server/PowerManagerService;)Z
+.method static synthetic access$3100(Lcom/android/server/PowerManagerService;)Z
     .registers 2
 
     iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mPreparingForScreenOn:Z
@@ -866,7 +788,7 @@
     return v0
 .end method
 
-.method static synthetic access$3202(Lcom/android/server/PowerManagerService;Z)Z
+.method static synthetic access$3102(Lcom/android/server/PowerManagerService;Z)Z
     .registers 2
 
     iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mPreparingForScreenOn:Z
@@ -874,7 +796,7 @@
     return p1
 .end method
 
-.method static synthetic access$3300(Lcom/android/server/PowerManagerService;II)V
+.method static synthetic access$3200(Lcom/android/server/PowerManagerService;II)V
     .registers 3
 
     invoke-direct {p0, p1, p2}, Lcom/android/server/PowerManagerService;->updateLightsLocked(II)V
@@ -882,7 +804,7 @@
     return-void
 .end method
 
-.method static synthetic access$3400(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+.method static synthetic access$3300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mBroadcastWakeLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
@@ -890,7 +812,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$3500(Lcom/android/server/PowerManagerService;)[I
+.method static synthetic access$3400(Lcom/android/server/PowerManagerService;)[I
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mBroadcastQueue:[I
@@ -898,7 +820,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$3600(Lcom/android/server/PowerManagerService;)[I
+.method static synthetic access$3500(Lcom/android/server/PowerManagerService;)[I
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mBroadcastWhy:[I
@@ -906,7 +828,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$3700(Lcom/android/server/PowerManagerService;)Landroid/view/WindowManagerPolicy$ScreenOnListener;
+.method static synthetic access$3600(Lcom/android/server/PowerManagerService;)Landroid/view/WindowManagerPolicy$ScreenOnListener;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mScreenOnListener:Landroid/view/WindowManagerPolicy$ScreenOnListener;
@@ -914,7 +836,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$3800(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
+.method static synthetic access$3700(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mContext:Landroid/content/Context;
@@ -922,7 +844,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$3900(Lcom/android/server/PowerManagerService;)Landroid/content/Intent;
+.method static synthetic access$3800(Lcom/android/server/PowerManagerService;)Landroid/content/Intent;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mScreenOnIntent:Landroid/content/Intent;
@@ -930,23 +852,23 @@
     return-object v0
 .end method
 
-.method static synthetic access$400(Lcom/android/server/PowerManagerService;Landroid/os/IBinder;IZ)V
-    .registers 4
+.method static synthetic access$3900(Lcom/android/server/PowerManagerService;)Landroid/content/BroadcastReceiver;
+    .registers 2
 
-    invoke-direct {p0, p1, p2, p3}, Lcom/android/server/PowerManagerService;->releaseWakeLockLocked(Landroid/os/IBinder;IZ)V
+    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mScreenOnBroadcastDone:Landroid/content/BroadcastReceiver;
 
-    return-void
+    return-object v0
 .end method
 
-.method static synthetic access$4000(Lcom/android/server/PowerManagerService;)Landroid/content/BroadcastReceiver;
-    .registers 2
+.method static synthetic access$400(Lcom/android/server/PowerManagerService;Landroid/os/IBinder;IZ)V
+    .registers 4
 
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mScreenOnBroadcastDone:Landroid/content/BroadcastReceiver;
+    invoke-direct {p0, p1, p2, p3}, Lcom/android/server/PowerManagerService;->releaseWakeLockLocked(Landroid/os/IBinder;IZ)V
 
-    return-object v0
+    return-void
 .end method
 
-.method static synthetic access$4100(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+.method static synthetic access$4000(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
@@ -954,7 +876,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$4200(Lcom/android/server/PowerManagerService;)Landroid/content/Intent;
+.method static synthetic access$4100(Lcom/android/server/PowerManagerService;)Landroid/content/Intent;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mScreenOffIntent:Landroid/content/Intent;
@@ -962,7 +884,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$4300(Lcom/android/server/PowerManagerService;)Landroid/content/BroadcastReceiver;
+.method static synthetic access$4200(Lcom/android/server/PowerManagerService;)Landroid/content/BroadcastReceiver;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mScreenOffBroadcastDone:Landroid/content/BroadcastReceiver;
@@ -970,7 +892,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$4400(Lcom/android/server/PowerManagerService;)V
+.method static synthetic access$4300(Lcom/android/server/PowerManagerService;)V
     .registers 1
 
     invoke-direct {p0}, Lcom/android/server/PowerManagerService;->forceReenableScreen()V
@@ -978,7 +900,7 @@
     return-void
 .end method
 
-.method static synthetic access$4500(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
+.method static synthetic access$4400(Lcom/android/server/PowerManagerService;)Landroid/os/Handler;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessHandler:Landroid/os/Handler;
@@ -986,7 +908,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$4502(Lcom/android/server/PowerManagerService;Landroid/os/Handler;)Landroid/os/Handler;
+.method static synthetic access$4402(Lcom/android/server/PowerManagerService;Landroid/os/Handler;)Landroid/os/Handler;
     .registers 2
 
     iput-object p1, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessHandler:Landroid/os/Handler;
@@ -994,7 +916,7 @@
     return-object p1
 .end method
 
-.method static synthetic access$4600(Lcom/android/server/PowerManagerService;)Z
+.method static synthetic access$4500(Lcom/android/server/PowerManagerService;)Z
     .registers 2
 
     iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
@@ -1002,7 +924,7 @@
     return v0
 .end method
 
-.method static synthetic access$4700(Lcom/android/server/PowerManagerService;)Z
+.method static synthetic access$4600(Lcom/android/server/PowerManagerService;)Z
     .registers 2
 
     iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mInitialAnimation:Z
@@ -1010,7 +932,7 @@
     return v0
 .end method
 
-.method static synthetic access$4702(Lcom/android/server/PowerManagerService;Z)Z
+.method static synthetic access$4602(Lcom/android/server/PowerManagerService;Z)Z
     .registers 2
 
     iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mInitialAnimation:Z
@@ -1018,7 +940,7 @@
     return p1
 .end method
 
-.method static synthetic access$4800(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
+.method static synthetic access$4700(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mLcdLight:Lcom/android/server/LightsService$Light;
@@ -1026,7 +948,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$4900(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$4800(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorButtonBrightness:I
@@ -1034,23 +956,23 @@
     return v0
 .end method
 
-.method static synthetic access$500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$LockList;
+.method static synthetic access$4900(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
     .registers 2
 
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mLocks:Lcom/android/server/PowerManagerService$LockList;
+    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mButtonLight:Lcom/android/server/LightsService$Light;
 
     return-object v0
 .end method
 
-.method static synthetic access$5000(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
+.method static synthetic access$500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$LockList;
     .registers 2
 
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mButtonLight:Lcom/android/server/LightsService$Light;
+    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mLocks:Lcom/android/server/PowerManagerService$LockList;
 
     return-object v0
 .end method
 
-.method static synthetic access$5100(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$5000(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorKeyboardBrightness:I
@@ -1058,7 +980,7 @@
     return v0
 .end method
 
-.method static synthetic access$5200(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
+.method static synthetic access$5100(Lcom/android/server/PowerManagerService;)Lcom/android/server/LightsService$Light;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mKeyboardLight:Lcom/android/server/LightsService$Light;
@@ -1066,15 +988,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$5302(Lcom/android/server/PowerManagerService;I)I
-    .registers 2
-
-    iput p1, p0, Lcom/android/server/PowerManagerService;->mLastLcdValue:I
-
-    return p1
-.end method
-
-.method static synthetic access$5500(Lcom/android/server/PowerManagerService;I)V
+.method static synthetic access$5300(Lcom/android/server/PowerManagerService;I)V
     .registers 2
 
     invoke-direct {p0, p1}, Lcom/android/server/PowerManagerService;->nativeStartSurfaceFlingerAnimation(I)V
@@ -1082,7 +996,7 @@
     return-void
 .end method
 
-.method static synthetic access$5602(Lcom/android/server/PowerManagerService;Z)Z
+.method static synthetic access$5402(Lcom/android/server/PowerManagerService;Z)Z
     .registers 2
 
     iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mInitComplete:Z
@@ -1090,7 +1004,7 @@
     return p1
 .end method
 
-.method static synthetic access$5700(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$5500(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
@@ -1098,7 +1012,7 @@
     return v0
 .end method
 
-.method static synthetic access$5702(Lcom/android/server/PowerManagerService;I)I
+.method static synthetic access$5502(Lcom/android/server/PowerManagerService;I)I
     .registers 2
 
     iput p1, p0, Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
@@ -1106,7 +1020,7 @@
     return p1
 .end method
 
-.method static synthetic access$5800(Lcom/android/server/PowerManagerService;)Z
+.method static synthetic access$5600(Lcom/android/server/PowerManagerService;)Z
     .registers 2
 
     iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mHeadless:Z
@@ -1114,7 +1028,7 @@
     return v0
 .end method
 
-.method static synthetic access$5900(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$5700(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mScreenOffReason:I
@@ -1122,43 +1036,43 @@
     return v0
 .end method
 
-.method static synthetic access$600(Lcom/android/server/PowerManagerService;)Z
+.method static synthetic access$5800(I)Ljava/lang/String;
     .registers 2
 
-    iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mIsPowered:Z
+    invoke-static {p0}, Lcom/android/server/PowerManagerService;->dumpPowerState(I)Ljava/lang/String;
 
-    return v0
+    move-result-object v0
+
+    return-object v0
 .end method
 
-.method static synthetic access$6000(I)Ljava/lang/String;
-    .registers 2
+.method static synthetic access$5900(Lcom/android/server/PowerManagerService;I)I
+    .registers 3
 
-    invoke-static {p0}, Lcom/android/server/PowerManagerService;->dumpPowerState(I)Ljava/lang/String;
+    invoke-direct {p0, p1}, Lcom/android/server/PowerManagerService;->screenOffFinishedAnimatingLocked(I)I
 
-    move-result-object v0
+    move-result v0
 
-    return-object v0
+    return v0
 .end method
 
-.method static synthetic access$602(Lcom/android/server/PowerManagerService;Z)Z
+.method static synthetic access$600(Lcom/android/server/PowerManagerService;)Z
     .registers 2
 
-    iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mIsPowered:Z
+    iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mIsPowered:Z
 
-    return p1
+    return v0
 .end method
 
-.method static synthetic access$6100(Lcom/android/server/PowerManagerService;I)I
-    .registers 3
-
-    invoke-direct {p0, p1}, Lcom/android/server/PowerManagerService;->screenOffFinishedAnimatingLocked(I)I
+.method static synthetic access$602(Lcom/android/server/PowerManagerService;Z)Z
+    .registers 2
 
-    move-result v0
+    iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mIsPowered:Z
 
-    return v0
+    return p1
 .end method
 
-.method static synthetic access$6300(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$6100(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mProximityPendingValue:I
@@ -1166,7 +1080,7 @@
     return v0
 .end method
 
-.method static synthetic access$6302(Lcom/android/server/PowerManagerService;I)I
+.method static synthetic access$6102(Lcom/android/server/PowerManagerService;I)I
     .registers 2
 
     iput p1, p0, Lcom/android/server/PowerManagerService;->mProximityPendingValue:I
@@ -1174,7 +1088,7 @@
     return p1
 .end method
 
-.method static synthetic access$6400(Lcom/android/server/PowerManagerService;Z)V
+.method static synthetic access$6200(Lcom/android/server/PowerManagerService;Z)V
     .registers 2
 
     invoke-direct {p0, p1}, Lcom/android/server/PowerManagerService;->proximityChangedLocked(Z)V
@@ -1182,7 +1096,7 @@
     return-void
 .end method
 
-.method static synthetic access$6500(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
+.method static synthetic access$6300(Lcom/android/server/PowerManagerService;)Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mProximityPartialLock:Lcom/android/server/PowerManagerService$UnsynchronizedWakeLock;
@@ -1190,7 +1104,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$6600(Lcom/android/server/PowerManagerService;)Z
+.method static synthetic access$6400(Lcom/android/server/PowerManagerService;)Z
     .registers 2
 
     iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorPendingDecrease:Z
@@ -1198,7 +1112,7 @@
     return v0
 .end method
 
-.method static synthetic access$6602(Lcom/android/server/PowerManagerService;Z)Z
+.method static synthetic access$6402(Lcom/android/server/PowerManagerService;Z)Z
     .registers 2
 
     iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mLightSensorPendingDecrease:Z
@@ -1206,7 +1120,7 @@
     return p1
 .end method
 
-.method static synthetic access$6700(Lcom/android/server/PowerManagerService;)Z
+.method static synthetic access$6500(Lcom/android/server/PowerManagerService;)Z
     .registers 2
 
     iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorPendingIncrease:Z
@@ -1214,7 +1128,7 @@
     return v0
 .end method
 
-.method static synthetic access$6702(Lcom/android/server/PowerManagerService;Z)Z
+.method static synthetic access$6502(Lcom/android/server/PowerManagerService;Z)Z
     .registers 2
 
     iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mLightSensorPendingIncrease:Z
@@ -1222,7 +1136,7 @@
     return p1
 .end method
 
-.method static synthetic access$6800(Lcom/android/server/PowerManagerService;)F
+.method static synthetic access$6600(Lcom/android/server/PowerManagerService;)F
     .registers 2
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorPendingValue:F
@@ -1230,15 +1144,7 @@
     return v0
 .end method
 
-.method static synthetic access$6802(Lcom/android/server/PowerManagerService;F)F
-    .registers 2
-
-    iput p1, p0, Lcom/android/server/PowerManagerService;->mLightSensorPendingValue:F
-
-    return p1
-.end method
-
-.method static synthetic access$6900(Lcom/android/server/PowerManagerService;IZ)V
+.method static synthetic access$6700(Lcom/android/server/PowerManagerService;IZ)V
     .registers 3
 
     invoke-direct {p0, p1, p2}, Lcom/android/server/PowerManagerService;->lightSensorChangedLocked(IZ)V
@@ -1246,201 +1152,35 @@
     return-void
 .end method
 
-.method static synthetic access$700(Lcom/android/server/PowerManagerService;)Lcom/android/server/BatteryService;
-    .registers 2
-
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mBatteryService:Lcom/android/server/BatteryService;
-
-    return-object v0
-.end method
-
-.method static synthetic access$7000(Lcom/android/server/PowerManagerService;)I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-
-    return v0
-.end method
-
-.method static synthetic access$7002(Lcom/android/server/PowerManagerService;I)I
-    .registers 2
-
-    iput p1, p0, Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-
-    return p1
-.end method
-
-.method static synthetic access$7100(Lcom/android/server/PowerManagerService;)Z
+.method static synthetic access$6800(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
     .registers 2
 
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->isScreenTurningOffLocked()Z
-
-    move-result v0
-
-    return v0
-.end method
-
-.method static synthetic access$7200(Lcom/android/server/PowerManagerService;)[I
-    .registers 2
+    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->getUiContext()Landroid/content/Context;
 
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
+    move-result-object v0
 
     return-object v0
 .end method
 
-.method static synthetic access$7300(Lcom/android/server/PowerManagerService;)I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterIndex:I
-
-    return v0
-.end method
-
-.method static synthetic access$7302(Lcom/android/server/PowerManagerService;I)I
-    .registers 2
-
-    iput p1, p0, Lcom/android/server/PowerManagerService;->mLightFilterIndex:I
-
-    return p1
-.end method
-
-.method static synthetic access$7400(Lcom/android/server/PowerManagerService;)I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSampleCounter:I
-
-    return v0
-.end method
-
-.method static synthetic access$7402(Lcom/android/server/PowerManagerService;I)I
-    .registers 2
-
-    iput p1, p0, Lcom/android/server/PowerManagerService;->mLightFilterSampleCounter:I
-
-    return p1
-.end method
-
-.method static synthetic access$7500(Lcom/android/server/PowerManagerService;)I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSum:I
-
-    return v0
-.end method
-
-.method static synthetic access$7512(Lcom/android/server/PowerManagerService;I)I
-    .registers 3
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSum:I
-
-    add-int/2addr v0, p1
-
-    iput v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSum:I
-
-    return v0
-.end method
-
-.method static synthetic access$7520(Lcom/android/server/PowerManagerService;I)I
+.method static synthetic access$6900(Lcom/android/server/PowerManagerService;I)Z
     .registers 3
 
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSum:I
-
-    sub-int/2addr v0, p1
-
-    iput v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSum:I
-
-    return v0
-.end method
-
-.method static synthetic access$7600(Lcom/android/server/PowerManagerService;)F
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-
-    return v0
-.end method
-
-.method static synthetic access$7700(Lcom/android/server/PowerManagerService;)I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterEqualCounter:I
-
-    return v0
-.end method
-
-.method static synthetic access$7702(Lcom/android/server/PowerManagerService;I)I
-    .registers 2
-
-    iput p1, p0, Lcom/android/server/PowerManagerService;->mLightFilterEqualCounter:I
-
-    return p1
-.end method
-
-.method static synthetic access$7708(Lcom/android/server/PowerManagerService;)I
-    .registers 3
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterEqualCounter:I
-
-    add-int/lit8 v1, v0, 0x1
-
-    iput v1, p0, Lcom/android/server/PowerManagerService;->mLightFilterEqualCounter:I
-
-    return v0
-.end method
-
-.method static synthetic access$7800(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
-    .registers 2
-
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterTask:Ljava/lang/Runnable;
-
-    return-object v0
-.end method
-
-.method static synthetic access$7900(Lcom/android/server/PowerManagerService;)I
-    .registers 2
+    invoke-direct {p0, p1}, Lcom/android/server/PowerManagerService;->isScreenLock(I)Z
 
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterInterval:I
+    move-result v0
 
     return v0
 .end method
 
-.method static synthetic access$800(Lcom/android/server/PowerManagerService;)V
-    .registers 1
-
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->updateWakeLockLocked()V
-
-    return-void
-.end method
-
-.method static synthetic access$8000(Lcom/android/server/PowerManagerService;)V
-    .registers 1
-
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->lightFilterStop()V
-
-    return-void
-.end method
-
-.method static synthetic access$8100(Lcom/android/server/PowerManagerService;)Landroid/content/Context;
+.method static synthetic access$700(Lcom/android/server/PowerManagerService;)Lcom/android/server/BatteryService;
     .registers 2
 
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->getUiContext()Landroid/content/Context;
-
-    move-result-object v0
+    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mBatteryService:Lcom/android/server/BatteryService;
 
     return-object v0
 .end method
 
-.method static synthetic access$8200(Lcom/android/server/PowerManagerService;I)Z
-    .registers 3
-
-    invoke-direct {p0, p1}, Lcom/android/server/PowerManagerService;->isScreenLock(I)Z
-
-    move-result v0
-
-    return v0
-.end method
-
-.method static synthetic access$8302(Lcom/android/server/PowerManagerService;Z)Z
+.method static synthetic access$7002(Lcom/android/server/PowerManagerService;Z)Z
     .registers 2
 
     iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mProxIgnoredBecauseScreenTurnedOff:Z
@@ -1448,7 +1188,7 @@
     return p1
 .end method
 
-.method static synthetic access$8400(Lcom/android/server/PowerManagerService;)J
+.method static synthetic access$7100(Lcom/android/server/PowerManagerService;)J
     .registers 3
 
     iget-wide v0, p0, Lcom/android/server/PowerManagerService;->mLastProximityEventTime:J
@@ -1456,7 +1196,7 @@
     return-wide v0
 .end method
 
-.method static synthetic access$8402(Lcom/android/server/PowerManagerService;J)J
+.method static synthetic access$7102(Lcom/android/server/PowerManagerService;J)J
     .registers 3
 
     iput-wide p1, p0, Lcom/android/server/PowerManagerService;->mLastProximityEventTime:J
@@ -1464,7 +1204,7 @@
     return-wide p1
 .end method
 
-.method static synthetic access$8500(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
+.method static synthetic access$7200(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mProximityTask:Ljava/lang/Runnable;
@@ -1472,7 +1212,7 @@
     return-object v0
 .end method
 
-.method static synthetic access$8600(Lcom/android/server/PowerManagerService;)Landroid/hardware/Sensor;
+.method static synthetic access$7300(Lcom/android/server/PowerManagerService;)Landroid/hardware/Sensor;
     .registers 2
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mProximitySensor:Landroid/hardware/Sensor;
@@ -1480,98 +1220,52 @@
     return-object v0
 .end method
 
-.method static synthetic access$8700(Lcom/android/server/PowerManagerService;)Z
-    .registers 2
-
-    iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mWaitingForFirstLightSensor:Z
-
-    return v0
-.end method
-
-.method static synthetic access$8702(Lcom/android/server/PowerManagerService;Z)Z
-    .registers 2
-
-    iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mWaitingForFirstLightSensor:Z
-
-    return p1
-.end method
-
-.method static synthetic access$8800(Lcom/android/server/PowerManagerService;IZ)V
-    .registers 3
-
-    invoke-direct {p0, p1, p2}, Lcom/android/server/PowerManagerService;->handleLightSensorValue(IZ)V
-
-    return-void
-.end method
-
-.method static synthetic access$8900(Lcom/android/server/PowerManagerService;)Ljava/lang/Runnable;
-    .registers 2
-
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessTask:Ljava/lang/Runnable;
-
-    return-object v0
-.end method
-
-.method static synthetic access$900(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$7400(Lcom/android/server/PowerManagerService;)Z
     .registers 2
 
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mPowerState:I
-
-    return v0
-.end method
-
-.method static synthetic access$9000(Lcom/android/server/PowerManagerService;)Z
-    .registers 2
+    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->isScreenTurningOffLocked()Z
 
-    iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterEnabled:Z
+    move-result v0
 
     return v0
 .end method
 
-.method static synthetic access$9100(Lcom/android/server/PowerManagerService;)Z
+.method static synthetic access$7500(Lcom/android/server/PowerManagerService;)Z
     .registers 2
 
-    iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterRunning:Z
+    iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mWaitingForFirstLightSensor:Z
 
     return v0
 .end method
 
-.method static synthetic access$9102(Lcom/android/server/PowerManagerService;Z)Z
+.method static synthetic access$7502(Lcom/android/server/PowerManagerService;Z)Z
     .registers 2
 
-    iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mLightFilterRunning:Z
+    iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mWaitingForFirstLightSensor:Z
 
     return p1
 .end method
 
-.method static synthetic access$9200(Lcom/android/server/PowerManagerService;)I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterReset:I
-
-    return v0
-.end method
-
-.method static synthetic access$9300(Lcom/android/server/PowerManagerService;I)V
-    .registers 2
+.method static synthetic access$7600(Lcom/android/server/PowerManagerService;IZ)V
+    .registers 3
 
-    invoke-direct {p0, p1}, Lcom/android/server/PowerManagerService;->lightFilterReset(I)V
+    invoke-direct {p0, p1, p2}, Lcom/android/server/PowerManagerService;->handleLightSensorValue(IZ)V
 
     return-void
 .end method
 
-.method static synthetic access$9400(Lcom/android/server/PowerManagerService;)J
-    .registers 3
+.method static synthetic access$800(Lcom/android/server/PowerManagerService;)V
+    .registers 1
 
-    iget-wide v0, p0, Lcom/android/server/PowerManagerService;->mLastScreenOnTime:J
+    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->updateWakeLockLocked()V
 
-    return-wide v0
+    return-void
 .end method
 
-.method static synthetic access$9500(Lcom/android/server/PowerManagerService;)I
+.method static synthetic access$900(Lcom/android/server/PowerManagerService;)I
     .registers 2
 
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorWarmupTime:I
+    iget v0, p0, Lcom/android/server/PowerManagerService;->mPowerState:I
 
     return v0
 .end method
@@ -1818,20 +1512,18 @@
 
     iget-boolean v1, p0, Lcom/android/server/PowerManagerService;->mIsDocked:Z
 
-    if-eqz v1, :cond_13
+    if-eqz v1, :cond_10
 
     const/4 v1, -0x1
 
     iput v1, p0, Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
 
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->resetLastLightValues()V
-
-    :cond_13
+    :cond_10
     iget v1, p0, Lcom/android/server/PowerManagerService;->mPowerState:I
 
     and-int/lit8 v1, v1, 0x1
 
-    if-eqz v1, :cond_2d
+    if-eqz v1, :cond_21
 
     iget v1, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
 
@@ -1841,29 +1533,21 @@
 
     iput v1, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
 
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->resetLastLightValues()V
-
     const/4 v1, 0x0
 
     invoke-direct {p0, v0, v1}, Lcom/android/server/PowerManagerService;->lightSensorChangedLocked(IZ)V
 
-    iget v1, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-
-    float-to-int v1, v1
-
-    invoke-direct {p0, v1}, Lcom/android/server/PowerManagerService;->lightFilterReset(I)V
-
-    :cond_2d
+    :cond_21
     monitor-exit v2
 
     return-void
 
-    :catchall_2f
+    :catchall_23
     move-exception v1
 
     monitor-exit v2
-    :try_end_31
-    .catchall {:try_start_7 .. :try_end_31} :catchall_2f
+    :try_end_25
+    .catchall {:try_start_7 .. :try_end_25} :catchall_23
 
     throw v1
 .end method
@@ -2002,7 +1686,7 @@
 
     invoke-virtual {v3, v4, v5, v6}, Landroid/hardware/SensorManager;->registerListener(Landroid/hardware/SensorEventListener;Landroid/hardware/Sensor;I)Z
     :try_end_31
-    .catchall {:try_start_16 .. :try_end_31} :catchall_4d
+    .catchall {:try_start_16 .. :try_end_31} :catchall_4a
 
     :goto_31
     invoke-static {v0, v1}, Landroid/os/Binder;->restoreCallingIdentity(J)V
@@ -2012,8 +1696,6 @@
 
     :cond_35
     :try_start_35
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->lightFilterStop()V
-
     iget-object v3, p0, Lcom/android/server/PowerManagerService;->mSensorManager:Landroid/hardware/SensorManager;
 
     iget-object v4, p0, Lcom/android/server/PowerManagerService;->mLightListener:Landroid/hardware/SensorEventListener;
@@ -2033,12 +1715,12 @@
     const/4 v3, 0x0
 
     iput-boolean v3, p0, Lcom/android/server/PowerManagerService;->mLightSensorPendingIncrease:Z
-    :try_end_4c
-    .catchall {:try_start_35 .. :try_end_4c} :catchall_4d
+    :try_end_49
+    .catchall {:try_start_35 .. :try_end_49} :catchall_4a
 
     goto :goto_31
 
-    :catchall_4d
+    :catchall_4a
     move-exception v3
 
     invoke-static {v0, v1}, Landroid/os/Binder;->restoreCallingIdentity(J)V
@@ -2150,354 +1832,228 @@
     return-void
 .end method
 
-.method private getAutoBrightnessValue(II[I[I)I
-    .registers 21
-
-    if-ltz p2, :cond_3e
-
-    move/from16 v0, p1
-
-    move/from16 v1, p2
-
-    if-ge v0, v1, :cond_3e
-
-    const/4 v4, 0x0
-
-    :goto_9
-    :try_start_9
-    move-object/from16 v0, p3
-
-    array-length v12, v0
-
-    if-ge v4, v12, :cond_14
-
-    aget v12, p3, v4
-
-    move/from16 v0, p2
-
-    if-ge v0, v12, :cond_59
-
-    :cond_14
-    if-lez v4, :cond_3e
-
-    add-int/lit8 v12, v4, -0x1
-
-    aget v13, p3, v12
-
-    const/4 v12, 0x1
-
-    if-ne v4, v12, :cond_5c
-
-    const/4 v12, 0x0
-
-    :goto_1e
-    sub-int v5, v13, v12
-
-    add-int/lit8 v12, v4, -0x1
-
-    aget v12, p3, v12
-
-    move-object/from16 v0, p0
-
-    iget v13, v0, Lcom/android/server/PowerManagerService;->mLightHysteresis:F
-
-    int-to-float v14, v5
-
-    mul-float/2addr v13, v14
-
-    invoke-static {v13}, Ljava/lang/Math;->round(F)I
-
-    move-result v13
-
-    sub-int v6, v12, v13
-
-    add-int/lit8 v12, v4, -0x1
-
-    aget v12, p3, v12
-
-    move/from16 v0, p1
-
-    if-ge v0, v12, :cond_3e
-
-    move/from16 v0, p1
-
-    if-lt v0, v6, :cond_3e
-
-    move/from16 p1, p2
-
-    :cond_3e
-    const/4 v4, 0x0
-
-    :goto_3f
-    move-object/from16 v0, p3
-
-    array-length v12, v0
-
-    if-ge v4, v12, :cond_4a
-
-    aget v12, p3, v4
-
-    move/from16 v0, p1
-
-    if-ge v0, v12, :cond_61
-
-    :cond_4a
-    const/4 v12, 0x0
-
-    aget v8, p4, v12
-
-    move-object/from16 v0, p0
-
-    iget-object v12, v0, Lcom/android/server/PowerManagerService;->mAutoBrightnessLevels:[I
-
-    array-length v12, v12
-
-    aget v7, p4, v12
-
-    if-le v8, v7, :cond_64
-
-    aget v10, p4, v4
-
-    :cond_58
-    :goto_58
-    return v10
+.method private getAutoBrightnessValue(I[I)I
+    .registers 15
 
-    :cond_59
-    add-int/lit8 v4, v4, 0x1
+    const/4 v11, 0x0
 
-    goto :goto_9
+    const/high16 v10, 0x3f80
 
-    :cond_5c
-    add-int/lit8 v12, v4, -0x2
+    const/4 v2, 0x0
 
-    aget v12, p3, v12
+    :goto_4
+    :try_start_4
+    iget-object v8, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessLevels:[I
 
-    goto :goto_1e
+    array-length v8, v8
 
-    :cond_61
-    add-int/lit8 v4, v4, 0x1
+    if-ge v2, v8, :cond_f
 
-    goto :goto_3f
+    iget-object v8, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessLevels:[I
 
-    :cond_64
-    sub-int v12, v7, v8
+    aget v8, v8, v2
 
-    add-int/lit8 v9, v12, 0x14
+    if-ge p1, v8, :cond_1c
 
-    aget v12, p4, v4
+    :cond_f
+    const/4 v8, 0x0
 
-    sub-int/2addr v12, v8
+    aget v4, p2, v8
 
-    add-int/lit8 v12, v12, 0xa
+    iget-object v8, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessLevels:[I
 
-    int-to-float v12, v12
+    array-length v8, v8
 
-    int-to-float v13, v9
+    aget v3, p2, v8
 
-    div-float v11, v12, v13
+    if-le v4, v3, :cond_1f
 
-    move-object/from16 v0, p0
+    aget v6, p2, v2
 
-    iget v12, v0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
+    :cond_1b
+    :goto_1b
+    return v6
 
-    const/4 v13, 0x0
+    :cond_1c
+    add-int/lit8 v2, v2, 0x1
 
-    cmpl-float v12, v12, v13
+    goto :goto_4
 
-    if-lez v12, :cond_b2
+    :cond_1f
+    sub-int v8, v3, v4
 
-    move-object/from16 v0, p0
+    add-int/lit8 v5, v8, 0x14
 
-    iget v12, v0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
+    aget v8, p2, v2
 
-    const/high16 v13, 0x3f80
+    sub-int/2addr v8, v4
 
-    cmpg-float v12, v12, v13
+    add-int/lit8 v8, v8, 0xa
 
-    if-gtz v12, :cond_b2
+    int-to-float v8, v8
 
-    const/high16 v12, 0x3f80
+    int-to-float v9, v5
 
-    move-object/from16 v0, p0
+    div-float v7, v8, v9
 
-    iget v13, v0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
+    iget v8, p0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
 
-    sub-float/2addr v12, v13
+    cmpl-float v8, v8, v11
 
-    float-to-double v12, v12
+    if-lez v8, :cond_61
 
-    invoke-static {v12, v13}, Ljava/lang/Math;->sqrt(D)D
+    iget v8, p0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
 
-    move-result-wide v12
+    cmpg-float v8, v8, v10
 
-    double-to-float v2, v12
+    if-gtz v8, :cond_61
 
-    float-to-double v12, v2
+    iget v8, p0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
 
-    const-wide v14, 0x3ee4f8b588e368f1L
+    sub-float v8, v10, v8
 
-    cmpg-double v12, v12, v14
+    float-to-double v8, v8
 
-    if-gtz v12, :cond_b0
+    invoke-static {v8, v9}, Ljava/lang/Math;->sqrt(D)D
 
-    const/high16 v11, 0x3f80
+    move-result-wide v8
 
-    :cond_9d
-    :goto_9d
-    move-object/from16 v0, p0
+    double-to-float v0, v8
 
-    iget v12, v0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
+    float-to-double v8, v0
 
-    const/high16 v13, 0x4100
+    const-wide v10, 0x3ee4f8b588e368f1L
 
-    div-float/2addr v12, v13
+    cmpg-double v8, v8, v10
 
-    add-float/2addr v11, v12
+    if-gtz v8, :cond_5f
 
-    int-to-float v12, v9
+    const/high16 v7, 0x3f80
 
-    mul-float/2addr v12, v11
+    :cond_4e
+    :goto_4e
+    iget v8, p0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
 
-    int-to-float v13, v8
+    const/high16 v9, 0x4100
 
-    add-float/2addr v12, v13
+    div-float/2addr v8, v9
 
-    float-to-int v12, v12
+    add-float/2addr v7, v8
 
-    add-int/lit8 v10, v12, -0xa
+    int-to-float v8, v5
 
-    if-ge v10, v8, :cond_d4
+    mul-float/2addr v8, v7
 
-    move v10, v8
+    int-to-float v9, v4
 
-    goto :goto_58
+    add-float/2addr v8, v9
 
-    :cond_b0
-    div-float/2addr v11, v2
+    float-to-int v8, v8
 
-    goto :goto_9d
+    add-int/lit8 v6, v8, -0xa
 
-    :cond_b2
-    move-object/from16 v0, p0
+    if-ge v6, v4, :cond_7a
 
-    iget v12, v0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
+    move v6, v4
 
-    const/4 v13, 0x0
+    goto :goto_1b
 
-    cmpg-float v12, v12, v13
+    :cond_5f
+    div-float/2addr v7, v0
 
-    if-gez v12, :cond_9d
+    goto :goto_4e
 
-    move-object/from16 v0, p0
+    :cond_61
+    iget v8, p0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
 
-    iget v12, v0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
+    cmpg-float v8, v8, v11
 
-    const/high16 v13, -0x4080
+    if-gez v8, :cond_4e
 
-    cmpl-float v12, v12, v13
+    iget v8, p0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
 
-    if-ltz v12, :cond_9d
+    const/high16 v9, -0x4080
 
-    const/high16 v12, 0x3f80
+    cmpl-float v8, v8, v9
 
-    move-object/from16 v0, p0
+    if-ltz v8, :cond_4e
 
-    iget v13, v0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
+    iget v8, p0, Lcom/android/server/PowerManagerService;->mLightSensorAdjustSetting:F
 
-    add-float/2addr v12, v13
+    add-float/2addr v8, v10
 
-    float-to-double v12, v12
+    float-to-double v8, v8
 
-    invoke-static {v12, v13}, Ljava/lang/Math;->sqrt(D)D
-    :try_end_d0
-    .catch Ljava/lang/Exception; {:try_start_9 .. :try_end_d0} :catch_d8
+    invoke-static {v8, v9}, Ljava/lang/Math;->sqrt(D)D
+    :try_end_76
+    .catch Ljava/lang/Exception; {:try_start_4 .. :try_end_76} :catch_7e
 
-    move-result-wide v12
+    move-result-wide v8
 
-    double-to-float v2, v12
+    double-to-float v0, v8
 
-    mul-float/2addr v11, v2
+    mul-float/2addr v7, v0
 
-    goto :goto_9d
+    goto :goto_4e
 
-    :cond_d4
-    if-le v10, v7, :cond_58
+    :cond_7a
+    if-le v6, v3, :cond_1b
 
-    move v10, v7
+    move v6, v3
 
-    goto :goto_58
+    goto :goto_1b
 
-    :catch_d8
-    move-exception v3
+    :catch_7e
+    move-exception v1
 
-    const-string v12, "PowerManagerService"
+    const-string v8, "PowerManagerService"
 
-    const-string v13, "Values array must be non-empty and must be one element longer than the auto-brightness levels array.  Check config.xml."
+    const-string v9, "Values array must be non-empty and must be one element longer than the auto-brightness levels array.  Check config.xml."
 
-    invoke-static {v12, v13, v3}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
+    invoke-static {v8, v9, v1}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    const/16 v10, 0xff
+    const/16 v6, 0xff
 
-    goto/16 :goto_58
+    goto :goto_1b
 .end method
 
 .method private getPreferredBrightness()I
-    .registers 5
+    .registers 3
 
-    :try_start_0
-    iget v2, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessOverride:I
+    iget v1, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessOverride:I
 
-    if-ltz v2, :cond_7
+    if-ltz v1, :cond_7
 
-    iget v2, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessOverride:I
+    iget v1, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessOverride:I
 
     :goto_6
-    return v2
+    return v1
 
     :cond_7
-    iget v2, p0, Lcom/android/server/PowerManagerService;->mLightSensorScreenBrightness:I
+    iget v1, p0, Lcom/android/server/PowerManagerService;->mLightSensorScreenBrightness:I
 
-    if-ltz v2, :cond_16
+    if-ltz v1, :cond_16
 
-    iget-boolean v2, p0, Lcom/android/server/PowerManagerService;->mUseSoftwareAutoBrightness:Z
+    iget-boolean v1, p0, Lcom/android/server/PowerManagerService;->mUseSoftwareAutoBrightness:Z
 
-    if-eqz v2, :cond_16
+    if-eqz v1, :cond_16
 
-    iget-boolean v2, p0, Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
+    iget-boolean v1, p0, Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
 
-    if-eqz v2, :cond_16
+    if-eqz v1, :cond_16
 
-    iget v2, p0, Lcom/android/server/PowerManagerService;->mLightSensorScreenBrightness:I
+    iget v1, p0, Lcom/android/server/PowerManagerService;->mLightSensorScreenBrightness:I
 
     goto :goto_6
 
     :cond_16
-    iget-object v2, p0, Lcom/android/server/PowerManagerService;->mContext:Landroid/content/Context;
-
-    invoke-virtual {v2}, Landroid/content/Context;->getContentResolver()Landroid/content/ContentResolver;
-
-    move-result-object v2
-
-    const-string v3, "screen_brightness"
-
-    invoke-static {v2, v3}, Landroid/provider/Settings$System;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;)I
-
-    move-result v0
+    iget v0, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessSetting:I
 
-    iget v2, p0, Lcom/android/server/PowerManagerService;->mScreenDim:I
+    iget v1, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessDim:I
 
-    invoke-static {v0, v2}, Ljava/lang/Math;->max(II)I
-    :try_end_27
-    .catch Landroid/provider/Settings$SettingNotFoundException; {:try_start_0 .. :try_end_27} :catch_29
-
-    move-result v2
-
-    goto :goto_6
-
-    :catch_29
-    move-exception v1
+    invoke-static {v0, v1}, Ljava/lang/Math;->max(II)I
 
-    const/16 v2, 0xff
+    move-result v1
 
     goto :goto_6
 .end method
@@ -2858,7 +2414,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessAnimator:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
 
     #getter for: Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->currentMask:I
-    invoke-static {v0}, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->access$6200(Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;)I
+    invoke-static {v0}, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->access$6000(Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;)I
 
     move-result v0
 
@@ -2877,84 +2433,8 @@
     goto :goto_19
 .end method
 
-.method private lightFilterReset(I)V
-    .registers 6
-
-    const/4 v3, -0x1
-
-    const/4 v1, 0x0
-
-    iput v1, p0, Lcom/android/server/PowerManagerService;->mLightFilterEqualCounter:I
-
-    iput v1, p0, Lcom/android/server/PowerManagerService;->mLightFilterIndex:I
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterWindow:I
-
-    iget v2, p0, Lcom/android/server/PowerManagerService;->mLightFilterInterval:I
-
-    div-int/2addr v0, v2
-
-    new-array v0, v0, [I
-
-    iput-object v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
-
-    if-ne p1, v3, :cond_1e
-
-    move v0, v1
-
-    :goto_12
-    iput v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSampleCounter:I
-
-    if-ne p1, v3, :cond_22
-
-    :goto_16
-    iput v1, p0, Lcom/android/server/PowerManagerService;->mLightFilterSum:I
-
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
-
-    invoke-static {v0, p1}, Ljava/util/Arrays;->fill([II)V
-
-    return-void
-
-    :cond_1e
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
-
-    array-length v0, v0
-
-    goto :goto_12
-
-    :cond_22
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSamples:[I
-
-    array-length v0, v0
-
-    mul-int v1, p1, v0
-
-    goto :goto_16
-.end method
-
-.method private lightFilterStop()V
-    .registers 3
-
-    const/4 v0, 0x0
-
-    iput-boolean v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterRunning:Z
-
-    iget-object v0, p0, Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
-
-    iget-object v1, p0, Lcom/android/server/PowerManagerService;->mLightFilterTask:Ljava/lang/Runnable;
-
-    invoke-virtual {v0, v1}, Landroid/os/Handler;->removeCallbacks(Ljava/lang/Runnable;)V
-
-    const/4 v0, -0x1
-
-    iput v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-
-    return-void
-.end method
-
 .method private lightSensorChangedLocked(IZ)V
-    .registers 11
+    .registers 10
 
     iget v4, p0, Lcom/android/server/PowerManagerService;->mPowerState:I
 
@@ -2967,20 +2447,6 @@
     return-void
 
     :cond_7
-    iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mLightDecrease:Z
-
-    if-eqz v4, :cond_d
-
-    iput p1, p0, Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
-
-    :cond_d
-    iget v4, p0, Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
-
-    if-ge v4, p1, :cond_13
-
-    iput p1, p0, Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
-
-    :cond_13
     iget v4, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
 
     int-to-float v5, p1
@@ -2999,78 +2465,29 @@
 
     if-nez v4, :cond_6
 
-    iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mIsDocked:Z
-
-    if-eqz v4, :cond_a5
+    iget-object v4, p0, Lcom/android/server/PowerManagerService;->mLcdBacklightValues:[I
 
-    move v4, p1
-
-    :goto_28
-    iget v7, p0, Lcom/android/server/PowerManagerService;->mLastLcdValue:I
-
-    iget-boolean v5, p0, Lcom/android/server/PowerManagerService;->mCustomLightEnabled:Z
-
-    if-eqz v5, :cond_a8
-
-    iget-object v5, p0, Lcom/android/server/PowerManagerService;->mCustomLightLevels:[I
-
-    :goto_30
-    iget-boolean v6, p0, Lcom/android/server/PowerManagerService;->mCustomLightEnabled:Z
-
-    if-eqz v6, :cond_ab
-
-    iget-object v6, p0, Lcom/android/server/PowerManagerService;->mCustomLcdValues:[I
-
-    :goto_36
-    invoke-direct {p0, v4, v7, v5, v6}, Lcom/android/server/PowerManagerService;->getAutoBrightnessValue(II[I[I)I
+    invoke-direct {p0, p1, v4}, Lcom/android/server/PowerManagerService;->getAutoBrightnessValue(I[I)I
 
     move-result v2
 
-    iget v6, p0, Lcom/android/server/PowerManagerService;->mLastButtonValue:I
-
-    iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mCustomLightEnabled:Z
-
-    if-eqz v4, :cond_ae
-
-    iget-object v4, p0, Lcom/android/server/PowerManagerService;->mCustomLightLevels:[I
-
-    :goto_42
-    iget-boolean v5, p0, Lcom/android/server/PowerManagerService;->mCustomLightEnabled:Z
-
-    if-eqz v5, :cond_b1
+    iget-object v4, p0, Lcom/android/server/PowerManagerService;->mButtonBacklightValues:[I
 
-    iget-object v5, p0, Lcom/android/server/PowerManagerService;->mCustomButtonValues:[I
-
-    :goto_48
-    invoke-direct {p0, p1, v6, v4, v5}, Lcom/android/server/PowerManagerService;->getAutoBrightnessValue(II[I[I)I
+    invoke-direct {p0, p1, v4}, Lcom/android/server/PowerManagerService;->getAutoBrightnessValue(I[I)I
 
     move-result v0
 
     iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mKeyboardVisible:Z
 
-    if-eqz v4, :cond_ba
-
-    iget v6, p0, Lcom/android/server/PowerManagerService;->mLastKeyboardValue:I
-
-    iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mCustomLightEnabled:Z
-
-    if-eqz v4, :cond_b4
+    if-eqz v4, :cond_6d
 
-    iget-object v4, p0, Lcom/android/server/PowerManagerService;->mCustomLightLevels:[I
+    iget-object v4, p0, Lcom/android/server/PowerManagerService;->mKeyboardBacklightValues:[I
 
-    :goto_58
-    iget-boolean v5, p0, Lcom/android/server/PowerManagerService;->mCustomLightEnabled:Z
-
-    if-eqz v5, :cond_b7
-
-    iget-object v5, p0, Lcom/android/server/PowerManagerService;->mCustomKeyboardValues:[I
-
-    :goto_5e
-    invoke-direct {p0, p1, v6, v4, v5}, Lcom/android/server/PowerManagerService;->getAutoBrightnessValue(II[I[I)I
+    invoke-direct {p0, p1, v4}, Lcom/android/server/PowerManagerService;->getAutoBrightnessValue(I[I)I
 
     move-result v1
 
-    :goto_62
+    :goto_2d
     iput v2, p0, Lcom/android/server/PowerManagerService;->mLightSensorScreenBrightness:I
 
     iput v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorButtonBrightness:I
@@ -3079,25 +2496,25 @@
 
     iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
 
-    if-eqz v4, :cond_85
+    if-eqz v4, :cond_4e
 
     iget v4, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessOverride:I
 
-    if-gez v4, :cond_85
+    if-gez v4, :cond_4e
 
     iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mSkippedScreenOn:Z
 
-    if-nez v4, :cond_83
+    if-nez v4, :cond_4e
 
     iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mInitialAnimation:Z
 
-    if-nez v4, :cond_83
+    if-nez v4, :cond_4e
 
-    if-eqz p2, :cond_bc
+    if-eqz p2, :cond_6f
 
     const/4 v3, 0x4
 
-    :goto_7b
+    :goto_46
     iget-object v4, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessAnimator:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
 
     const/4 v5, 0x2
@@ -3106,32 +2523,29 @@
 
     invoke-virtual {v4, v2, p1, v5, v6}, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->animateTo(IIII)V
 
-    :cond_83
-    iput p1, p0, Lcom/android/server/PowerManagerService;->mLastLcdValue:I
-
-    :cond_85
+    :cond_4e
     iget v4, p0, Lcom/android/server/PowerManagerService;->mButtonBrightnessOverride:I
 
-    if-gez v4, :cond_92
+    if-gez v4, :cond_5b
 
     iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessButtonKeyboard:Z
 
-    if-eqz v4, :cond_92
+    if-eqz v4, :cond_5b
 
     iget-object v4, p0, Lcom/android/server/PowerManagerService;->mButtonLight:Lcom/android/server/LightsService$Light;
 
     invoke-virtual {v4, v0}, Lcom/android/server/LightsService$Light;->setBrightness(I)V
 
-    :cond_92
+    :cond_5b
     iget v4, p0, Lcom/android/server/PowerManagerService;->mButtonBrightnessOverride:I
 
-    if-ltz v4, :cond_9a
+    if-ltz v4, :cond_63
 
     iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mKeyboardVisible:Z
 
     if-nez v4, :cond_6
 
-    :cond_9a
+    :cond_63
     iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessButtonKeyboard:Z
 
     if-eqz v4, :cond_6
@@ -3140,80 +2554,45 @@
 
     invoke-virtual {v4, v1}, Lcom/android/server/LightsService$Light;->setBrightness(I)V
 
-    goto/16 :goto_6
-
-    :cond_a5
-    iget v4, p0, Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
-
-    goto :goto_28
-
-    :cond_a8
-    iget-object v5, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessLevels:[I
-
-    goto :goto_30
-
-    :cond_ab
-    iget-object v6, p0, Lcom/android/server/PowerManagerService;->mLcdBacklightValues:[I
-
-    goto :goto_36
-
-    :cond_ae
-    iget-object v4, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessLevels:[I
-
-    goto :goto_42
-
-    :cond_b1
-    iget-object v5, p0, Lcom/android/server/PowerManagerService;->mButtonBacklightValues:[I
-
-    goto :goto_48
-
-    :cond_b4
-    iget-object v4, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessLevels:[I
-
-    goto :goto_58
-
-    :cond_b7
-    iget-object v5, p0, Lcom/android/server/PowerManagerService;->mKeyboardBacklightValues:[I
-
-    goto :goto_5e
+    goto :goto_6
 
-    :cond_ba
+    :cond_6d
     const/4 v1, 0x0
 
-    goto :goto_62
+    goto :goto_2d
 
-    :cond_bc
+    :cond_6f
     iget-object v5, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessAnimator:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
 
     monitor-enter v5
 
-    :try_start_bf
+    :try_start_72
     iget-object v4, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessAnimator:Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;
 
     iget v4, v4, Lcom/android/server/PowerManagerService$ScreenBrightnessAnimator;->currentValue:I
 
-    if-gt v4, v2, :cond_cc
+    if-gt v4, v2, :cond_7f
 
     const/16 v3, 0x78
 
-    :goto_c7
+    :goto_7a
     monitor-exit v5
 
-    goto :goto_7b
+    goto :goto_46
 
-    :catchall_c9
+    :catchall_7c
     move-exception v4
 
     monitor-exit v5
-    :try_end_cb
-    .catchall {:try_start_bf .. :try_end_cb} :catchall_c9
+    :try_end_7e
+    .catchall {:try_start_72 .. :try_end_7e} :catchall_7c
 
     throw v4
 
-    :cond_cc
+    :cond_7f
     const v3, 0x147ae1
 
-    goto :goto_c7
+    goto :goto_7a
 .end method
 
 .method private static lockType(I)Ljava/lang/String;
@@ -3313,56 +2692,6 @@
 .method private native nativeStartSurfaceFlingerAnimation(I)V
 .end method
 
-.method private parseIntArray(Ljava/lang/String;)[I
-    .registers 6
-
-    if-eqz p1, :cond_8
-
-    invoke-virtual {p1}, Ljava/lang/String;->length()I
-
-    move-result v3
-
-    if-nez v3, :cond_c
-
-    :cond_8
-    const/4 v3, 0x0
-
-    new-array v1, v3, [I
-
-    :cond_b
-    return-object v1
-
-    :cond_c
-    const-string v3, ","
-
-    invoke-virtual {p1, v3}, Ljava/lang/String;->split(Ljava/lang/String;)[Ljava/lang/String;
-
-    move-result-object v2
-
-    array-length v3, v2
-
-    new-array v1, v3, [I
-
-    const/4 v0, 0x0
-
-    :goto_16
-    array-length v3, v2
-
-    if-ge v0, v3, :cond_b
-
-    aget-object v3, v2, v0
-
-    invoke-static {v3}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I
-
-    move-result v3
-
-    aput v3, v1, v0
-
-    add-int/lit8 v0, v0, 0x1
-
-    goto :goto_16
-.end method
-
 .method private proximityChangedLocked(Z)V
     .registers 5
 
@@ -3559,20 +2888,6 @@
     goto :goto_2d
 .end method
 
-.method private resetLastLightValues()V
-    .registers 2
-
-    const/4 v0, -0x1
-
-    iput v0, p0, Lcom/android/server/PowerManagerService;->mLastLcdValue:I
-
-    iput v0, p0, Lcom/android/server/PowerManagerService;->mLastButtonValue:I
-
-    iput v0, p0, Lcom/android/server/PowerManagerService;->mLastKeyboardValue:I
-
-    return-void
-.end method
-
 .method private screenOffFinishedAnimatingLocked(I)I
     .registers 9
 
@@ -4029,7 +3344,7 @@
     goto :goto_47
 
     :cond_6d
-    if-eq v6, v5, :cond_165
+    if-eq v6, v5, :cond_162
 
     if-eqz v5, :cond_10b
 
@@ -4250,8 +3565,6 @@
 
     iput-boolean v9, p0, Lcom/android/server/PowerManagerService;->mLightSensorPendingIncrease:Z
 
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->lightFilterStop()V
-
     invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J
 
     move-result-wide v11
@@ -4259,23 +3572,23 @@
     iput-wide v11, p0, Lcom/android/server/PowerManagerService;->mScreenOffTime:J
 
     invoke-static {}, Landroid/os/Binder;->clearCallingIdentity()J
-    :try_end_130
-    .catchall {:try_start_fc .. :try_end_130} :catchall_64
+    :try_end_12d
+    .catchall {:try_start_fc .. :try_end_12d} :catchall_64
 
     move-result-wide v3
 
-    :try_start_131
+    :try_start_12e
     iget-object v9, p0, Lcom/android/server/PowerManagerService;->mBatteryStats:Lcom/android/internal/app/IBatteryStats;
 
     invoke-interface {v9}, Lcom/android/internal/app/IBatteryStats;->noteScreenOff()V
-    :try_end_136
-    .catchall {:try_start_131 .. :try_end_136} :catchall_15a
-    .catch Landroid/os/RemoteException; {:try_start_131 .. :try_end_136} :catch_14e
+    :try_end_133
+    .catchall {:try_start_12e .. :try_end_133} :catchall_157
+    .catch Landroid/os/RemoteException; {:try_start_12e .. :try_end_133} :catch_14b
 
-    :try_start_136
+    :try_start_133
     invoke-static {v3, v4}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
-    :goto_139
+    :goto_136
     iget v9, p0, Lcom/android/server/PowerManagerService;->mPowerState:I
 
     and-int/lit8 v9, v9, -0x2
@@ -4288,43 +3601,43 @@
 
     move-result v9
 
-    if-nez v9, :cond_15f
+    if-nez v9, :cond_15c
 
     move/from16 v0, p3
 
     invoke-direct {p0, v0}, Lcom/android/server/PowerManagerService;->screenOffFinishedAnimatingLocked(I)I
-    :try_end_14c
-    .catchall {:try_start_136 .. :try_end_14c} :catchall_64
+    :try_end_149
+    .catchall {:try_start_133 .. :try_end_149} :catchall_64
 
     move-result v2
 
     goto :goto_e5
 
-    :catch_14e
+    :catch_14b
     move-exception v1
 
-    :try_start_14f
+    :try_start_14c
     const-string v9, "PowerManagerService"
 
     const-string v11, "RemoteException calling noteScreenOff on BatteryStatsService"
 
     invoke-static {v9, v11, v1}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
-    :try_end_156
-    .catchall {:try_start_14f .. :try_end_156} :catchall_15a
+    :try_end_153
+    .catchall {:try_start_14c .. :try_end_153} :catchall_157
 
-    :try_start_156
+    :try_start_153
     invoke-static {v3, v4}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
-    goto :goto_139
+    goto :goto_136
 
-    :catchall_15a
+    :catchall_157
     move-exception v9
 
     invoke-static {v3, v4}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     throw v9
 
-    :cond_15f
+    :cond_15c
     const/4 v2, 0x0
 
     const-wide/16 v11, 0x0
@@ -4333,7 +3646,7 @@
 
     goto :goto_e5
 
-    :cond_165
+    :cond_162
     if-eqz v8, :cond_e5
 
     const/4 v9, 0x0
@@ -4341,8 +3654,8 @@
     move/from16 v0, p1
 
     invoke-direct {p0, v0, v9}, Lcom/android/server/PowerManagerService;->updateLightsLocked(II)V
-    :try_end_16d
-    .catchall {:try_start_156 .. :try_end_16d} :catchall_64
+    :try_end_16a
+    .catchall {:try_start_153 .. :try_end_16a} :catchall_64
 
     goto/16 :goto_e5
 .end method
@@ -4350,67 +3663,66 @@
 .method private setScreenBrightnessMode(I)V
     .registers 7
 
-    const/4 v2, 0x1
-
-    if-ne p1, v2, :cond_34
-
-    move v0, v2
-
-    :goto_4
-    iget-boolean v3, p0, Lcom/android/server/PowerManagerService;->mUseSoftwareAutoBrightness:Z
+    const/4 v2, 0x0
 
-    if-eqz v3, :cond_33
+    const/4 v1, 0x1
 
-    iget-boolean v3, p0, Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
+    iget-object v3, p0, Lcom/android/server/PowerManagerService;->mLocks:Lcom/android/server/PowerManagerService$LockList;
 
-    if-eq v3, v0, :cond_33
+    monitor-enter v3
 
-    iput-boolean v0, p0, Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
+    if-ne p1, v1, :cond_21
 
-    invoke-virtual {p0}, Lcom/android/server/PowerManagerService;->isScreenOn()Z
+    move v0, v1
 
-    move-result v3
+    :goto_8
+    :try_start_8
+    iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mUseSoftwareAutoBrightness:Z
 
-    if-eqz v3, :cond_33
+    if-eqz v4, :cond_1f
 
-    iget v3, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
+    iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
 
-    const/4 v4, 0x0
+    if-eq v4, v0, :cond_1f
 
-    cmpl-float v3, v3, v4
+    iput-boolean v0, p0, Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
 
-    if-ltz v3, :cond_28
+    iget-boolean v4, p0, Lcom/android/server/PowerManagerService;->mAutoBrightessEnabled:Z
 
-    iget v3, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
+    if-eqz v4, :cond_23
 
-    float-to-int v1, v3
+    invoke-virtual {p0}, Lcom/android/server/PowerManagerService;->isScreenOn()Z
 
-    const/high16 v3, -0x4080
+    move-result v4
 
-    iput v3, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
+    if-eqz v4, :cond_23
 
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->resetLastLightValues()V
+    :goto_1c
+    invoke-direct {p0, v1}, Lcom/android/server/PowerManagerService;->enableLightSensorLocked(Z)V
 
-    invoke-direct {p0, v1, v2}, Lcom/android/server/PowerManagerService;->lightSensorChangedLocked(IZ)V
+    :cond_1f
+    monitor-exit v3
 
-    :cond_28
-    iget v2, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
+    return-void
 
-    float-to-int v2, v2
+    :cond_21
+    move v0, v2
 
-    invoke-direct {p0, v2}, Lcom/android/server/PowerManagerService;->lightFilterReset(I)V
+    goto :goto_8
 
-    if-nez v0, :cond_33
+    :cond_23
+    move v1, v2
 
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->lightFilterStop()V
+    goto :goto_1c
 
-    :cond_33
-    return-void
+    :catchall_25
+    move-exception v1
 
-    :cond_34
-    const/4 v0, 0x0
+    monitor-exit v3
+    :try_end_27
+    .catchall {:try_start_8 .. :try_end_27} :catchall_25
 
-    goto :goto_4
+    throw v1
 .end method
 
 .method private setScreenOffTimeoutsLocked()V
@@ -4603,25 +3915,13 @@
     goto :goto_23
 
     :cond_48
-    iget-object v1, p0, Lcom/android/server/PowerManagerService;->mButtonLight:Lcom/android/server/LightsService$Light;
-
-    invoke-virtual {v1}, Lcom/android/server/LightsService$Light;->turnOff()V
-
-    iget-object v1, p0, Lcom/android/server/PowerManagerService;->mKeyboardLight:Lcom/android/server/LightsService$Light;
-
-    invoke-virtual {v1}, Lcom/android/server/LightsService$Light;->turnOff()V
-
-    const/high16 v1, -0x4080
-
-    iput v1, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-
-    const/4 v1, -0x1
+    iget-object v1, p0, Lcom/android/server/PowerManagerService;->mButtonLight:Lcom/android/server/LightsService$Light;
 
-    iput v1, p0, Lcom/android/server/PowerManagerService;->mHighestLightSensorValue:I
+    invoke-virtual {v1}, Lcom/android/server/LightsService$Light;->turnOff()V
 
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->lightFilterStop()V
+    iget-object v1, p0, Lcom/android/server/PowerManagerService;->mKeyboardLight:Lcom/android/server/LightsService$Light;
 
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->resetLastLightValues()V
+    invoke-virtual {v1}, Lcom/android/server/LightsService$Light;->turnOff()V
 
     goto :goto_44
 .end method
@@ -4976,313 +4276,6 @@
     goto :goto_15
 .end method
 
-.method private updateLightSettings()V
-    .registers 15
-
-    const/16 v13, 0x14
-
-    const/4 v12, -0x1
-
-    const/4 v8, 0x1
-
-    const/4 v9, 0x0
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService;->mContext:Landroid/content/Context;
-
-    invoke-virtual {v7}, Landroid/content/Context;->getContentResolver()Landroid/content/ContentResolver;
-
-    move-result-object v1
-
-    iget-boolean v3, p0, Lcom/android/server/PowerManagerService;->mLightFilterEnabled:Z
-
-    const-string v7, "lights_changed"
-
-    const-wide/16 v10, 0x0
-
-    invoke-static {v1, v7, v10, v11}, Landroid/provider/Settings$System;->getLong(Landroid/content/ContentResolver;Ljava/lang/String;J)J
-
-    move-result-wide v4
-
-    iget-wide v10, p0, Lcom/android/server/PowerManagerService;->mLightSettingsTag:J
-
-    cmp-long v7, v4, v10
-
-    if-nez v7, :cond_1c
-
-    :cond_1b
-    :goto_1b
-    return-void
-
-    :cond_1c
-    iput-wide v4, p0, Lcom/android/server/PowerManagerService;->mLightSettingsTag:J
-
-    const-string v7, "light_sensor_custom"
-
-    invoke-static {v1, v7, v9}, Landroid/provider/Settings$System;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
-
-    move-result v7
-
-    if-eqz v7, :cond_e0
-
-    move v7, v8
-
-    :goto_27
-    iput-boolean v7, p0, Lcom/android/server/PowerManagerService;->mCustomLightEnabled:Z
-
-    const-string v7, "light_decrease"
-
-    invoke-static {v1, v7, v9}, Landroid/provider/Settings$System;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
-
-    move-result v7
-
-    if-eqz v7, :cond_e3
-
-    move v7, v8
-
-    :goto_32
-    iput-boolean v7, p0, Lcom/android/server/PowerManagerService;->mLightDecrease:Z
-
-    const-string v7, "light_hysteresis"
-
-    const/16 v10, 0x32
-
-    invoke-static {v1, v7, v10}, Landroid/provider/Settings$System;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
-
-    move-result v7
-
-    int-to-float v7, v7
-
-    const/high16 v10, 0x42c8
-
-    div-float/2addr v7, v10
-
-    iput v7, p0, Lcom/android/server/PowerManagerService;->mLightHysteresis:F
-
-    const-string v7, "light_filter"
-
-    invoke-static {v1, v7, v9}, Landroid/provider/Settings$System;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
-
-    move-result v7
-
-    if-eqz v7, :cond_e6
-
-    move v7, v8
-
-    :goto_4b
-    iput-boolean v7, p0, Lcom/android/server/PowerManagerService;->mLightFilterEnabled:Z
-
-    const-string v7, "light_filter_window"
-
-    const/16 v10, 0x7530
-
-    invoke-static {v1, v7, v10}, Landroid/provider/Settings$System;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
-
-    move-result v7
-
-    iput v7, p0, Lcom/android/server/PowerManagerService;->mLightFilterWindow:I
-
-    const-string v7, "light_filter_interval"
-
-    const/16 v10, 0x3e8
-
-    invoke-static {v1, v7, v10}, Landroid/provider/Settings$System;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
-
-    move-result v7
-
-    iput v7, p0, Lcom/android/server/PowerManagerService;->mLightFilterInterval:I
-
-    const-string v7, "light_filter_reset"
-
-    invoke-static {v1, v7, v12}, Landroid/provider/Settings$System;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
-
-    move-result v7
-
-    iput v7, p0, Lcom/android/server/PowerManagerService;->mLightFilterReset:I
-
-    iget-boolean v7, p0, Lcom/android/server/PowerManagerService;->mCustomLightEnabled:Z
-
-    if-eqz v7, :cond_e9
-
-    const-string v7, "light_screen_dim"
-
-    invoke-static {v1, v7, v13}, Landroid/provider/Settings$System;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
-
-    move-result v7
-
-    iput v7, p0, Lcom/android/server/PowerManagerService;->mScreenDim:I
-
-    :goto_75
-    iget-boolean v7, p0, Lcom/android/server/PowerManagerService;->mLightFilterEnabled:Z
-
-    if-eqz v7, :cond_ec
-
-    if-nez v3, :cond_7e
-
-    invoke-direct {p0, v12}, Lcom/android/server/PowerManagerService;->lightFilterReset(I)V
-
-    :cond_7e
-    :goto_7e
-    iget-boolean v7, p0, Lcom/android/server/PowerManagerService;->mCustomLightEnabled:Z
-
-    if-eqz v7, :cond_1b
-
-    :try_start_82
-    const-string v7, "light_sensor_levels"
-
-    invoke-static {v1, v7}, Landroid/provider/Settings$System;->getString(Landroid/content/ContentResolver;Ljava/lang/String;)Ljava/lang/String;
-
-    move-result-object v7
-
-    invoke-direct {p0, v7}, Lcom/android/server/PowerManagerService;->parseIntArray(Ljava/lang/String;)[I
-
-    move-result-object v7
-
-    iput-object v7, p0, Lcom/android/server/PowerManagerService;->mCustomLightLevels:[I
-
-    const-string v7, "light_sensor_lcd_values"
-
-    invoke-static {v1, v7}, Landroid/provider/Settings$System;->getString(Landroid/content/ContentResolver;Ljava/lang/String;)Ljava/lang/String;
-
-    move-result-object v7
-
-    invoke-direct {p0, v7}, Lcom/android/server/PowerManagerService;->parseIntArray(Ljava/lang/String;)[I
-
-    move-result-object v7
-
-    iput-object v7, p0, Lcom/android/server/PowerManagerService;->mCustomLcdValues:[I
-
-    const-string v7, "light_sensor_button_values"
-
-    invoke-static {v1, v7}, Landroid/provider/Settings$System;->getString(Landroid/content/ContentResolver;Ljava/lang/String;)Ljava/lang/String;
-
-    move-result-object v7
-
-    invoke-direct {p0, v7}, Lcom/android/server/PowerManagerService;->parseIntArray(Ljava/lang/String;)[I
-
-    move-result-object v7
-
-    iput-object v7, p0, Lcom/android/server/PowerManagerService;->mCustomButtonValues:[I
-
-    const-string v7, "light_sensor_keyboard_values"
-
-    invoke-static {v1, v7}, Landroid/provider/Settings$System;->getString(Landroid/content/ContentResolver;Ljava/lang/String;)Ljava/lang/String;
-
-    move-result-object v7
-
-    invoke-direct {p0, v7}, Lcom/android/server/PowerManagerService;->parseIntArray(Ljava/lang/String;)[I
-
-    move-result-object v7
-
-    iput-object v7, p0, Lcom/android/server/PowerManagerService;->mCustomKeyboardValues:[I
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService;->mCustomLightLevels:[I
-
-    array-length v0, v7
-
-    if-lt v0, v8, :cond_cc
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService;->mCustomLcdValues:[I
-
-    array-length v7, v7
-
-    add-int/lit8 v8, v0, 0x1
-
-    if-ne v7, v8, :cond_cc
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService;->mCustomButtonValues:[I
-
-    array-length v7, v7
-
-    add-int/lit8 v8, v0, 0x1
-
-    if-ne v7, v8, :cond_cc
-
-    iget-object v7, p0, Lcom/android/server/PowerManagerService;->mCustomKeyboardValues:[I
-
-    array-length v7, v7
-
-    add-int/lit8 v8, v0, 0x1
-
-    if-eq v7, v8, :cond_f0
-
-    :cond_cc
-    new-instance v7, Ljava/lang/Exception;
-
-    const-string v8, "sanity check failed"
-
-    invoke-direct {v7, v8}, Ljava/lang/Exception;-><init>(Ljava/lang/String;)V
-
-    throw v7
-    :try_end_d4
-    .catch Ljava/lang/Exception; {:try_start_82 .. :try_end_d4} :catch_d4
-
-    :catch_d4
-    move-exception v2
-
-    iput-boolean v9, p0, Lcom/android/server/PowerManagerService;->mCustomLightEnabled:Z
-
-    const-string v7, "PowerManagerService"
-
-    const-string v8, "loading custom settings failed"
-
-    invoke-static {v7, v8, v2}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
-
-    goto/16 :goto_1b
-
-    :cond_e0
-    move v7, v9
-
-    goto/16 :goto_27
-
-    :cond_e3
-    move v7, v9
-
-    goto/16 :goto_32
-
-    :cond_e6
-    move v7, v9
-
-    goto/16 :goto_4b
-
-    :cond_e9
-    iput v13, p0, Lcom/android/server/PowerManagerService;->mScreenDim:I
-
-    goto :goto_75
-
-    :cond_ec
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->lightFilterStop()V
-
-    goto :goto_7e
-
-    :cond_f0
-    :try_start_f0
-    iget v7, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-
-    const/4 v8, 0x0
-
-    cmpl-float v7, v7, v8
-
-    if-ltz v7, :cond_1b
-
-    iget v7, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-
-    float-to-int v6, v7
-
-    const/high16 v7, -0x4080
-
-    iput v7, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-
-    invoke-direct {p0}, Lcom/android/server/PowerManagerService;->resetLastLightValues()V
-
-    const/4 v7, 0x1
-
-    invoke-direct {p0, v6, v7}, Lcom/android/server/PowerManagerService;->lightSensorChangedLocked(IZ)V
-    :try_end_105
-    .catch Ljava/lang/Exception; {:try_start_f0 .. :try_end_105} :catch_d4
-
-    goto/16 :goto_1b
-.end method
-
 .method private updateLightsLocked(II)V
     .registers 24
 
@@ -5388,7 +4381,7 @@
 
     and-int/lit8 v19, v11, 0x3
 
-    packed-switch v19, :pswitch_data_180
+    packed-switch v19, :pswitch_data_178
 
     :pswitch_5a
     move-object/from16 v0, p0
@@ -5415,7 +4408,7 @@
 
     move-object/from16 v0, p0
 
-    iget v0, v0, Lcom/android/server/PowerManagerService;->mScreenDim:I
+    iget v0, v0, Lcom/android/server/PowerManagerService;->mScreenBrightnessDim:I
 
     move/from16 v19, v0
 
@@ -5485,8 +4478,8 @@
 
     invoke-interface {v0, v3}, Lcom/android/internal/app/IBatteryStats;->noteScreenBrightness(I)V
     :try_end_ad
-    .catchall {:try_start_a2 .. :try_end_ad} :catchall_17a
-    .catch Landroid/os/RemoteException; {:try_start_a2 .. :try_end_ad} :catch_174
+    .catchall {:try_start_a2 .. :try_end_ad} :catchall_172
+    .catch Landroid/os/RemoteException; {:try_start_a2 .. :try_end_ad} :catch_16c
 
     invoke-static {v7, v8}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
@@ -5594,7 +4587,7 @@
     :pswitch_10f
     move-object/from16 v0, p0
 
-    iget v9, v0, Lcom/android/server/PowerManagerService;->mScreenDim:I
+    iget v9, v0, Lcom/android/server/PowerManagerService;->mScreenBrightnessDim:I
 
     goto/16 :goto_64
 
@@ -5623,7 +4616,7 @@
     :cond_127
     and-int/lit8 v19, v11, 0x1
 
-    if-eqz v19, :cond_16a
+    if-eqz v19, :cond_162
 
     const/high16 v19, 0x4270
 
@@ -5648,7 +4641,7 @@
 
     move-result v17
 
-    if-eqz v17, :cond_164
+    if-eqz v17, :cond_15c
 
     move-object/from16 v0, p0
 
@@ -5664,7 +4657,7 @@
 
     move-result v19
 
-    if-eqz v19, :cond_164
+    if-eqz v19, :cond_15c
 
     invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J
 
@@ -5676,22 +4669,14 @@
 
     iput-wide v0, v2, Lcom/android/server/PowerManagerService;->mScreenOffTime:J
 
-    const/16 v19, 0x1
-
-    move/from16 v0, v19
-
-    move-object/from16 v1, p0
-
-    iput-boolean v0, v1, Lcom/android/server/PowerManagerService;->mAlwaysOnAndDimmed:Z
-
-    :cond_164
+    :cond_15c
     move-object/from16 v0, p0
 
-    iget v3, v0, Lcom/android/server/PowerManagerService;->mScreenDim:I
+    iget v3, v0, Lcom/android/server/PowerManagerService;->mScreenBrightnessDim:I
 
     goto/16 :goto_90
 
-    :cond_16a
+    :cond_162
     const/high16 v19, 0x4270
 
     mul-float v19, v19, v14
@@ -5704,14 +4689,14 @@
 
     goto :goto_13c
 
-    :catch_174
+    :catch_16c
     move-exception v19
 
     invoke-static {v7, v8}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     goto/16 :goto_b0
 
-    :catchall_17a
+    :catchall_172
     move-exception v19
 
     invoke-static {v7, v8}, Landroid/os/Binder;->restoreCallingIdentity(J)V
@@ -5720,7 +4705,7 @@
 
     nop
 
-    :pswitch_data_180
+    :pswitch_data_178
     .packed-switch 0x0
         :pswitch_115
         :pswitch_10f
@@ -5920,7 +4905,7 @@
 
     if-lez v1, :cond_3e
 
-    if-eqz p7, :cond_85
+    if-eqz p7, :cond_82
 
     :cond_3e
     iput-wide p1, p0, Lcom/android/server/PowerManagerService;->mLastEventTime:J
@@ -5934,16 +4919,16 @@
     if-eqz v1, :cond_4a
 
     :cond_48
-    if-eqz p7, :cond_85
+    if-eqz p7, :cond_82
 
     :cond_4a
     iget-boolean v1, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessButtonKeyboard:Z
 
-    if-nez v1, :cond_93
+    if-nez v1, :cond_90
 
     iget-boolean v1, p0, Lcom/android/server/PowerManagerService;->mKeyboardVisible:Z
 
-    if-eqz v1, :cond_91
+    if-eqz v1, :cond_8e
 
     const/16 v1, 0xf
 
@@ -5968,8 +4953,8 @@
 
     invoke-interface {v1, v9, v0}, Lcom/android/internal/app/IBatteryStats;->noteUserActivity(II)V
     :try_end_65
-    .catchall {:try_start_5e .. :try_end_65} :catchall_9f
-    .catch Landroid/os/RemoteException; {:try_start_5e .. :try_end_65} :catch_9a
+    .catchall {:try_start_5e .. :try_end_65} :catchall_9c
+    .catch Landroid/os/RemoteException; {:try_start_5e .. :try_end_65} :catch_97
 
     :try_start_65
     invoke-static {v7, v8}, Landroid/os/Binder;->restoreCallingIdentity(J)V
@@ -6005,14 +4990,10 @@
 
     invoke-direct/range {v1 .. v6}, Lcom/android/server/PowerManagerService;->setTimeoutLocked(JJI)V
 
-    const/4 v1, 0x0
-
-    iput-boolean v1, p0, Lcom/android/server/PowerManagerService;->mAlwaysOnAndDimmed:Z
-
-    :cond_85
+    :cond_82
     monitor-exit v10
-    :try_end_86
-    .catchall {:try_start_65 .. :try_end_86} :catchall_1e
+    :try_end_83
+    .catchall {:try_start_65 .. :try_end_83} :catchall_1e
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService;->mPolicy:Landroid/view/WindowManagerPolicy;
 
@@ -6024,13 +5005,13 @@
 
     goto/16 :goto_b
 
-    :cond_91
+    :cond_8e
     const/4 v1, 0x7
 
     goto :goto_54
 
-    :cond_93
-    :try_start_93
+    :cond_90
+    :try_start_90
     iget v1, p0, Lcom/android/server/PowerManagerService;->mUserState:I
 
     or-int/lit8 v1, v1, 0x3
@@ -6039,21 +5020,21 @@
 
     goto :goto_56
 
-    :catch_9a
+    :catch_97
     move-exception v1
 
     invoke-static {v7, v8}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     goto :goto_68
 
-    :catchall_9f
+    :catchall_9c
     move-exception v1
 
     invoke-static {v7, v8}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     throw v1
-    :try_end_a4
-    .catchall {:try_start_93 .. :try_end_a4} :catchall_1e
+    :try_end_a1
+    .catchall {:try_start_90 .. :try_end_a1} :catchall_1e
 .end method
 
 
@@ -6625,11 +5606,11 @@
 
     invoke-virtual {v2, v3, v4}, Landroid/content/Context;->enforceCallingOrSelfPermission(Ljava/lang/String;Ljava/lang/String;)V
 
-    new-instance v1, Lcom/android/server/PowerManagerService$12;
+    new-instance v1, Lcom/android/server/PowerManagerService$11;
 
     const-string v2, "PowerManagerService.crash()"
 
-    invoke-direct {v1, p0, v2, p1}, Lcom/android/server/PowerManagerService$12;-><init>(Lcom/android/server/PowerManagerService;Ljava/lang/String;Ljava/lang/String;)V
+    invoke-direct {v1, p0, v2, p1}, Lcom/android/server/PowerManagerService$11;-><init>(Lcom/android/server/PowerManagerService;Ljava/lang/String;Ljava/lang/String;)V
 
     :try_start_f
     invoke-virtual {v1}, Ljava/lang/Thread;->start()V
@@ -8479,40 +7460,6 @@
     goto :goto_6
 .end method
 
-.method public getLightSensorButtonBrightness()I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorButtonBrightness:I
-
-    return v0
-.end method
-
-.method public getLightSensorKeyboardBrightness()I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorKeyboardBrightness:I
-
-    return v0
-.end method
-
-.method public getLightSensorScreenBrightness()I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorScreenBrightness:I
-
-    return v0
-.end method
-
-.method public getLightSensorValue()I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-
-    float-to-int v0, v0
-
-    return v0
-.end method
-
 .method getPolicyLocked()Landroid/view/WindowManagerPolicy;
     .registers 2
 
@@ -8546,32 +7493,6 @@
     return-object v0
 .end method
 
-.method public getRawLightSensorValue()I
-    .registers 3
-
-    iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterEnabled:Z
-
-    if-eqz v0, :cond_c
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-
-    const/4 v1, -0x1
-
-    if-eq v0, v1, :cond_c
-
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightFilterSample:I
-
-    :goto_b
-    return v0
-
-    :cond_c
-    invoke-virtual {p0}, Lcom/android/server/PowerManagerService;->getLightSensorValue()I
-
-    move-result v0
-
-    goto :goto_b
-.end method
-
 .method getStayOnConditionsLocked()I
     .registers 3
 
@@ -8988,7 +7909,7 @@
 
     iget-boolean v1, p0, Lcom/android/server/PowerManagerService;->mUseSoftwareAutoBrightness:Z
 
-    if-eqz v1, :cond_174
+    if-eqz v1, :cond_16e
 
     const v1, 0x111003f
 
@@ -8996,7 +7917,7 @@
 
     move-result v1
 
-    if-eqz v1, :cond_174
+    if-eqz v1, :cond_16e
 
     move v1, v10
 
@@ -9007,7 +7928,7 @@
 
     if-eqz v1, :cond_c1
 
-    const v1, 0x107002f
+    const v1, 0x107002e
 
     invoke-virtual {v7, v1}, Landroid/content/res/Resources;->getIntArray(I)[I
 
@@ -9015,7 +7936,7 @@
 
     iput-object v1, p0, Lcom/android/server/PowerManagerService;->mAutoBrightnessLevels:[I
 
-    const v1, 0x1070030
+    const v1, 0x107002f
 
     invoke-virtual {v7, v1}, Landroid/content/res/Resources;->getIntArray(I)[I
 
@@ -9023,7 +7944,7 @@
 
     iput-object v1, p0, Lcom/android/server/PowerManagerService;->mLcdBacklightValues:[I
 
-    const v1, 0x1070031
+    const v1, 0x1070030
 
     invoke-virtual {v7, v1}, Landroid/content/res/Resources;->getIntArray(I)[I
 
@@ -9031,7 +7952,7 @@
 
     iput-object v1, p0, Lcom/android/server/PowerManagerService;->mButtonBacklightValues:[I
 
-    const v1, 0x1070032
+    const v1, 0x1070031
 
     invoke-virtual {v7, v1}, Landroid/content/res/Resources;->getIntArray(I)[I
 
@@ -9058,7 +7979,7 @@
 
     const-string v3, "(name=?) or (name=?) or (name=?) or (name=?) or (name=?) or (name=?) or (name=?) or (name=?)"
 
-    const/16 v4, 0x8
+    const/4 v4, 0x7
 
     new-array v4, v4, [Ljava/lang/String;
 
@@ -9098,12 +8019,6 @@
 
     aput-object v5, v4, v12
 
-    const/4 v5, 0x7
-
-    const-string v11, "lights_changed"
-
-    aput-object v11, v4, v5
-
     move-object v5, v2
 
     invoke-virtual/range {v0 .. v5}, Landroid/content/ContentResolver;->query(Landroid/net/Uri;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;)Landroid/database/Cursor;
@@ -9206,7 +8121,7 @@
 
     const/4 v1, 0x1
 
-    :try_start_16b
+    :try_start_165
     iput-boolean v1, p0, Lcom/android/server/PowerManagerService;->mInitComplete:Z
 
     iget-object v1, p0, Lcom/android/server/PowerManagerService;->mHandlerThread:Landroid/os/HandlerThread;
@@ -9217,17 +8132,17 @@
 
     return-void
 
-    :cond_174
+    :cond_16e
     move v1, v5
 
     goto/16 :goto_8e
 
-    :catchall_177
+    :catchall_171
     move-exception v1
 
     monitor-exit v2
-    :try_end_179
-    .catchall {:try_start_16b .. :try_end_179} :catchall_177
+    :try_end_173
+    .catchall {:try_start_165 .. :try_end_173} :catchall_171
 
     throw v1
 .end method
@@ -9661,9 +8576,9 @@
     :cond_1a
     move-object v0, p1
 
-    new-instance v1, Lcom/android/server/PowerManagerService$11;
+    new-instance v1, Lcom/android/server/PowerManagerService$10;
 
-    invoke-direct {v1, p0, v0}, Lcom/android/server/PowerManagerService$11;-><init>(Lcom/android/server/PowerManagerService;Ljava/lang/String;)V
+    invoke-direct {v1, p0, v0}, Lcom/android/server/PowerManagerService$10;-><init>(Lcom/android/server/PowerManagerService;Ljava/lang/String;)V
 
     iget-object v2, p0, Lcom/android/server/PowerManagerService;->mHandler:Landroid/os/Handler;
 
@@ -9872,7 +8787,7 @@
     monitor-enter v4
 
     :try_start_c
-    iget v5, p0, Lcom/android/server/PowerManagerService;->mScreenDim:I
+    iget v5, p0, Lcom/android/server/PowerManagerService;->mScreenBrightnessDim:I
 
     invoke-static {p1, v5}, Ljava/lang/Math;->max(II)I
 
@@ -10025,7 +8940,7 @@
     :try_start_3
     iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mKeyboardVisible:Z
 
-    if-eq v0, p1, :cond_36
+    if-eq v0, p1, :cond_30
 
     iput-boolean p1, p0, Lcom/android/server/PowerManagerService;->mKeyboardVisible:Z
 
@@ -10033,11 +8948,11 @@
 
     and-int/lit8 v0, v0, 0x1
 
-    if-eqz v0, :cond_36
+    if-eqz v0, :cond_30
 
     iget-boolean v0, p0, Lcom/android/server/PowerManagerService;->mUseSoftwareAutoBrightness:Z
 
-    if-eqz v0, :cond_2b
+    if-eqz v0, :cond_25
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
 
@@ -10045,7 +8960,7 @@
 
     cmpl-float v0, v0, v1
 
-    if-ltz v0, :cond_2b
+    if-ltz v0, :cond_25
 
     iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
 
@@ -10059,13 +8974,7 @@
 
     invoke-direct {p0, v6, v0}, Lcom/android/server/PowerManagerService;->lightSensorChangedLocked(IZ)V
 
-    iget v0, p0, Lcom/android/server/PowerManagerService;->mLightSensorValue:F
-
-    float-to-int v0, v0
-
-    invoke-direct {p0, v0}, Lcom/android/server/PowerManagerService;->lightFilterReset(I)V
-
-    :cond_2b
+    :cond_25
     invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J
 
     move-result-wide v1
@@ -10080,17 +8989,17 @@
 
     invoke-virtual/range {v0 .. v5}, Lcom/android/server/PowerManagerService;->userActivity(JZIZ)V
 
-    :cond_36
+    :cond_30
     monitor-exit v7
 
     return-void
 
-    :catchall_38
+    :catchall_32
     move-exception v0
 
     monitor-exit v7
-    :try_end_3a
-    .catchall {:try_start_3 .. :try_end_3a} :catchall_38
+    :try_end_34
+    .catchall {:try_start_3 .. :try_end_34} :catchall_32
 
     throw v0
 .end method
diff -Npru stock-services/smali/com/android/server/PowerManagerService$TimeoutTask.smali pdroid-services/smali/com/android/server/PowerManagerService$TimeoutTask.smali
--- stock-services/smali/com/android/server/PowerManagerService$TimeoutTask.smali	2012-09-01 16:59:50.306745908 -0500
+++ pdroid-services/smali/com/android/server/PowerManagerService$TimeoutTask.smali	2012-09-01 17:00:06.450825966 -0500
@@ -76,7 +76,7 @@
     iget v3, p0, Lcom/android/server/PowerManagerService$TimeoutTask;->nextState:I
 
     #setter for: Lcom/android/server/PowerManagerService;->mUserState:I
-    invoke-static {v0, v3}, Lcom/android/server/PowerManagerService;->access$2702(Lcom/android/server/PowerManagerService;I)I
+    invoke-static {v0, v3}, Lcom/android/server/PowerManagerService;->access$2602(Lcom/android/server/PowerManagerService;I)I
 
     iget-object v0, p0, Lcom/android/server/PowerManagerService$TimeoutTask;->this$0:Lcom/android/server/PowerManagerService;
 
@@ -85,14 +85,14 @@
     iget-object v4, p0, Lcom/android/server/PowerManagerService$TimeoutTask;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mWakeLockState:I
-    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$2800(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v4}, Lcom/android/server/PowerManagerService;->access$2700(Lcom/android/server/PowerManagerService;)I
 
     move-result v4
 
     or-int/2addr v3, v4
 
     #calls: Lcom/android/server/PowerManagerService;->setPowerState(I)V
-    invoke-static {v0, v3}, Lcom/android/server/PowerManagerService;->access$2900(Lcom/android/server/PowerManagerService;I)V
+    invoke-static {v0, v3}, Lcom/android/server/PowerManagerService;->access$2800(Lcom/android/server/PowerManagerService;I)V
 
     invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J
 
@@ -122,7 +122,7 @@
     iget-object v0, p0, Lcom/android/server/PowerManagerService$TimeoutTask;->this$0:Lcom/android/server/PowerManagerService;
 
     #getter for: Lcom/android/server/PowerManagerService;->mDimDelay:I
-    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$3000(Lcom/android/server/PowerManagerService;)I
+    invoke-static {v0}, Lcom/android/server/PowerManagerService;->access$2900(Lcom/android/server/PowerManagerService;)I
 
     move-result v0
 
@@ -135,7 +135,7 @@
     const/4 v5, 0x1
 
     #calls: Lcom/android/server/PowerManagerService;->setTimeoutLocked(JJI)V
-    invoke-static/range {v0 .. v5}, Lcom/android/server/PowerManagerService;->access$3100(Lcom/android/server/PowerManagerService;JJI)V
+    invoke-static/range {v0 .. v5}, Lcom/android/server/PowerManagerService;->access$3000(Lcom/android/server/PowerManagerService;JJI)V
 
     goto :goto_2c
 
@@ -148,7 +148,7 @@
     const/4 v5, 0x0
 
     #calls: Lcom/android/server/PowerManagerService;->setTimeoutLocked(JJI)V
-    invoke-static/range {v0 .. v5}, Lcom/android/server/PowerManagerService;->access$3100(Lcom/android/server/PowerManagerService;JJI)V
+    invoke-static/range {v0 .. v5}, Lcom/android/server/PowerManagerService;->access$3000(Lcom/android/server/PowerManagerService;JJI)V
     :try_end_4a
     .catchall {:try_start_31 .. :try_end_4a} :catchall_2e
 
diff -Npru stock-services/smali/com/android/server/ProfileManagerService.smali pdroid-services/smali/com/android/server/ProfileManagerService.smali
--- stock-services/smali/com/android/server/ProfileManagerService.smali	2012-09-01 16:59:50.422746486 -0500
+++ pdroid-services/smali/com/android/server/ProfileManagerService.smali	2012-09-01 17:00:06.574826580 -0500
@@ -83,7 +83,7 @@
 .method public constructor <init>(Landroid/content/Context;)V
     .registers 7
 
-    const v4, 0x10400df
+    const v4, 0x10400dd
 
     invoke-direct {p0}, Landroid/app/IProfileManager$Stub;-><init>()V
 
diff -Npru stock-services/smali/com/android/server/RotationSwitchObserver$1.smali pdroid-services/smali/com/android/server/RotationSwitchObserver$1.smali
--- stock-services/smali/com/android/server/RotationSwitchObserver$1.smali	2012-09-01 16:59:50.426746503 -0500
+++ pdroid-services/smali/com/android/server/RotationSwitchObserver$1.smali	1969-12-31 18:00:00.000000000 -0600
@@ -1,120 +0,0 @@
-.class Lcom/android/server/RotationSwitchObserver$1;
-.super Landroid/os/Handler;
-.source "RotationSwitchObserver.java"
-
-
-# annotations
-.annotation system Ldalvik/annotation/EnclosingClass;
-    value = Lcom/android/server/RotationSwitchObserver;
-.end annotation
-
-.annotation system Ldalvik/annotation/InnerClass;
-    accessFlags = 0x0
-    name = null
-.end annotation
-
-
-# instance fields
-.field final synthetic this$0:Lcom/android/server/RotationSwitchObserver;
-
-
-# direct methods
-.method constructor <init>(Lcom/android/server/RotationSwitchObserver;)V
-    .registers 2
-
-    iput-object p1, p0, Lcom/android/server/RotationSwitchObserver$1;->this$0:Lcom/android/server/RotationSwitchObserver;
-
-    invoke-direct {p0}, Landroid/os/Handler;-><init>()V
-
-    return-void
-.end method
-
-
-# virtual methods
-.method public handleMessage(Landroid/os/Message;)V
-    .registers 7
-
-    const/4 v0, 0x0
-
-    iget v2, p1, Landroid/os/Message;->what:I
-
-    packed-switch v2, :pswitch_data_3c
-
-    :goto_6
-    return-void
-
-    :pswitch_7
-    monitor-enter p0
-
-    :try_start_8
-    iget-object v2, p0, Lcom/android/server/RotationSwitchObserver$1;->this$0:Lcom/android/server/RotationSwitchObserver;
-
-    #getter for: Lcom/android/server/RotationSwitchObserver;->mLockState:I
-    invoke-static {v2}, Lcom/android/server/RotationSwitchObserver;->access$000(Lcom/android/server/RotationSwitchObserver;)I
-
-    move-result v2
-
-    if-nez v2, :cond_11
-
-    const/4 v0, 0x1
-
-    :cond_11
-    if-eqz v0, :cond_38
-
-    const v1, 0x104059e
-
-    :goto_16
-    iget-object v2, p0, Lcom/android/server/RotationSwitchObserver$1;->this$0:Lcom/android/server/RotationSwitchObserver;
-
-    #calls: Lcom/android/server/RotationSwitchObserver;->setAutoRotation(Z)V
-    invoke-static {v2, v0}, Lcom/android/server/RotationSwitchObserver;->access$100(Lcom/android/server/RotationSwitchObserver;Z)V
-
-    iget-object v2, p0, Lcom/android/server/RotationSwitchObserver$1;->this$0:Lcom/android/server/RotationSwitchObserver;
-
-    #getter for: Lcom/android/server/RotationSwitchObserver;->mContext:Landroid/content/Context;
-    invoke-static {v2}, Lcom/android/server/RotationSwitchObserver;->access$200(Lcom/android/server/RotationSwitchObserver;)Landroid/content/Context;
-
-    move-result-object v2
-
-    iget-object v3, p0, Lcom/android/server/RotationSwitchObserver$1;->this$0:Lcom/android/server/RotationSwitchObserver;
-
-    #getter for: Lcom/android/server/RotationSwitchObserver;->mContext:Landroid/content/Context;
-    invoke-static {v3}, Lcom/android/server/RotationSwitchObserver;->access$200(Lcom/android/server/RotationSwitchObserver;)Landroid/content/Context;
-
-    move-result-object v3
-
-    invoke-virtual {v3, v1}, Landroid/content/Context;->getString(I)Ljava/lang/String;
-
-    move-result-object v3
-
-    const/4 v4, 0x0
-
-    invoke-static {v2, v3, v4}, Landroid/widget/Toast;->makeText(Landroid/content/Context;Ljava/lang/CharSequence;I)Landroid/widget/Toast;
-
-    move-result-object v2
-
-    invoke-virtual {v2}, Landroid/widget/Toast;->show()V
-
-    monitor-exit p0
-
-    goto :goto_6
-
-    :catchall_35
-    move-exception v2
-
-    monitor-exit p0
-    :try_end_37
-    .catchall {:try_start_8 .. :try_end_37} :catchall_35
-
-    throw v2
-
-    :cond_38
-    const v1, 0x104059f
-
-    goto :goto_16
-
-    :pswitch_data_3c
-    .packed-switch 0x0
-        :pswitch_7
-    .end packed-switch
-.end method
diff -Npru stock-services/smali/com/android/server/RotationSwitchObserver$2.smali pdroid-services/smali/com/android/server/RotationSwitchObserver$2.smali
--- stock-services/smali/com/android/server/RotationSwitchObserver$2.smali	2012-09-01 16:59:50.426746503 -0500
+++ pdroid-services/smali/com/android/server/RotationSwitchObserver$2.smali	1969-12-31 18:00:00.000000000 -0600
@@ -1,85 +0,0 @@
-.class Lcom/android/server/RotationSwitchObserver$2;
-.super Ljava/lang/Object;
-.source "RotationSwitchObserver.java"
-
-# interfaces
-.implements Ljava/lang/Runnable;
-
-
-# annotations
-.annotation system Ldalvik/annotation/EnclosingMethod;
-    value = Lcom/android/server/RotationSwitchObserver;->setAutoRotation(Z)V
-.end annotation
-
-.annotation system Ldalvik/annotation/InnerClass;
-    accessFlags = 0x0
-    name = null
-.end annotation
-
-
-# instance fields
-.field final synthetic this$0:Lcom/android/server/RotationSwitchObserver;
-
-.field final synthetic val$autorotate:Z
-
-
-# direct methods
-.method constructor <init>(Lcom/android/server/RotationSwitchObserver;Z)V
-    .registers 3
-
-    iput-object p1, p0, Lcom/android/server/RotationSwitchObserver$2;->this$0:Lcom/android/server/RotationSwitchObserver;
-
-    iput-boolean p2, p0, Lcom/android/server/RotationSwitchObserver$2;->val$autorotate:Z
-
-    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
-
-    return-void
-.end method
-
-
-# virtual methods
-.method public run()V
-    .registers 5
-
-    :try_start_0
-    const-string v2, "window"
-
-    invoke-static {v2}, Landroid/os/ServiceManager;->getService(Ljava/lang/String;)Landroid/os/IBinder;
-
-    move-result-object v2
-
-    invoke-static {v2}, Landroid/view/IWindowManager$Stub;->asInterface(Landroid/os/IBinder;)Landroid/view/IWindowManager;
-
-    move-result-object v1
-
-    iget-boolean v2, p0, Lcom/android/server/RotationSwitchObserver$2;->val$autorotate:Z
-
-    if-eqz v2, :cond_12
-
-    invoke-interface {v1}, Landroid/view/IWindowManager;->thawRotation()V
-
-    :goto_11
-    return-void
-
-    :cond_12
-    const/4 v2, -0x1
-
-    invoke-interface {v1, v2}, Landroid/view/IWindowManager;->freezeRotation(I)V
-    :try_end_16
-    .catch Landroid/os/RemoteException; {:try_start_0 .. :try_end_16} :catch_17
-
-    goto :goto_11
-
-    :catch_17
-    move-exception v0
-
-    invoke-static {}, Lcom/android/server/RotationSwitchObserver;->access$300()Ljava/lang/String;
-
-    move-result-object v2
-
-    const-string v3, "Unable to save auto-rotate setting"
-
-    invoke-static {v2, v3}, Landroid/util/Log;->w(Ljava/lang/String;Ljava/lang/String;)I
-
-    goto :goto_11
-.end method
diff -Npru stock-services/smali/com/android/server/RotationSwitchObserver.smali pdroid-services/smali/com/android/server/RotationSwitchObserver.smali
--- stock-services/smali/com/android/server/RotationSwitchObserver.smali	2012-09-01 16:59:50.442746578 -0500
+++ pdroid-services/smali/com/android/server/RotationSwitchObserver.smali	1969-12-31 18:00:00.000000000 -0600
@@ -1,354 +0,0 @@
-.class Lcom/android/server/RotationSwitchObserver;
-.super Landroid/os/UEventObserver;
-.source "RotationSwitchObserver.java"
-
-
-# static fields
-.field private static final LOCK_STATE_PATH:Ljava/lang/String; = "/sys/class/switch/rotationlock/state"
-
-.field private static final LOCK_UEVENT_MATCH:Ljava/lang/String; = "DEVPATH=/devices/virtual/switch/rotationlock"
-
-.field private static final LOG:Z = true
-
-.field private static final MSG_LOCK_STATE:I
-
-.field private static final TAG:Ljava/lang/String;
-
-
-# instance fields
-.field private mAutoRotation:Z
-
-.field private final mContext:Landroid/content/Context;
-
-.field private final mHandler:Landroid/os/Handler;
-
-.field private mLockState:I
-
-.field private mPreviousLockState:I
-
-.field private mSystemReady:Z
-
-
-# direct methods
-.method static constructor <clinit>()V
-    .registers 1
-
-    const-class v0, Lcom/android/server/RotationSwitchObserver;
-
-    invoke-virtual {v0}, Ljava/lang/Class;->getSimpleName()Ljava/lang/String;
-
-    move-result-object v0
-
-    sput-object v0, Lcom/android/server/RotationSwitchObserver;->TAG:Ljava/lang/String;
-
-    return-void
-.end method
-
-.method public constructor <init>(Landroid/content/Context;)V
-    .registers 3
-
-    invoke-direct {p0}, Landroid/os/UEventObserver;-><init>()V
-
-    new-instance v0, Lcom/android/server/RotationSwitchObserver$1;
-
-    invoke-direct {v0, p0}, Lcom/android/server/RotationSwitchObserver$1;-><init>(Lcom/android/server/RotationSwitchObserver;)V
-
-    iput-object v0, p0, Lcom/android/server/RotationSwitchObserver;->mHandler:Landroid/os/Handler;
-
-    iput-object p1, p0, Lcom/android/server/RotationSwitchObserver;->mContext:Landroid/content/Context;
-
-    invoke-direct {p0}, Lcom/android/server/RotationSwitchObserver;->init()V
-
-    const-string v0, "DEVPATH=/devices/virtual/switch/rotationlock"
-
-    invoke-virtual {p0, v0}, Lcom/android/server/RotationSwitchObserver;->startObserving(Ljava/lang/String;)V
-
-    return-void
-.end method
-
-.method static synthetic access$000(Lcom/android/server/RotationSwitchObserver;)I
-    .registers 2
-
-    iget v0, p0, Lcom/android/server/RotationSwitchObserver;->mLockState:I
-
-    return v0
-.end method
-
-.method static synthetic access$100(Lcom/android/server/RotationSwitchObserver;Z)V
-    .registers 2
-
-    invoke-direct {p0, p1}, Lcom/android/server/RotationSwitchObserver;->setAutoRotation(Z)V
-
-    return-void
-.end method
-
-.method static synthetic access$200(Lcom/android/server/RotationSwitchObserver;)Landroid/content/Context;
-    .registers 2
-
-    iget-object v0, p0, Lcom/android/server/RotationSwitchObserver;->mContext:Landroid/content/Context;
-
-    return-object v0
-.end method
-
-.method static synthetic access$300()Ljava/lang/String;
-    .registers 1
-
-    sget-object v0, Lcom/android/server/RotationSwitchObserver;->TAG:Ljava/lang/String;
-
-    return-object v0
-.end method
-
-.method private final init()V
-    .registers 7
-
-    const/16 v4, 0x400
-
-    new-array v0, v4, [C
-
-    :try_start_4
-    new-instance v2, Ljava/io/FileReader;
-
-    const-string v4, "/sys/class/switch/rotationlock/state"
-
-    invoke-direct {v2, v4}, Ljava/io/FileReader;-><init>(Ljava/lang/String;)V
-
-    const/4 v4, 0x0
-
-    const/16 v5, 0x400
-
-    invoke-virtual {v2, v0, v4, v5}, Ljava/io/FileReader;->read([CII)I
-
-    move-result v3
-
-    invoke-virtual {v2}, Ljava/io/FileReader;->close()V
-
-    new-instance v4, Ljava/lang/String;
-
-    const/4 v5, 0x0
-
-    invoke-direct {v4, v0, v5, v3}, Ljava/lang/String;-><init>([CII)V
-
-    invoke-virtual {v4}, Ljava/lang/String;->trim()Ljava/lang/String;
-
-    move-result-object v4
-
-    invoke-static {v4}, Ljava/lang/Integer;->valueOf(Ljava/lang/String;)Ljava/lang/Integer;
-
-    move-result-object v4
-
-    invoke-virtual {v4}, Ljava/lang/Integer;->intValue()I
-
-    move-result v4
-
-    iput v4, p0, Lcom/android/server/RotationSwitchObserver;->mLockState:I
-
-    iput v4, p0, Lcom/android/server/RotationSwitchObserver;->mPreviousLockState:I
-    :try_end_2b
-    .catch Ljava/io/FileNotFoundException; {:try_start_4 .. :try_end_2b} :catch_2c
-    .catch Ljava/lang/NumberFormatException; {:try_start_4 .. :try_end_2b} :catch_35
-    .catch Ljava/io/IOException; {:try_start_4 .. :try_end_2b} :catch_3e
-
-    :goto_2b
-    return-void
-
-    :catch_2c
-    move-exception v1
-
-    sget-object v4, Lcom/android/server/RotationSwitchObserver;->TAG:Ljava/lang/String;
-
-    const-string v5, "This kernel does not have rotation switch support"
-
-    invoke-static {v4, v5}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
-
-    goto :goto_2b
-
-    :catch_35
-    move-exception v1
-
-    sget-object v4, Lcom/android/server/RotationSwitchObserver;->TAG:Ljava/lang/String;
-
-    const-string v5, ""
-
-    invoke-static {v4, v5, v1}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
-
-    goto :goto_2b
-
-    :catch_3e
-    move-exception v1
-
-    sget-object v4, Lcom/android/server/RotationSwitchObserver;->TAG:Ljava/lang/String;
-
-    const-string v5, ""
-
-    invoke-static {v4, v5, v1}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
-
-    goto :goto_2b
-.end method
-
-.method private setAutoRotation(Z)V
-    .registers 3
-
-    iput-boolean p1, p0, Lcom/android/server/RotationSwitchObserver;->mAutoRotation:Z
-
-    new-instance v0, Lcom/android/server/RotationSwitchObserver$2;
-
-    invoke-direct {v0, p0, p1}, Lcom/android/server/RotationSwitchObserver$2;-><init>(Lcom/android/server/RotationSwitchObserver;Z)V
-
-    invoke-static {v0}, Landroid/os/AsyncTask;->execute(Ljava/lang/Runnable;)V
-
-    return-void
-.end method
-
-.method private final update()V
-    .registers 3
-
-    iget-object v0, p0, Lcom/android/server/RotationSwitchObserver;->mHandler:Landroid/os/Handler;
-
-    const/4 v1, 0x0
-
-    invoke-virtual {v0, v1}, Landroid/os/Handler;->sendEmptyMessage(I)Z
-
-    return-void
-.end method
-
-
-# virtual methods
-.method public onUEvent(Landroid/os/UEventObserver$UEvent;)V
-    .registers 7
-
-    sget-object v2, Lcom/android/server/RotationSwitchObserver;->TAG:Ljava/lang/String;
-
-    const/4 v3, 0x2
-
-    invoke-static {v2, v3}, Landroid/util/Log;->isLoggable(Ljava/lang/String;I)Z
-
-    move-result v2
-
-    if-eqz v2, :cond_25
-
-    sget-object v2, Lcom/android/server/RotationSwitchObserver;->TAG:Ljava/lang/String;
-
-    new-instance v3, Ljava/lang/StringBuilder;
-
-    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V
-
-    const-string v4, "Switch UEVENT: "
-
-    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
-
-    move-result-object v3
-
-    invoke-virtual {p1}, Landroid/os/UEventObserver$UEvent;->toString()Ljava/lang/String;
-
-    move-result-object v4
-
-    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
-
-    move-result-object v3
-
-    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
-
-    move-result-object v3
-
-    invoke-static {v2, v3}, Landroid/util/Slog;->v(Ljava/lang/String;Ljava/lang/String;)I
-
-    :cond_25
-    monitor-enter p0
-
-    :try_start_26
-    const-string v2, "SWITCH_STATE"
-
-    invoke-virtual {p1, v2}, Landroid/os/UEventObserver$UEvent;->get(Ljava/lang/String;)Ljava/lang/String;
-
-    move-result-object v2
-
-    invoke-static {v2}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I
-
-    move-result v1
-
-    iget v2, p0, Lcom/android/server/RotationSwitchObserver;->mLockState:I
-
-    if-eq v1, v2, :cond_41
-
-    iget v2, p0, Lcom/android/server/RotationSwitchObserver;->mLockState:I
-
-    iput v2, p0, Lcom/android/server/RotationSwitchObserver;->mPreviousLockState:I
-
-    iput v1, p0, Lcom/android/server/RotationSwitchObserver;->mLockState:I
-
-    iget-boolean v2, p0, Lcom/android/server/RotationSwitchObserver;->mSystemReady:Z
-
-    if-eqz v2, :cond_41
-
-    invoke-direct {p0}, Lcom/android/server/RotationSwitchObserver;->update()V
-    :try_end_41
-    .catchall {:try_start_26 .. :try_end_41} :catchall_5d
-    .catch Ljava/lang/NumberFormatException; {:try_start_26 .. :try_end_41} :catch_43
-
-    :cond_41
-    :goto_41
-    :try_start_41
-    monitor-exit p0
-
-    return-void
-
-    :catch_43
-    move-exception v0
-
-    sget-object v2, Lcom/android/server/RotationSwitchObserver;->TAG:Ljava/lang/String;
-
-    new-instance v3, Ljava/lang/StringBuilder;
-
-    invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V
-
-    const-string v4, "Could not parse switch state from event "
-
-    invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
-
-    move-result-object v3
-
-    invoke-virtual {v3, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;
-
-    move-result-object v3
-
-    invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
-
-    move-result-object v3
-
-    invoke-static {v2, v3}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;)I
-
-    goto :goto_41
-
-    :catchall_5d
-    move-exception v2
-
-    monitor-exit p0
-    :try_end_5f
-    .catchall {:try_start_41 .. :try_end_5f} :catchall_5d
-
-    throw v2
-.end method
-
-.method systemReady()V
-    .registers 2
-
-    monitor-enter p0
-
-    const/4 v0, 0x1
-
-    :try_start_2
-    iput-boolean v0, p0, Lcom/android/server/RotationSwitchObserver;->mSystemReady:Z
-
-    monitor-exit p0
-
-    return-void
-
-    :catchall_6
-    move-exception v0
-
-    monitor-exit p0
-    :try_end_8
-    .catchall {:try_start_2 .. :try_end_8} :catchall_6
-
-    throw v0
-.end method
diff -Npru stock-services/smali/com/android/server/SerialService.smali pdroid-services/smali/com/android/server/SerialService.smali
--- stock-services/smali/com/android/server/SerialService.smali	2012-09-01 16:59:50.446746598 -0500
+++ pdroid-services/smali/com/android/server/SerialService.smali	2012-09-01 17:00:06.626826832 -0500
@@ -21,7 +21,7 @@
 
     move-result-object v0
 
-    const v1, 0x1070028
+    const v1, 0x1070027
 
     invoke-virtual {v0, v1}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
diff -Npru stock-services/smali/com/android/server/ServerThread$1.smali pdroid-services/smali/com/android/server/ServerThread$1.smali
--- stock-services/smali/com/android/server/ServerThread$1.smali	2012-09-01 16:59:50.450746629 -0500
+++ pdroid-services/smali/com/android/server/ServerThread$1.smali	2012-09-01 17:00:06.638826897 -0500
@@ -56,8 +56,6 @@
 
 .field final synthetic val$recognitionF:Lcom/android/server/RecognitionManagerService;
 
-.field final synthetic val$rotateSwitchF:Lcom/android/server/RotationSwitchObserver;
-
 .field final synthetic val$safeMode:Z
 
 .field final synthetic val$statusBarF:Lcom/android/server/StatusBarManagerService;
@@ -74,8 +72,8 @@
 
 
 # direct methods
-.method constructor <init>(Lcom/android/server/ServerThread;ZLandroid/content/Context;Lcom/android/server/BatteryService;Lcom/android/server/NetworkManagementService;Lcom/android/server/net/NetworkStatsService;Lcom/android/server/net/NetworkPolicyManagerService;Lcom/android/server/ConnectivityService;Lcom/android/server/DockObserver;Lcom/android/server/RotationSwitchObserver;Lcom/android/server/usb/UsbService;Lcom/android/server/UiModeManagerService;Lcom/android/server/RecognitionManagerService;Lcom/android/server/AppWidgetService;ZLcom/android/server/WallpaperManagerService;Lcom/android/server/InputMethodManagerService;Lcom/android/server/StatusBarManagerService;Lcom/android/server/LocationManagerService;Lcom/android/server/CountryDetectorService;Lcom/android/server/ThrottleService;Lcom/android/server/NetworkTimeUpdateService;Lcom/android/server/CommonTimeManagementService;Lcom/android/server/TextServicesManagerService;Landroid/service/dreams/DreamManagerService;Lcom/android/server/input/InputManagerService;Landroid/server/BluetoothService;)V
-    .registers 29
+.method constructor <init>(Lcom/android/server/ServerThread;ZLandroid/content/Context;Lcom/android/server/BatteryService;Lcom/android/server/NetworkManagementService;Lcom/android/server/net/NetworkStatsService;Lcom/android/server/net/NetworkPolicyManagerService;Lcom/android/server/ConnectivityService;Lcom/android/server/DockObserver;Lcom/android/server/usb/UsbService;Lcom/android/server/UiModeManagerService;Lcom/android/server/RecognitionManagerService;Lcom/android/server/AppWidgetService;ZLcom/android/server/WallpaperManagerService;Lcom/android/server/InputMethodManagerService;Lcom/android/server/StatusBarManagerService;Lcom/android/server/LocationManagerService;Lcom/android/server/CountryDetectorService;Lcom/android/server/ThrottleService;Lcom/android/server/NetworkTimeUpdateService;Lcom/android/server/CommonTimeManagementService;Lcom/android/server/TextServicesManagerService;Landroid/service/dreams/DreamManagerService;Lcom/android/server/input/InputManagerService;Landroid/server/BluetoothService;)V
+    .registers 28
 
     iput-object p1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
 
@@ -95,65 +93,61 @@
 
     iput-object p9, p0, Lcom/android/server/ServerThread$1;->val$dockF:Lcom/android/server/DockObserver;
 
-    iput-object p10, p0, Lcom/android/server/ServerThread$1;->val$rotateSwitchF:Lcom/android/server/RotationSwitchObserver;
-
-    iput-object p11, p0, Lcom/android/server/ServerThread$1;->val$usbF:Lcom/android/server/usb/UsbService;
+    iput-object p10, p0, Lcom/android/server/ServerThread$1;->val$usbF:Lcom/android/server/usb/UsbService;
 
-    iput-object p12, p0, Lcom/android/server/ServerThread$1;->val$uiModeF:Lcom/android/server/UiModeManagerService;
+    iput-object p11, p0, Lcom/android/server/ServerThread$1;->val$uiModeF:Lcom/android/server/UiModeManagerService;
 
-    iput-object p13, p0, Lcom/android/server/ServerThread$1;->val$recognitionF:Lcom/android/server/RecognitionManagerService;
+    iput-object p12, p0, Lcom/android/server/ServerThread$1;->val$recognitionF:Lcom/android/server/RecognitionManagerService;
 
-    iput-object p14, p0, Lcom/android/server/ServerThread$1;->val$appWidgetF:Lcom/android/server/AppWidgetService;
+    iput-object p13, p0, Lcom/android/server/ServerThread$1;->val$appWidgetF:Lcom/android/server/AppWidgetService;
 
-    move/from16 v0, p15
+    iput-boolean p14, p0, Lcom/android/server/ServerThread$1;->val$safeMode:Z
 
-    iput-boolean v0, p0, Lcom/android/server/ServerThread$1;->val$safeMode:Z
-
-    move-object/from16 v0, p16
+    move-object/from16 v0, p15
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$wallpaperF:Lcom/android/server/WallpaperManagerService;
 
-    move-object/from16 v0, p17
+    move-object/from16 v0, p16
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$immF:Lcom/android/server/InputMethodManagerService;
 
-    move-object/from16 v0, p18
+    move-object/from16 v0, p17
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$statusBarF:Lcom/android/server/StatusBarManagerService;
 
-    move-object/from16 v0, p19
+    move-object/from16 v0, p18
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$locationF:Lcom/android/server/LocationManagerService;
 
-    move-object/from16 v0, p20
+    move-object/from16 v0, p19
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$countryDetectorF:Lcom/android/server/CountryDetectorService;
 
-    move-object/from16 v0, p21
+    move-object/from16 v0, p20
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$throttleF:Lcom/android/server/ThrottleService;
 
-    move-object/from16 v0, p22
+    move-object/from16 v0, p21
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$networkTimeUpdaterF:Lcom/android/server/NetworkTimeUpdateService;
 
-    move-object/from16 v0, p23
+    move-object/from16 v0, p22
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$commonTimeMgmtServiceF:Lcom/android/server/CommonTimeManagementService;
 
-    move-object/from16 v0, p24
+    move-object/from16 v0, p23
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$textServiceManagerServiceF:Lcom/android/server/TextServicesManagerService;
 
-    move-object/from16 v0, p25
+    move-object/from16 v0, p24
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$dreamyF:Landroid/service/dreams/DreamManagerService;
 
-    move-object/from16 v0, p26
+    move-object/from16 v0, p25
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$inputManagerF:Lcom/android/server/input/InputManagerService;
 
-    move-object/from16 v0, p27
+    move-object/from16 v0, p26
 
     iput-object v0, p0, Lcom/android/server/ServerThread$1;->val$bluetoothF:Landroid/server/BluetoothService;
 
@@ -191,7 +185,7 @@
 
     invoke-virtual {v1}, Lcom/android/server/BatteryService;->systemReady()V
     :try_end_19
-    .catch Ljava/lang/Throwable; {:try_start_10 .. :try_end_19} :catch_db
+    .catch Ljava/lang/Throwable; {:try_start_10 .. :try_end_19} :catch_d2
 
     :cond_19
     :goto_19
@@ -204,7 +198,7 @@
 
     invoke-virtual {v1}, Lcom/android/server/NetworkManagementService;->systemReady()V
     :try_end_22
-    .catch Ljava/lang/Throwable; {:try_start_19 .. :try_end_22} :catch_e5
+    .catch Ljava/lang/Throwable; {:try_start_19 .. :try_end_22} :catch_dc
 
     :cond_22
     :goto_22
@@ -217,7 +211,7 @@
 
     invoke-virtual {v1}, Lcom/android/server/net/NetworkStatsService;->systemReady()V
     :try_end_2b
-    .catch Ljava/lang/Throwable; {:try_start_22 .. :try_end_2b} :catch_ef
+    .catch Ljava/lang/Throwable; {:try_start_22 .. :try_end_2b} :catch_e6
 
     :cond_2b
     :goto_2b
@@ -230,7 +224,7 @@
 
     invoke-virtual {v1}, Lcom/android/server/net/NetworkPolicyManagerService;->systemReady()V
     :try_end_34
-    .catch Ljava/lang/Throwable; {:try_start_2b .. :try_end_34} :catch_f9
+    .catch Ljava/lang/Throwable; {:try_start_2b .. :try_end_34} :catch_f0
 
     :cond_34
     :goto_34
@@ -243,7 +237,7 @@
 
     invoke-virtual {v1}, Lcom/android/server/ConnectivityService;->systemReady()V
     :try_end_3d
-    .catch Ljava/lang/Throwable; {:try_start_34 .. :try_end_3d} :catch_103
+    .catch Ljava/lang/Throwable; {:try_start_34 .. :try_end_3d} :catch_fa
 
     :cond_3d
     :goto_3d
@@ -256,220 +250,207 @@
 
     invoke-virtual {v1}, Lcom/android/server/DockObserver;->systemReady()V
     :try_end_46
-    .catch Ljava/lang/Throwable; {:try_start_3d .. :try_end_46} :catch_10d
+    .catch Ljava/lang/Throwable; {:try_start_3d .. :try_end_46} :catch_104
 
     :cond_46
     :goto_46
     :try_start_46
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$rotateSwitchF:Lcom/android/server/RotationSwitchObserver;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$usbF:Lcom/android/server/usb/UsbService;
 
     if-eqz v1, :cond_4f
 
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$rotateSwitchF:Lcom/android/server/RotationSwitchObserver;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$usbF:Lcom/android/server/usb/UsbService;
 
-    invoke-virtual {v1}, Lcom/android/server/RotationSwitchObserver;->systemReady()V
+    invoke-virtual {v1}, Lcom/android/server/usb/UsbService;->systemReady()V
     :try_end_4f
-    .catch Ljava/lang/Throwable; {:try_start_46 .. :try_end_4f} :catch_117
+    .catch Ljava/lang/Throwable; {:try_start_46 .. :try_end_4f} :catch_10e
 
     :cond_4f
     :goto_4f
     :try_start_4f
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$usbF:Lcom/android/server/usb/UsbService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$uiModeF:Lcom/android/server/UiModeManagerService;
 
     if-eqz v1, :cond_58
 
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$usbF:Lcom/android/server/usb/UsbService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$uiModeF:Lcom/android/server/UiModeManagerService;
 
-    invoke-virtual {v1}, Lcom/android/server/usb/UsbService;->systemReady()V
+    invoke-virtual {v1}, Lcom/android/server/UiModeManagerService;->systemReady()V
     :try_end_58
-    .catch Ljava/lang/Throwable; {:try_start_4f .. :try_end_58} :catch_121
+    .catch Ljava/lang/Throwable; {:try_start_4f .. :try_end_58} :catch_118
 
     :cond_58
     :goto_58
     :try_start_58
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$uiModeF:Lcom/android/server/UiModeManagerService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$recognitionF:Lcom/android/server/RecognitionManagerService;
 
     if-eqz v1, :cond_61
 
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$uiModeF:Lcom/android/server/UiModeManagerService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$recognitionF:Lcom/android/server/RecognitionManagerService;
 
-    invoke-virtual {v1}, Lcom/android/server/UiModeManagerService;->systemReady()V
+    invoke-virtual {v1}, Lcom/android/server/RecognitionManagerService;->systemReady()V
     :try_end_61
-    .catch Ljava/lang/Throwable; {:try_start_58 .. :try_end_61} :catch_12b
+    .catch Ljava/lang/Throwable; {:try_start_58 .. :try_end_61} :catch_122
 
     :cond_61
     :goto_61
-    :try_start_61
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$recognitionF:Lcom/android/server/RecognitionManagerService;
-
-    if-eqz v1, :cond_6a
-
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$recognitionF:Lcom/android/server/RecognitionManagerService;
-
-    invoke-virtual {v1}, Lcom/android/server/RecognitionManagerService;->systemReady()V
-    :try_end_6a
-    .catch Ljava/lang/Throwable; {:try_start_61 .. :try_end_6a} :catch_135
-
-    :cond_6a
-    :goto_6a
     invoke-static {}, Lcom/android/server/Watchdog;->getInstance()Lcom/android/server/Watchdog;
 
     move-result-object v1
 
     invoke-virtual {v1}, Lcom/android/server/Watchdog;->start()V
 
-    :try_start_71
+    :try_start_68
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$appWidgetF:Lcom/android/server/AppWidgetService;
 
-    if-eqz v1, :cond_7c
+    if-eqz v1, :cond_73
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$appWidgetF:Lcom/android/server/AppWidgetService;
 
     iget-boolean v2, p0, Lcom/android/server/ServerThread$1;->val$safeMode:Z
 
     invoke-virtual {v1, v2}, Lcom/android/server/AppWidgetService;->systemReady(Z)V
-    :try_end_7c
-    .catch Ljava/lang/Throwable; {:try_start_71 .. :try_end_7c} :catch_13f
+    :try_end_73
+    .catch Ljava/lang/Throwable; {:try_start_68 .. :try_end_73} :catch_12c
 
-    :cond_7c
-    :goto_7c
-    :try_start_7c
+    :cond_73
+    :goto_73
+    :try_start_73
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$wallpaperF:Lcom/android/server/WallpaperManagerService;
 
-    if-eqz v1, :cond_85
+    if-eqz v1, :cond_7c
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$wallpaperF:Lcom/android/server/WallpaperManagerService;
 
     invoke-virtual {v1}, Lcom/android/server/WallpaperManagerService;->systemReady()V
-    :try_end_85
-    .catch Ljava/lang/Throwable; {:try_start_7c .. :try_end_85} :catch_149
+    :try_end_7c
+    .catch Ljava/lang/Throwable; {:try_start_73 .. :try_end_7c} :catch_136
 
-    :cond_85
-    :goto_85
-    :try_start_85
+    :cond_7c
+    :goto_7c
+    :try_start_7c
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$immF:Lcom/android/server/InputMethodManagerService;
 
-    if-eqz v1, :cond_90
+    if-eqz v1, :cond_87
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$immF:Lcom/android/server/InputMethodManagerService;
 
     iget-object v2, p0, Lcom/android/server/ServerThread$1;->val$statusBarF:Lcom/android/server/StatusBarManagerService;
 
     invoke-virtual {v1, v2}, Lcom/android/server/InputMethodManagerService;->systemReady(Lcom/android/server/StatusBarManagerService;)V
+    :try_end_87
+    .catch Ljava/lang/Throwable; {:try_start_7c .. :try_end_87} :catch_140
+
+    :cond_87
+    :goto_87
+    :try_start_87
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$locationF:Lcom/android/server/LocationManagerService;
+
+    if-eqz v1, :cond_90
+
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$locationF:Lcom/android/server/LocationManagerService;
+
+    invoke-virtual {v1}, Lcom/android/server/LocationManagerService;->systemReady()V
     :try_end_90
-    .catch Ljava/lang/Throwable; {:try_start_85 .. :try_end_90} :catch_153
+    .catch Ljava/lang/Throwable; {:try_start_87 .. :try_end_90} :catch_14a
 
     :cond_90
     :goto_90
     :try_start_90
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$locationF:Lcom/android/server/LocationManagerService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$countryDetectorF:Lcom/android/server/CountryDetectorService;
 
     if-eqz v1, :cond_99
 
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$locationF:Lcom/android/server/LocationManagerService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$countryDetectorF:Lcom/android/server/CountryDetectorService;
 
-    invoke-virtual {v1}, Lcom/android/server/LocationManagerService;->systemReady()V
+    invoke-virtual {v1}, Lcom/android/server/CountryDetectorService;->systemReady()V
     :try_end_99
-    .catch Ljava/lang/Throwable; {:try_start_90 .. :try_end_99} :catch_15d
+    .catch Ljava/lang/Throwable; {:try_start_90 .. :try_end_99} :catch_154
 
     :cond_99
     :goto_99
     :try_start_99
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$countryDetectorF:Lcom/android/server/CountryDetectorService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$throttleF:Lcom/android/server/ThrottleService;
 
     if-eqz v1, :cond_a2
 
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$countryDetectorF:Lcom/android/server/CountryDetectorService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$throttleF:Lcom/android/server/ThrottleService;
 
-    invoke-virtual {v1}, Lcom/android/server/CountryDetectorService;->systemReady()V
+    invoke-virtual {v1}, Lcom/android/server/ThrottleService;->systemReady()V
     :try_end_a2
-    .catch Ljava/lang/Throwable; {:try_start_99 .. :try_end_a2} :catch_167
+    .catch Ljava/lang/Throwable; {:try_start_99 .. :try_end_a2} :catch_15e
 
     :cond_a2
     :goto_a2
     :try_start_a2
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$throttleF:Lcom/android/server/ThrottleService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$networkTimeUpdaterF:Lcom/android/server/NetworkTimeUpdateService;
 
     if-eqz v1, :cond_ab
 
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$throttleF:Lcom/android/server/ThrottleService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$networkTimeUpdaterF:Lcom/android/server/NetworkTimeUpdateService;
 
-    invoke-virtual {v1}, Lcom/android/server/ThrottleService;->systemReady()V
+    invoke-virtual {v1}, Lcom/android/server/NetworkTimeUpdateService;->systemReady()V
     :try_end_ab
-    .catch Ljava/lang/Throwable; {:try_start_a2 .. :try_end_ab} :catch_171
+    .catch Ljava/lang/Throwable; {:try_start_a2 .. :try_end_ab} :catch_168
 
     :cond_ab
     :goto_ab
     :try_start_ab
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$networkTimeUpdaterF:Lcom/android/server/NetworkTimeUpdateService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$commonTimeMgmtServiceF:Lcom/android/server/CommonTimeManagementService;
 
     if-eqz v1, :cond_b4
 
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$networkTimeUpdaterF:Lcom/android/server/NetworkTimeUpdateService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$commonTimeMgmtServiceF:Lcom/android/server/CommonTimeManagementService;
 
-    invoke-virtual {v1}, Lcom/android/server/NetworkTimeUpdateService;->systemReady()V
+    invoke-virtual {v1}, Lcom/android/server/CommonTimeManagementService;->systemReady()V
     :try_end_b4
-    .catch Ljava/lang/Throwable; {:try_start_ab .. :try_end_b4} :catch_17b
+    .catch Ljava/lang/Throwable; {:try_start_ab .. :try_end_b4} :catch_172
 
     :cond_b4
     :goto_b4
     :try_start_b4
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$commonTimeMgmtServiceF:Lcom/android/server/CommonTimeManagementService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$textServiceManagerServiceF:Lcom/android/server/TextServicesManagerService;
 
     if-eqz v1, :cond_bd
 
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$commonTimeMgmtServiceF:Lcom/android/server/CommonTimeManagementService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$textServiceManagerServiceF:Lcom/android/server/TextServicesManagerService;
 
-    invoke-virtual {v1}, Lcom/android/server/CommonTimeManagementService;->systemReady()V
+    invoke-virtual {v1}, Lcom/android/server/TextServicesManagerService;->systemReady()V
     :try_end_bd
-    .catch Ljava/lang/Throwable; {:try_start_b4 .. :try_end_bd} :catch_185
+    .catch Ljava/lang/Throwable; {:try_start_b4 .. :try_end_bd} :catch_17c
 
     :cond_bd
     :goto_bd
     :try_start_bd
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$textServiceManagerServiceF:Lcom/android/server/TextServicesManagerService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$dreamyF:Landroid/service/dreams/DreamManagerService;
 
     if-eqz v1, :cond_c6
 
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$textServiceManagerServiceF:Lcom/android/server/TextServicesManagerService;
+    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$dreamyF:Landroid/service/dreams/DreamManagerService;
 
-    invoke-virtual {v1}, Lcom/android/server/TextServicesManagerService;->systemReady()V
+    invoke-virtual {v1}, Landroid/service/dreams/DreamManagerService;->systemReady()V
     :try_end_c6
-    .catch Ljava/lang/Throwable; {:try_start_bd .. :try_end_c6} :catch_18f
+    .catch Ljava/lang/Throwable; {:try_start_bd .. :try_end_c6} :catch_186
 
     :cond_c6
     :goto_c6
     :try_start_c6
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$dreamyF:Landroid/service/dreams/DreamManagerService;
-
-    if-eqz v1, :cond_cf
-
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$dreamyF:Landroid/service/dreams/DreamManagerService;
-
-    invoke-virtual {v1}, Landroid/service/dreams/DreamManagerService;->systemReady()V
-    :try_end_cf
-    .catch Ljava/lang/Throwable; {:try_start_c6 .. :try_end_cf} :catch_199
-
-    :cond_cf
-    :goto_cf
-    :try_start_cf
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$inputManagerF:Lcom/android/server/input/InputManagerService;
 
-    if-eqz v1, :cond_da
+    if-eqz v1, :cond_d1
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->val$inputManagerF:Lcom/android/server/input/InputManagerService;
 
     iget-object v2, p0, Lcom/android/server/ServerThread$1;->val$bluetoothF:Landroid/server/BluetoothService;
 
     invoke-virtual {v1, v2}, Lcom/android/server/input/InputManagerService;->systemReady(Landroid/server/BluetoothService;)V
-    :try_end_da
-    .catch Ljava/lang/Throwable; {:try_start_cf .. :try_end_da} :catch_1a3
+    :try_end_d1
+    .catch Ljava/lang/Throwable; {:try_start_c6 .. :try_end_d1} :catch_190
 
-    :cond_da
-    :goto_da
+    :cond_d1
+    :goto_d1
     return-void
 
-    :catch_db
+    :catch_d2
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -480,7 +461,7 @@
 
     goto/16 :goto_19
 
-    :catch_e5
+    :catch_dc
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -491,7 +472,7 @@
 
     goto/16 :goto_22
 
-    :catch_ef
+    :catch_e6
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -502,7 +483,7 @@
 
     goto/16 :goto_2b
 
-    :catch_f9
+    :catch_f0
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -513,7 +494,7 @@
 
     goto/16 :goto_34
 
-    :catch_103
+    :catch_fa
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -524,7 +505,7 @@
 
     goto/16 :goto_3d
 
-    :catch_10d
+    :catch_104
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -535,18 +516,7 @@
 
     goto/16 :goto_46
 
-    :catch_117
-    move-exception v0
-
-    iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
-
-    const-string v2, "making Rotation Switch Service ready"
-
-    invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
-
-    goto/16 :goto_4f
-
-    :catch_121
+    :catch_10e
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -555,9 +525,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_58
+    goto/16 :goto_4f
 
-    :catch_12b
+    :catch_118
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -566,9 +536,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_61
+    goto/16 :goto_58
 
-    :catch_135
+    :catch_122
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -577,9 +547,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_6a
+    goto/16 :goto_61
 
-    :catch_13f
+    :catch_12c
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -588,9 +558,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_7c
+    goto/16 :goto_73
 
-    :catch_149
+    :catch_136
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -599,9 +569,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_85
+    goto/16 :goto_7c
 
-    :catch_153
+    :catch_140
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -610,9 +580,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_90
+    goto/16 :goto_87
 
-    :catch_15d
+    :catch_14a
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -621,9 +591,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_99
+    goto/16 :goto_90
 
-    :catch_167
+    :catch_154
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -632,9 +602,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_a2
+    goto/16 :goto_99
 
-    :catch_171
+    :catch_15e
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -643,9 +613,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_ab
+    goto/16 :goto_a2
 
-    :catch_17b
+    :catch_168
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -654,9 +624,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_b4
+    goto/16 :goto_ab
 
-    :catch_185
+    :catch_172
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -665,9 +635,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_bd
+    goto/16 :goto_b4
 
-    :catch_18f
+    :catch_17c
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -676,9 +646,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_c6
+    goto/16 :goto_bd
 
-    :catch_199
+    :catch_186
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -687,9 +657,9 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_cf
+    goto/16 :goto_c6
 
-    :catch_1a3
+    :catch_190
     move-exception v0
 
     iget-object v1, p0, Lcom/android/server/ServerThread$1;->this$0:Lcom/android/server/ServerThread;
@@ -698,5 +668,5 @@
 
     invoke-virtual {v1, v2, v0}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_da
+    goto/16 :goto_d1
 .end method
diff -Npru stock-services/smali/com/android/server/ServerThread.smali pdroid-services/smali/com/android/server/ServerThread.smali
--- stock-services/smali/com/android/server/ServerThread.smali	2012-09-01 16:59:50.478746760 -0500
+++ pdroid-services/smali/com/android/server/ServerThread.smali	2012-09-01 17:00:06.666827033 -0500
@@ -32,6 +32,41 @@
     return-void
 .end method
 
+.method private addPrivacyService(Landroid/content/Context;)V
+    .registers 5
+
+    :try_start_0
+    const-string v1, "SystemServer"
+
+    const-string v2, "Privacy Service"
+
+    invoke-static {v1, v2}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
+
+    const-string v1, "privacy"
+
+    new-instance v2, Landroid/privacy/PrivacySettingsManagerService;
+
+    invoke-direct {v2, p1}, Landroid/privacy/PrivacySettingsManagerService;-><init>(Landroid/content/Context;)V
+
+    invoke-static {v1, v2}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
+    :try_end_11
+    .catch Ljava/lang/Throwable; {:try_start_0 .. :try_end_11} :catch_12
+
+    :goto_11
+    return-void
+
+    :catch_12
+    move-exception v0
+
+    const-string v1, "SystemServer"
+
+    const-string v2, "Failure starting Privacy Service"
+
+    invoke-static {v1, v2, v0}, Landroid/util/Log;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
+
+    goto :goto_11
+.end method
+
 .method static final startSystemUi(Landroid/content/Context;)V
     .registers 5
 
@@ -113,7 +148,7 @@
 .end method
 
 .method public run()V
-    .registers 125
+    .registers 121
 
     const/16 v3, 0xbc2
 
@@ -143,11 +178,11 @@
 
     invoke-static {v3, v9}, Landroid/os/SystemProperties;->get(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
 
-    move-result-object v103
+    move-result-object v99
 
-    if-eqz v103, :cond_4e
+    if-eqz v99, :cond_4e
 
-    invoke-virtual/range {v103 .. v103}, Ljava/lang/String;->length()I
+    invoke-virtual/range {v99 .. v99}, Ljava/lang/String;->length()I
 
     move-result v3
 
@@ -155,7 +190,7 @@
 
     const/4 v3, 0x0
 
-    move-object/from16 v0, v103
+    move-object/from16 v0, v99
 
     invoke-virtual {v0, v3}, Ljava/lang/String;->charAt(I)C
 
@@ -163,35 +198,35 @@
 
     const/16 v9, 0x31
 
-    if-ne v3, v9, :cond_708
+    if-ne v3, v9, :cond_6ec
 
-    const/16 v95, 0x1
+    const/16 v93, 0x1
 
     :goto_35
-    invoke-virtual/range {v103 .. v103}, Ljava/lang/String;->length()I
+    invoke-virtual/range {v99 .. v99}, Ljava/lang/String;->length()I
 
     move-result v3
 
     const/4 v9, 0x1
 
-    if-le v3, v9, :cond_70c
+    if-le v3, v9, :cond_6f0
 
     const/4 v3, 0x1
 
-    invoke-virtual/range {v103 .. v103}, Ljava/lang/String;->length()I
+    invoke-virtual/range {v99 .. v99}, Ljava/lang/String;->length()I
 
     move-result v9
 
-    move-object/from16 v0, v103
+    move-object/from16 v0, v99
 
     invoke-virtual {v0, v3, v9}, Ljava/lang/String;->substring(II)Ljava/lang/String;
 
-    move-result-object v94
+    move-result-object v92
 
     :goto_47
-    move/from16 v0, v95
+    move/from16 v0, v93
 
-    move-object/from16 v1, v94
+    move-object/from16 v1, v92
 
     invoke-static {v0, v1}, Lcom/android/server/pm/ShutdownThread;->rebootOrShutdown(ZLjava/lang/String;)V
 
@@ -200,19 +235,19 @@
 
     invoke-static {v3}, Landroid/os/SystemProperties;->get(Ljava/lang/String;)Ljava/lang/String;
 
-    move-result-object v67
+    move-result-object v66
 
     const-string v3, ""
 
-    move-object/from16 v0, v67
+    move-object/from16 v0, v66
 
     invoke-virtual {v3, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
 
     move-result v3
 
-    if-eqz v3, :cond_710
+    if-eqz v3, :cond_6f4
 
-    const/16 v66, 0x0
+    const/16 v65, 0x0
 
     :goto_60
     const-string v3, "1"
@@ -229,61 +264,59 @@
 
     move-result v16
 
-    const/16 v74, 0x0
+    const/16 v72, 0x0
 
-    const/16 v91, 0x0
+    const/16 v89, 0x0
 
-    const/16 v45, 0x0
+    const/16 v44, 0x0
 
-    const/16 v114, 0x0
+    const/16 v110, 0x0
 
-    const/16 v42, 0x0
+    const/16 v41, 0x0
 
     const/4 v13, 0x0
 
     const/4 v12, 0x0
 
-    const/16 v83, 0x0
+    const/16 v81, 0x0
 
-    const/16 v54, 0x0
+    const/16 v53, 0x0
 
-    const/16 v121, 0x0
+    const/16 v117, 0x0
 
-    const/16 v119, 0x0
+    const/16 v115, 0x0
 
-    const/16 v102, 0x0
+    const/16 v98, 0x0
 
-    const/16 v90, 0x0
+    const/16 v88, 0x0
 
     const/4 v4, 0x0
 
-    const/16 v123, 0x0
-
-    const/16 v46, 0x0
-
-    const/16 v48, 0x0
-
-    const/16 v61, 0x0
+    const/16 v119, 0x0
 
-    const/16 v98, 0x0
+    const/16 v45, 0x0
 
-    const/16 v112, 0x0
+    const/16 v47, 0x0
 
-    const/16 v100, 0x0
+    const/16 v60, 0x0
 
-    const/16 v110, 0x0
+    const/16 v108, 0x0
 
     const/16 v96, 0x0
 
     const/16 v106, 0x0
 
-    const/16 v85, 0x0
+    const/16 v94, 0x0
+
+    const/16 v102, 0x0
+
+    const/16 v83, 0x0
 
-    const/16 v51, 0x0
+    const/16 v50, 0x0
 
-    const/16 v73, 0x0
+    const/16 v71, 0x0
 
-    :try_start_a1
+    :try_start_9f
     const-string v3, "SystemServer"
 
     const-string v9, "Entropy Mixer"
@@ -307,10 +340,10 @@
     new-instance v6, Lcom/android/server/PowerManagerService;
 
     invoke-direct {v6}, Lcom/android/server/PowerManagerService;-><init>()V
-    :try_end_be
-    .catch Ljava/lang/RuntimeException; {:try_start_a1 .. :try_end_be} :catch_a92
+    :try_end_bc
+    .catch Ljava/lang/RuntimeException; {:try_start_9f .. :try_end_bc} :catch_a6a
 
-    :try_start_be
+    :try_start_bc
     const-string v3, "power"
 
     invoke-static {v3, v6}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
@@ -321,7 +354,7 @@
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    invoke-static/range {v66 .. v66}, Lcom/android/server/am/ActivityManagerService;->main(I)Landroid/content/Context;
+    invoke-static/range {v65 .. v65}, Lcom/android/server/am/ActivityManagerService;->main(I)Landroid/content/Context;
 
     move-result-object v4
 
@@ -365,19 +398,19 @@
 
     invoke-static {v3}, Landroid/os/SystemProperties;->get(Ljava/lang/String;)Ljava/lang/String;
 
-    move-result-object v58
+    move-result-object v57
 
-    const/16 v89, 0x0
+    const/16 v87, 0x0
 
     const-string v3, "trigger_restart_min_framework"
 
-    move-object/from16 v0, v58
+    move-object/from16 v0, v57
 
     invoke-virtual {v3, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
 
     move-result v3
 
-    if-eqz v3, :cond_716
+    if-eqz v3, :cond_6fa
 
     const-string v3, "SystemServer"
 
@@ -385,35 +418,35 @@
 
     invoke-static {v3, v9}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
 
-    const/16 v89, 0x1
+    const/16 v87, 0x1
 
-    :cond_115
-    :goto_115
-    if-eqz v66, :cond_72b
+    :cond_113
+    :goto_113
+    if-eqz v65, :cond_70f
 
     const/4 v3, 0x1
 
-    :goto_118
-    move/from16 v0, v89
+    :goto_116
+    move/from16 v0, v87
 
     invoke-static {v4, v3, v0}, Lcom/android/server/pm/PackageManagerService;->main(Landroid/content/Context;ZZ)Landroid/content/pm/IPackageManager;
-    :try_end_11d
-    .catch Ljava/lang/RuntimeException; {:try_start_be .. :try_end_11d} :catch_73a
+    :try_end_11b
+    .catch Ljava/lang/RuntimeException; {:try_start_bc .. :try_end_11b} :catch_71e
 
-    move-result-object v90
+    move-result-object v88
 
-    const/16 v69, 0x0
+    const/16 v68, 0x0
 
-    :try_start_120
-    invoke-interface/range {v90 .. v90}, Landroid/content/pm/IPackageManager;->isFirstBoot()Z
-    :try_end_123
-    .catch Landroid/os/RemoteException; {:try_start_120 .. :try_end_123} :catch_a21
-    .catch Ljava/lang/RuntimeException; {:try_start_120 .. :try_end_123} :catch_73a
+    :try_start_11e
+    invoke-interface/range {v88 .. v88}, Landroid/content/pm/IPackageManager;->isFirstBoot()Z
+    :try_end_121
+    .catch Landroid/os/RemoteException; {:try_start_11e .. :try_end_121} :catch_9f9
+    .catch Ljava/lang/RuntimeException; {:try_start_11e .. :try_end_121} :catch_71e
 
-    move-result v69
+    move-result v68
 
-    :goto_124
-    :try_start_124
+    :goto_122
+    :try_start_122
     invoke-static {}, Lcom/android/server/am/ActivityManagerService;->setSystemProcess()V
 
     invoke-virtual {v4}, Landroid/content/Context;->getContentResolver()Landroid/content/ContentResolver;
@@ -423,10 +456,10 @@
     move-object/from16 v0, p0
 
     iput-object v3, v0, Lcom/android/server/ServerThread;->mContentResolver:Landroid/content/ContentResolver;
-    :try_end_12f
-    .catch Ljava/lang/RuntimeException; {:try_start_124 .. :try_end_12f} :catch_73a
+    :try_end_12d
+    .catch Ljava/lang/RuntimeException; {:try_start_122 .. :try_end_12d} :catch_71e
 
-    :try_start_12f
+    :try_start_12d
     const-string v3, "SystemServer"
 
     const-string v9, "Account Manager"
@@ -440,12 +473,12 @@
     invoke-direct {v9, v4}, Landroid/accounts/AccountManagerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_140
-    .catch Ljava/lang/Throwable; {:try_start_12f .. :try_end_140} :catch_72e
-    .catch Ljava/lang/RuntimeException; {:try_start_12f .. :try_end_140} :catch_73a
+    :try_end_13e
+    .catch Ljava/lang/Throwable; {:try_start_12d .. :try_end_13e} :catch_712
+    .catch Ljava/lang/RuntimeException; {:try_start_12d .. :try_end_13e} :catch_71e
 
-    :goto_140
-    :try_start_140
+    :goto_13e
+    :try_start_13e
     const-string v3, "SystemServer"
 
     const-string v9, "Content Manager"
@@ -454,15 +487,19 @@
 
     const/4 v3, 0x1
 
-    move/from16 v0, v66
+    move/from16 v0, v65
 
-    if-ne v0, v3, :cond_751
+    if-ne v0, v3, :cond_735
 
     const/4 v3, 0x1
 
-    :goto_14d
+    :goto_14b
     invoke-static {v4, v3}, Landroid/content/ContentService;->main(Landroid/content/Context;Z)Landroid/content/IContentService;
 
+    move-object/from16 v0, p0
+
+    invoke-direct {v0, v4}, Lcom/android/server/ServerThread;->addPrivacyService(Landroid/content/Context;)V
+
     const-string v3, "SystemServer"
 
     const-string v9, "System Content Providers"
@@ -477,15 +514,15 @@
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v75, Lcom/android/server/LightsService;
+    new-instance v73, Lcom/android/server/LightsService;
 
-    move-object/from16 v0, v75
+    move-object/from16 v0, v73
 
     invoke-direct {v0, v4}, Lcom/android/server/LightsService;-><init>(Landroid/content/Context;)V
-    :try_end_168
-    .catch Ljava/lang/RuntimeException; {:try_start_140 .. :try_end_168} :catch_73a
+    :try_end_16b
+    .catch Ljava/lang/RuntimeException; {:try_start_13e .. :try_end_16b} :catch_71e
 
-    :try_start_168
+    :try_start_16b
     const-string v3, "SystemServer"
 
     const-string v9, "Battery Service"
@@ -494,13 +531,13 @@
 
     new-instance v5, Lcom/android/server/BatteryService;
 
-    move-object/from16 v0, v75
+    move-object/from16 v0, v73
 
     invoke-direct {v5, v4, v0}, Lcom/android/server/BatteryService;-><init>(Landroid/content/Context;Lcom/android/server/LightsService;)V
-    :try_end_176
-    .catch Ljava/lang/RuntimeException; {:try_start_168 .. :try_end_176} :catch_a9b
+    :try_end_179
+    .catch Ljava/lang/RuntimeException; {:try_start_16b .. :try_end_179} :catch_a73
 
-    :try_start_176
+    :try_start_179
     const-string v3, "battery"
 
     invoke-static {v3, v5}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
@@ -511,18 +548,18 @@
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v115, Lcom/android/server/VibratorService;
+    new-instance v111, Lcom/android/server/VibratorService;
 
-    move-object/from16 v0, v115
+    move-object/from16 v0, v111
 
     invoke-direct {v0, v4}, Lcom/android/server/VibratorService;-><init>(Landroid/content/Context;)V
-    :try_end_189
-    .catch Ljava/lang/RuntimeException; {:try_start_176 .. :try_end_189} :catch_aa4
+    :try_end_18c
+    .catch Ljava/lang/RuntimeException; {:try_start_179 .. :try_end_18c} :catch_a7c
 
-    :try_start_189
+    :try_start_18c
     const-string v3, "vibrator"
 
-    move-object/from16 v0, v115
+    move-object/from16 v0, v111
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
 
@@ -530,7 +567,7 @@
 
     move-result-object v3
 
-    move-object/from16 v0, v75
+    move-object/from16 v0, v73
 
     invoke-virtual {v6, v4, v0, v3, v5}, Lcom/android/server/PowerManagerService;->init(Landroid/content/Context;Lcom/android/server/LightsService;Landroid/app/IActivityManager;Lcom/android/server/BatteryService;)V
 
@@ -543,10 +580,10 @@
     new-instance v7, Lcom/android/server/AlarmManagerService;
 
     invoke-direct {v7, v4}, Lcom/android/server/AlarmManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_1a5
-    .catch Ljava/lang/RuntimeException; {:try_start_189 .. :try_end_1a5} :catch_aab
+    :try_end_1a8
+    .catch Ljava/lang/RuntimeException; {:try_start_18c .. :try_end_1a8} :catch_a83
 
-    :try_start_1a5
+    :try_start_1a8
     const-string v3, "alarm"
 
     invoke-static {v3, v7}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
@@ -575,39 +612,39 @@
 
     const/4 v3, 0x1
 
-    move/from16 v0, v66
+    move/from16 v0, v65
 
-    if-eq v0, v3, :cond_754
+    if-eq v0, v3, :cond_738
 
     const/4 v3, 0x1
 
     move v9, v3
 
-    :goto_1ca
-    if-nez v69, :cond_758
+    :goto_1cd
+    if-nez v68, :cond_73c
 
     const/4 v3, 0x1
 
-    :goto_1cd
-    move/from16 v0, v89
+    :goto_1d0
+    move/from16 v0, v87
 
     invoke-static {v4, v6, v9, v3, v0}, Lcom/android/server/wm/WindowManagerService;->main(Landroid/content/Context;Lcom/android/server/PowerManagerService;ZZZ)Lcom/android/server/wm/WindowManagerService;
 
-    move-result-object v123
+    move-result-object v119
 
     const-string v3, "window"
 
-    move-object/from16 v0, v123
+    move-object/from16 v0, v119
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
 
-    invoke-virtual/range {v123 .. v123}, Lcom/android/server/wm/WindowManagerService;->getInputManagerService()Lcom/android/server/input/InputManagerService;
+    invoke-virtual/range {v119 .. v119}, Lcom/android/server/wm/WindowManagerService;->getInputManagerService()Lcom/android/server/input/InputManagerService;
 
-    move-result-object v73
+    move-result-object v71
 
     const-string v3, "input"
 
-    move-object/from16 v0, v73
+    move-object/from16 v0, v71
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
 
@@ -615,7 +652,7 @@
 
     move-result-object v3
 
-    move-object/from16 v0, v123
+    move-object/from16 v0, v119
 
     invoke-virtual {v3, v0}, Lcom/android/server/am/ActivityManagerService;->setWindowManager(Lcom/android/server/wm/WindowManagerService;)V
 
@@ -631,92 +668,82 @@
 
     move-result v3
 
-    if-eqz v3, :cond_75b
+    if-eqz v3, :cond_73f
 
     const-string v3, "SystemServer"
 
     const-string v9, "No Bluetooh Service (emulator)"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
-    :try_end_203
-    .catch Ljava/lang/RuntimeException; {:try_start_1a5 .. :try_end_203} :catch_769
-
-    :goto_203
-    move-object/from16 v114, v115
-
-    move-object/from16 v74, v75
+    :try_end_206
+    .catch Ljava/lang/RuntimeException; {:try_start_1a8 .. :try_end_206} :catch_74d
 
-    :goto_207
-    invoke-virtual {v4}, Landroid/content/Context;->getResources()Landroid/content/res/Resources;
+    :goto_206
+    move-object/from16 v110, v111
 
-    move-result-object v3
+    move-object/from16 v72, v73
 
-    const v9, 0x1110041
+    :goto_20a
+    const/16 v58, 0x0
 
-    invoke-virtual {v3, v9}, Landroid/content/res/Resources;->getBoolean(I)Z
+    const/16 v100, 0x0
 
-    move-result v70
+    const/16 v69, 0x0
 
-    const/16 v59, 0x0
+    const/16 v42, 0x0
 
-    const/16 v104, 0x0
+    const/16 v90, 0x0
 
-    const/16 v71, 0x0
+    const/16 v85, 0x0
 
-    const/16 v43, 0x0
+    const/16 v113, 0x0
 
-    const/16 v92, 0x0
+    const/16 v74, 0x0
 
-    const/16 v87, 0x0
+    const/16 v55, 0x0
 
-    const/16 v117, 0x0
+    const/16 v104, 0x0
 
     const/16 v76, 0x0
 
-    const/16 v56, 0x0
-
-    const/16 v108, 0x0
-
-    const/16 v78, 0x0
-
-    const/16 v63, 0x0
+    const/16 v62, 0x0
 
     const/4 v3, 0x1
 
-    move/from16 v0, v66
+    move/from16 v0, v65
 
-    if-eq v0, v3, :cond_259
+    if-eq v0, v3, :cond_251
 
-    :try_start_22f
+    :try_start_227
     const-string v3, "SystemServer"
 
     const-string v9, "Input Method Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v72, Lcom/android/server/InputMethodManagerService;
+    new-instance v70, Lcom/android/server/InputMethodManagerService;
 
-    move-object/from16 v0, v72
+    move-object/from16 v0, v70
 
-    move-object/from16 v1, v123
+    move-object/from16 v1, v119
 
     invoke-direct {v0, v4, v1}, Lcom/android/server/InputMethodManagerService;-><init>(Landroid/content/Context;Lcom/android/server/wm/WindowManagerService;)V
-    :try_end_23f
-    .catch Ljava/lang/Throwable; {:try_start_22f .. :try_end_23f} :catch_7be
+    :try_end_237
+    .catch Ljava/lang/Throwable; {:try_start_227 .. :try_end_237} :catch_7a2
 
-    :try_start_23f
+    :try_start_237
     const-string v3, "input_method"
 
-    move-object/from16 v0, v72
+    move-object/from16 v0, v70
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_246
-    .catch Ljava/lang/Throwable; {:try_start_23f .. :try_end_246} :catch_a8d
+    :try_end_23e
+    .catch Ljava/lang/Throwable; {:try_start_237 .. :try_end_23e} :catch_a65
 
-    move-object/from16 v71, v72
+    move-object/from16 v69, v70
 
-    :goto_248
-    :try_start_248
+    :goto_240
+    :try_start_240
     const-string v3, "SystemServer"
 
     const-string v9, "Accessibility Manager"
@@ -730,24 +757,24 @@
     invoke-direct {v9, v4}, Lcom/android/server/accessibility/AccessibilityManagerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_259
-    .catch Ljava/lang/Throwable; {:try_start_248 .. :try_end_259} :catch_7ca
+    :try_end_251
+    .catch Ljava/lang/Throwable; {:try_start_240 .. :try_end_251} :catch_7ae
 
-    :cond_259
-    :goto_259
-    :try_start_259
-    invoke-virtual/range {v123 .. v123}, Lcom/android/server/wm/WindowManagerService;->displayReady()V
-    :try_end_25c
-    .catch Ljava/lang/Throwable; {:try_start_259 .. :try_end_25c} :catch_7d6
-
-    :goto_25c
-    :try_start_25c
-    invoke-interface/range {v90 .. v90}, Landroid/content/pm/IPackageManager;->performBootDexOpt()V
-    :try_end_25f
-    .catch Ljava/lang/Throwable; {:try_start_25c .. :try_end_25f} :catch_7e2
+    :cond_251
+    :goto_251
+    :try_start_251
+    invoke-virtual/range {v119 .. v119}, Lcom/android/server/wm/WindowManagerService;->displayReady()V
+    :try_end_254
+    .catch Ljava/lang/Throwable; {:try_start_251 .. :try_end_254} :catch_7ba
+
+    :goto_254
+    :try_start_254
+    invoke-interface/range {v88 .. v88}, Landroid/content/pm/IPackageManager;->performBootDexOpt()V
+    :try_end_257
+    .catch Ljava/lang/Throwable; {:try_start_254 .. :try_end_257} :catch_7c6
 
-    :goto_25f
-    :try_start_25f
+    :goto_257
+    :try_start_257
     invoke-static {}, Landroid/app/ActivityManagerNative;->getDefault()Landroid/app/IActivityManager;
 
     move-result-object v3
@@ -765,17 +792,17 @@
     const/4 v10, 0x0
 
     invoke-interface {v3, v9, v10}, Landroid/app/IActivityManager;->showBootMessage(Ljava/lang/CharSequence;Z)V
-    :try_end_272
-    .catch Landroid/os/RemoteException; {:try_start_25f .. :try_end_272} :catch_a8a
+    :try_end_26a
+    .catch Landroid/os/RemoteException; {:try_start_257 .. :try_end_26a} :catch_a62
 
-    :goto_272
+    :goto_26a
     const/4 v3, 0x1
 
-    move/from16 v0, v66
+    move/from16 v0, v65
 
-    if-eq v0, v3, :cond_ac8
+    if-eq v0, v3, :cond_aa0
 
-    const/16 v81, 0x0
+    const/16 v79, 0x0
 
     const-string v3, "0"
 
@@ -789,120 +816,120 @@
 
     move-result v3
 
-    if-nez v3, :cond_29e
+    if-nez v3, :cond_296
 
-    :try_start_287
+    :try_start_27f
     const-string v3, "SystemServer"
 
     const-string v9, "Mount Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v82, Lcom/android/server/MountService;
+    new-instance v80, Lcom/android/server/MountService;
 
-    move-object/from16 v0, v82
+    move-object/from16 v0, v80
 
     invoke-direct {v0, v4}, Lcom/android/server/MountService;-><init>(Landroid/content/Context;)V
-    :try_end_295
-    .catch Ljava/lang/Throwable; {:try_start_287 .. :try_end_295} :catch_7ee
+    :try_end_28d
+    .catch Ljava/lang/Throwable; {:try_start_27f .. :try_end_28d} :catch_7d2
 
-    :try_start_295
+    :try_start_28d
     const-string v3, "mount"
 
-    move-object/from16 v0, v82
+    move-object/from16 v0, v80
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_29c
-    .catch Ljava/lang/Throwable; {:try_start_295 .. :try_end_29c} :catch_a85
+    :try_end_294
+    .catch Ljava/lang/Throwable; {:try_start_28d .. :try_end_294} :catch_a5d
 
-    move-object/from16 v81, v82
+    move-object/from16 v79, v80
 
-    :cond_29e
-    :goto_29e
-    :try_start_29e
+    :cond_296
+    :goto_296
+    :try_start_296
     const-string v3, "SystemServer"
 
     const-string v9, "LockSettingsService"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v79, Lcom/android/internal/widget/LockSettingsService;
+    new-instance v77, Lcom/android/internal/widget/LockSettingsService;
 
-    move-object/from16 v0, v79
+    move-object/from16 v0, v77
 
     invoke-direct {v0, v4}, Lcom/android/internal/widget/LockSettingsService;-><init>(Landroid/content/Context;)V
-    :try_end_2ac
-    .catch Ljava/lang/Throwable; {:try_start_29e .. :try_end_2ac} :catch_7fa
+    :try_end_2a4
+    .catch Ljava/lang/Throwable; {:try_start_296 .. :try_end_2a4} :catch_7de
 
-    :try_start_2ac
+    :try_start_2a4
     const-string v3, "lock_settings"
 
-    move-object/from16 v0, v79
+    move-object/from16 v0, v77
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_2b3
-    .catch Ljava/lang/Throwable; {:try_start_2ac .. :try_end_2b3} :catch_a80
+    :try_end_2ab
+    .catch Ljava/lang/Throwable; {:try_start_2a4 .. :try_end_2ab} :catch_a58
 
-    move-object/from16 v78, v79
+    move-object/from16 v76, v77
 
-    :goto_2b5
-    :try_start_2b5
+    :goto_2ad
+    :try_start_2ad
     const-string v3, "SystemServer"
 
     const-string v9, "Device Policy"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v60, Lcom/android/server/DevicePolicyManagerService;
+    new-instance v59, Lcom/android/server/DevicePolicyManagerService;
 
-    move-object/from16 v0, v60
+    move-object/from16 v0, v59
 
     invoke-direct {v0, v4}, Lcom/android/server/DevicePolicyManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_2c3
-    .catch Ljava/lang/Throwable; {:try_start_2b5 .. :try_end_2c3} :catch_806
+    :try_end_2bb
+    .catch Ljava/lang/Throwable; {:try_start_2ad .. :try_end_2bb} :catch_7ea
 
-    :try_start_2c3
+    :try_start_2bb
     const-string v3, "device_policy"
 
-    move-object/from16 v0, v60
+    move-object/from16 v0, v59
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_2ca
-    .catch Ljava/lang/Throwable; {:try_start_2c3 .. :try_end_2ca} :catch_a7b
+    :try_end_2c2
+    .catch Ljava/lang/Throwable; {:try_start_2bb .. :try_end_2c2} :catch_a53
 
-    move-object/from16 v59, v60
+    move-object/from16 v58, v59
 
-    :goto_2cc
-    :try_start_2cc
+    :goto_2c4
+    :try_start_2c4
     const-string v3, "SystemServer"
 
     const-string v9, "Status Bar"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v105, Lcom/android/server/StatusBarManagerService;
+    new-instance v101, Lcom/android/server/StatusBarManagerService;
 
-    move-object/from16 v0, v105
+    move-object/from16 v0, v101
 
-    move-object/from16 v1, v123
+    move-object/from16 v1, v119
 
     invoke-direct {v0, v4, v1}, Lcom/android/server/StatusBarManagerService;-><init>(Landroid/content/Context;Lcom/android/server/wm/WindowManagerService;)V
-    :try_end_2dc
-    .catch Ljava/lang/Throwable; {:try_start_2cc .. :try_end_2dc} :catch_812
+    :try_end_2d4
+    .catch Ljava/lang/Throwable; {:try_start_2c4 .. :try_end_2d4} :catch_7f6
 
-    :try_start_2dc
+    :try_start_2d4
     const-string v3, "statusbar"
 
-    move-object/from16 v0, v105
+    move-object/from16 v0, v101
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_2e3
-    .catch Ljava/lang/Throwable; {:try_start_2dc .. :try_end_2e3} :catch_a76
+    :try_end_2db
+    .catch Ljava/lang/Throwable; {:try_start_2d4 .. :try_end_2db} :catch_a4e
 
-    move-object/from16 v104, v105
+    move-object/from16 v100, v101
 
-    :goto_2e5
-    :try_start_2e5
+    :goto_2dd
+    :try_start_2dd
     const-string v3, "SystemServer"
 
     const-string v9, "Clipboard Service"
@@ -916,11 +943,11 @@
     invoke-direct {v9, v4}, Lcom/android/server/ClipboardService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_2f6
-    .catch Ljava/lang/Throwable; {:try_start_2e5 .. :try_end_2f6} :catch_81e
+    :try_end_2ee
+    .catch Ljava/lang/Throwable; {:try_start_2dd .. :try_end_2ee} :catch_802
 
-    :goto_2f6
-    :try_start_2f6
+    :goto_2ee
+    :try_start_2ee
     const-string v3, "SystemServer"
 
     const-string v9, "NetworkManagement Service"
@@ -934,65 +961,65 @@
     const-string v3, "network_management"
 
     invoke-static {v3, v13}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_306
-    .catch Ljava/lang/Throwable; {:try_start_2f6 .. :try_end_306} :catch_82a
+    :try_end_2fe
+    .catch Ljava/lang/Throwable; {:try_start_2ee .. :try_end_2fe} :catch_80e
 
-    :goto_306
-    :try_start_306
+    :goto_2fe
+    :try_start_2fe
     const-string v3, "SystemServer"
 
     const-string v9, "Text Service Manager Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v109, Lcom/android/server/TextServicesManagerService;
+    new-instance v105, Lcom/android/server/TextServicesManagerService;
 
-    move-object/from16 v0, v109
+    move-object/from16 v0, v105
 
     invoke-direct {v0, v4}, Lcom/android/server/TextServicesManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_314
-    .catch Ljava/lang/Throwable; {:try_start_306 .. :try_end_314} :catch_836
+    :try_end_30c
+    .catch Ljava/lang/Throwable; {:try_start_2fe .. :try_end_30c} :catch_81a
 
-    :try_start_314
+    :try_start_30c
     const-string v3, "textservices"
 
-    move-object/from16 v0, v109
+    move-object/from16 v0, v105
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_31b
-    .catch Ljava/lang/Throwable; {:try_start_314 .. :try_end_31b} :catch_a71
+    :try_end_313
+    .catch Ljava/lang/Throwable; {:try_start_30c .. :try_end_313} :catch_a49
 
-    move-object/from16 v108, v109
+    move-object/from16 v104, v105
 
-    :goto_31d
-    :try_start_31d
+    :goto_315
+    :try_start_315
     const-string v3, "SystemServer"
 
     const-string v9, "NetworkStats Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v84, Lcom/android/server/net/NetworkStatsService;
+    new-instance v82, Lcom/android/server/net/NetworkStatsService;
 
-    move-object/from16 v0, v84
+    move-object/from16 v0, v82
 
     invoke-direct {v0, v4, v13, v7}, Lcom/android/server/net/NetworkStatsService;-><init>(Landroid/content/Context;Landroid/os/INetworkManagementService;Landroid/app/IAlarmManager;)V
-    :try_end_32b
-    .catch Ljava/lang/Throwable; {:try_start_31d .. :try_end_32b} :catch_842
+    :try_end_323
+    .catch Ljava/lang/Throwable; {:try_start_315 .. :try_end_323} :catch_826
 
-    :try_start_32b
+    :try_start_323
     const-string v3, "netstats"
 
-    move-object/from16 v0, v84
+    move-object/from16 v0, v82
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_332
-    .catch Ljava/lang/Throwable; {:try_start_32b .. :try_end_332} :catch_a6c
+    :try_end_32a
+    .catch Ljava/lang/Throwable; {:try_start_323 .. :try_end_32a} :catch_a44
 
-    move-object/from16 v12, v84
+    move-object/from16 v12, v82
 
-    :goto_334
-    :try_start_334
+    :goto_32c
+    :try_start_32c
     const-string v3, "SystemServer"
 
     const-string v9, "NetworkPolicy Service"
@@ -1010,111 +1037,111 @@
     move-object v11, v6
 
     invoke-direct/range {v8 .. v13}, Lcom/android/server/net/NetworkPolicyManagerService;-><init>(Landroid/content/Context;Landroid/app/IActivityManager;Landroid/os/IPowerManager;Landroid/net/INetworkStatsService;Landroid/os/INetworkManagementService;)V
-    :try_end_346
-    .catch Ljava/lang/Throwable; {:try_start_334 .. :try_end_346} :catch_84e
+    :try_end_33e
+    .catch Ljava/lang/Throwable; {:try_start_32c .. :try_end_33e} :catch_832
 
-    :try_start_346
+    :try_start_33e
     const-string v3, "netpolicy"
 
     invoke-static {v3, v8}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_34b
-    .catch Ljava/lang/Throwable; {:try_start_346 .. :try_end_34b} :catch_a69
+    :try_end_343
+    .catch Ljava/lang/Throwable; {:try_start_33e .. :try_end_343} :catch_a41
 
-    :goto_34b
-    :try_start_34b
+    :goto_343
+    :try_start_343
     const-string v3, "SystemServer"
 
     const-string v9, "Wi-Fi P2pService"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v122, Landroid/net/wifi/p2p/WifiP2pService;
+    new-instance v118, Landroid/net/wifi/p2p/WifiP2pService;
 
-    move-object/from16 v0, v122
+    move-object/from16 v0, v118
 
     invoke-direct {v0, v4}, Landroid/net/wifi/p2p/WifiP2pService;-><init>(Landroid/content/Context;)V
-    :try_end_359
-    .catch Ljava/lang/Throwable; {:try_start_34b .. :try_end_359} :catch_85c
+    :try_end_351
+    .catch Ljava/lang/Throwable; {:try_start_343 .. :try_end_351} :catch_840
 
-    :try_start_359
+    :try_start_351
     const-string v3, "wifip2p"
 
-    move-object/from16 v0, v122
+    move-object/from16 v0, v118
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_360
-    .catch Ljava/lang/Throwable; {:try_start_359 .. :try_end_360} :catch_a64
+    :try_end_358
+    .catch Ljava/lang/Throwable; {:try_start_351 .. :try_end_358} :catch_a3c
 
-    move-object/from16 v121, v122
+    move-object/from16 v117, v118
 
-    :goto_362
-    :try_start_362
+    :goto_35a
+    :try_start_35a
     const-string v3, "SystemServer"
 
     const-string v9, "Wi-Fi Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v120, Lcom/android/server/WifiService;
+    new-instance v116, Lcom/android/server/WifiService;
 
-    move-object/from16 v0, v120
+    move-object/from16 v0, v116
 
     invoke-direct {v0, v4}, Lcom/android/server/WifiService;-><init>(Landroid/content/Context;)V
-    :try_end_370
-    .catch Ljava/lang/Throwable; {:try_start_362 .. :try_end_370} :catch_868
+    :try_end_368
+    .catch Ljava/lang/Throwable; {:try_start_35a .. :try_end_368} :catch_84c
 
-    :try_start_370
+    :try_start_368
     const-string v3, "wifi"
 
-    move-object/from16 v0, v120
+    move-object/from16 v0, v116
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_377
-    .catch Ljava/lang/Throwable; {:try_start_370 .. :try_end_377} :catch_a5f
+    :try_end_36f
+    .catch Ljava/lang/Throwable; {:try_start_368 .. :try_end_36f} :catch_a37
 
-    move-object/from16 v119, v120
+    move-object/from16 v115, v116
 
-    :goto_379
-    :try_start_379
+    :goto_371
+    :try_start_371
     const-string v3, "SystemServer"
 
     const-string v9, "Connectivity Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v55, Lcom/android/server/ConnectivityService;
+    new-instance v54, Lcom/android/server/ConnectivityService;
 
-    move-object/from16 v0, v55
+    move-object/from16 v0, v54
 
     invoke-direct {v0, v4, v13, v12, v8}, Lcom/android/server/ConnectivityService;-><init>(Landroid/content/Context;Landroid/os/INetworkManagementService;Landroid/net/INetworkStatsService;Landroid/net/INetworkPolicyManager;)V
-    :try_end_387
-    .catch Ljava/lang/Throwable; {:try_start_379 .. :try_end_387} :catch_874
+    :try_end_37f
+    .catch Ljava/lang/Throwable; {:try_start_371 .. :try_end_37f} :catch_858
 
-    :try_start_387
+    :try_start_37f
     const-string v3, "connectivity"
 
-    move-object/from16 v0, v55
+    move-object/from16 v0, v54
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
 
-    move-object/from16 v0, v55
+    move-object/from16 v0, v54
 
     invoke-virtual {v12, v0}, Lcom/android/server/net/NetworkStatsService;->bindConnectivityManager(Landroid/net/IConnectivityManager;)V
 
-    move-object/from16 v0, v55
+    move-object/from16 v0, v54
 
     invoke-virtual {v8, v0}, Lcom/android/server/net/NetworkPolicyManagerService;->bindConnectivityManager(Landroid/net/IConnectivityManager;)V
 
-    invoke-virtual/range {v119 .. v119}, Lcom/android/server/WifiService;->checkAndStartWifi()V
+    invoke-virtual/range {v115 .. v115}, Lcom/android/server/WifiService;->checkAndStartWifi()V
 
-    invoke-virtual/range {v121 .. v121}, Landroid/net/wifi/p2p/WifiP2pService;->connectivityServiceReady()V
-    :try_end_39e
-    .catch Ljava/lang/Throwable; {:try_start_387 .. :try_end_39e} :catch_a5a
+    invoke-virtual/range {v117 .. v117}, Landroid/net/wifi/p2p/WifiP2pService;->connectivityServiceReady()V
+    :try_end_396
+    .catch Ljava/lang/Throwable; {:try_start_37f .. :try_end_396} :catch_a32
 
-    move-object/from16 v54, v55
+    move-object/from16 v53, v54
 
-    :goto_3a0
-    :try_start_3a0
+    :goto_398
+    :try_start_398
     const-string v3, "SystemServer"
 
     const-string v9, "Network Service Discovery Service"
@@ -1123,45 +1150,45 @@
 
     invoke-static {v4}, Lcom/android/server/NsdService;->create(Landroid/content/Context;)Lcom/android/server/NsdService;
 
-    move-result-object v102
+    move-result-object v98
 
     const-string v3, "servicediscovery"
 
-    move-object/from16 v0, v102
+    move-object/from16 v0, v98
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_3b2
-    .catch Ljava/lang/Throwable; {:try_start_3a0 .. :try_end_3b2} :catch_880
+    :try_end_3aa
+    .catch Ljava/lang/Throwable; {:try_start_398 .. :try_end_3aa} :catch_864
 
-    :goto_3b2
-    :try_start_3b2
+    :goto_3aa
+    :try_start_3aa
     const-string v3, "SystemServer"
 
     const-string v9, "Throttle Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v107, Lcom/android/server/ThrottleService;
+    new-instance v103, Lcom/android/server/ThrottleService;
 
-    move-object/from16 v0, v107
+    move-object/from16 v0, v103
 
     invoke-direct {v0, v4}, Lcom/android/server/ThrottleService;-><init>(Landroid/content/Context;)V
-    :try_end_3c0
-    .catch Ljava/lang/Throwable; {:try_start_3b2 .. :try_end_3c0} :catch_88c
+    :try_end_3b8
+    .catch Ljava/lang/Throwable; {:try_start_3aa .. :try_end_3b8} :catch_870
 
-    :try_start_3c0
+    :try_start_3b8
     const-string v3, "throttle"
 
-    move-object/from16 v0, v107
+    move-object/from16 v0, v103
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_3c7
-    .catch Ljava/lang/Throwable; {:try_start_3c0 .. :try_end_3c7} :catch_a55
+    :try_end_3bf
+    .catch Ljava/lang/Throwable; {:try_start_3b8 .. :try_end_3bf} :catch_a2d
 
-    move-object/from16 v106, v107
+    move-object/from16 v102, v103
 
-    :goto_3c9
-    :try_start_3c9
+    :goto_3c1
+    :try_start_3c1
     const-string v3, "SystemServer"
 
     const-string v9, "UpdateLock Service"
@@ -1175,78 +1202,78 @@
     invoke-direct {v9, v4}, Lcom/android/server/UpdateLockService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_3da
-    .catch Ljava/lang/Throwable; {:try_start_3c9 .. :try_end_3da} :catch_898
+    :try_end_3d2
+    .catch Ljava/lang/Throwable; {:try_start_3c1 .. :try_end_3d2} :catch_87c
 
-    :goto_3da
-    if-eqz v81, :cond_3df
+    :goto_3d2
+    if-eqz v79, :cond_3d7
 
-    invoke-virtual/range {v81 .. v81}, Lcom/android/server/MountService;->waitForAsecScan()V
+    invoke-virtual/range {v79 .. v79}, Lcom/android/server/MountService;->waitForAsecScan()V
 
-    :cond_3df
-    :try_start_3df
+    :cond_3d7
+    :try_start_3d7
     const-string v3, "SystemServer"
 
     const-string v9, "Profile Manager"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v93, Lcom/android/server/ProfileManagerService;
+    new-instance v91, Lcom/android/server/ProfileManagerService;
 
-    move-object/from16 v0, v93
+    move-object/from16 v0, v91
 
     invoke-direct {v0, v4}, Lcom/android/server/ProfileManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_3ed
-    .catch Ljava/lang/Throwable; {:try_start_3df .. :try_end_3ed} :catch_8a4
+    :try_end_3e5
+    .catch Ljava/lang/Throwable; {:try_start_3d7 .. :try_end_3e5} :catch_888
 
-    :try_start_3ed
+    :try_start_3e5
     const-string v3, "profile"
 
-    move-object/from16 v0, v93
+    move-object/from16 v0, v91
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_3f4
-    .catch Ljava/lang/Throwable; {:try_start_3ed .. :try_end_3f4} :catch_a50
+    :try_end_3ec
+    .catch Ljava/lang/Throwable; {:try_start_3e5 .. :try_end_3ec} :catch_a28
 
-    move-object/from16 v92, v93
+    move-object/from16 v90, v91
 
-    :goto_3f6
-    :try_start_3f6
+    :goto_3ee
+    :try_start_3ee
     const-string v3, "SystemServer"
 
     const-string v9, "Notification Manager"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v88, Lcom/android/server/NotificationManagerService;
+    new-instance v86, Lcom/android/server/NotificationManagerService;
 
-    move-object/from16 v0, v88
+    move-object/from16 v0, v86
 
-    move-object/from16 v1, v104
+    move-object/from16 v1, v100
 
-    move-object/from16 v2, v74
+    move-object/from16 v2, v72
 
     invoke-direct {v0, v4, v1, v2}, Lcom/android/server/NotificationManagerService;-><init>(Landroid/content/Context;Lcom/android/server/StatusBarManagerService;Lcom/android/server/LightsService;)V
-    :try_end_408
-    .catch Ljava/lang/Throwable; {:try_start_3f6 .. :try_end_408} :catch_8b0
+    :try_end_400
+    .catch Ljava/lang/Throwable; {:try_start_3ee .. :try_end_400} :catch_894
 
-    :try_start_408
+    :try_start_400
     const-string v3, "notification"
 
-    move-object/from16 v0, v88
+    move-object/from16 v0, v86
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
 
-    move-object/from16 v0, v88
+    move-object/from16 v0, v86
 
     invoke-virtual {v8, v0}, Lcom/android/server/net/NetworkPolicyManagerService;->bindNotificationManager(Landroid/app/INotificationManager;)V
-    :try_end_414
-    .catch Ljava/lang/Throwable; {:try_start_408 .. :try_end_414} :catch_a4b
+    :try_end_40c
+    .catch Ljava/lang/Throwable; {:try_start_400 .. :try_end_40c} :catch_a23
 
-    move-object/from16 v87, v88
+    move-object/from16 v85, v86
 
-    :goto_416
-    :try_start_416
+    :goto_40e
+    :try_start_40e
     const-string v3, "SystemServer"
 
     const-string v9, "Device Storage Monitor"
@@ -1260,65 +1287,65 @@
     invoke-direct {v9, v4}, Lcom/android/server/DeviceStorageMonitorService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_427
-    .catch Ljava/lang/Throwable; {:try_start_416 .. :try_end_427} :catch_8bc
+    :try_end_41f
+    .catch Ljava/lang/Throwable; {:try_start_40e .. :try_end_41f} :catch_8a0
 
-    :goto_427
-    :try_start_427
+    :goto_41f
+    :try_start_41f
     const-string v3, "SystemServer"
 
     const-string v9, "Location Manager"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v77, Lcom/android/server/LocationManagerService;
+    new-instance v75, Lcom/android/server/LocationManagerService;
 
-    move-object/from16 v0, v77
+    move-object/from16 v0, v75
 
     invoke-direct {v0, v4}, Lcom/android/server/LocationManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_435
-    .catch Ljava/lang/Throwable; {:try_start_427 .. :try_end_435} :catch_8c8
+    :try_end_42d
+    .catch Ljava/lang/Throwable; {:try_start_41f .. :try_end_42d} :catch_8ac
 
-    :try_start_435
+    :try_start_42d
     const-string v3, "location"
 
-    move-object/from16 v0, v77
+    move-object/from16 v0, v75
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_43c
-    .catch Ljava/lang/Throwable; {:try_start_435 .. :try_end_43c} :catch_a46
+    :try_end_434
+    .catch Ljava/lang/Throwable; {:try_start_42d .. :try_end_434} :catch_a1e
 
-    move-object/from16 v76, v77
+    move-object/from16 v74, v75
 
-    :goto_43e
-    :try_start_43e
+    :goto_436
+    :try_start_436
     const-string v3, "SystemServer"
 
     const-string v9, "Country Detector"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v57, Lcom/android/server/CountryDetectorService;
+    new-instance v56, Lcom/android/server/CountryDetectorService;
 
-    move-object/from16 v0, v57
+    move-object/from16 v0, v56
 
     invoke-direct {v0, v4}, Lcom/android/server/CountryDetectorService;-><init>(Landroid/content/Context;)V
-    :try_end_44c
-    .catch Ljava/lang/Throwable; {:try_start_43e .. :try_end_44c} :catch_8d4
+    :try_end_444
+    .catch Ljava/lang/Throwable; {:try_start_436 .. :try_end_444} :catch_8b8
 
-    :try_start_44c
+    :try_start_444
     const-string v3, "country_detector"
 
-    move-object/from16 v0, v57
+    move-object/from16 v0, v56
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_453
-    .catch Ljava/lang/Throwable; {:try_start_44c .. :try_end_453} :catch_a41
+    :try_end_44b
+    .catch Ljava/lang/Throwable; {:try_start_444 .. :try_end_44b} :catch_a19
 
-    move-object/from16 v56, v57
+    move-object/from16 v55, v56
 
-    :goto_455
-    :try_start_455
+    :goto_44d
+    :try_start_44d
     const-string v3, "SystemServer"
 
     const-string v9, "Search Service"
@@ -1332,11 +1359,11 @@
     invoke-direct {v9, v4}, Landroid/server/search/SearchManagerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_466
-    .catch Ljava/lang/Throwable; {:try_start_455 .. :try_end_466} :catch_8e0
+    :try_end_45e
+    .catch Ljava/lang/Throwable; {:try_start_44d .. :try_end_45e} :catch_8c4
 
-    :goto_466
-    :try_start_466
+    :goto_45e
+    :try_start_45e
     const-string v3, "SystemServer"
 
     const-string v9, "DropBox Service"
@@ -1356,10 +1383,10 @@
     invoke-direct {v9, v4, v10}, Lcom/android/server/DropBoxManagerService;-><init>(Landroid/content/Context;Ljava/io/File;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_47e
-    .catch Ljava/lang/Throwable; {:try_start_466 .. :try_end_47e} :catch_8ec
+    :try_end_476
+    .catch Ljava/lang/Throwable; {:try_start_45e .. :try_end_476} :catch_8d0
 
-    :goto_47e
+    :goto_476
     invoke-virtual {v4}, Landroid/content/Context;->getResources()Landroid/content/res/Resources;
 
     move-result-object v3
@@ -1370,38 +1397,38 @@
 
     move-result v3
 
-    if-eqz v3, :cond_4a4
+    if-eqz v3, :cond_49c
 
-    :try_start_48b
+    :try_start_483
     const-string v3, "SystemServer"
 
     const-string v9, "Wallpaper Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    if-nez v16, :cond_4a4
+    if-nez v16, :cond_49c
 
-    new-instance v118, Lcom/android/server/WallpaperManagerService;
+    new-instance v114, Lcom/android/server/WallpaperManagerService;
 
-    move-object/from16 v0, v118
+    move-object/from16 v0, v114
 
     invoke-direct {v0, v4}, Lcom/android/server/WallpaperManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_49b
-    .catch Ljava/lang/Throwable; {:try_start_48b .. :try_end_49b} :catch_8f8
+    :try_end_493
+    .catch Ljava/lang/Throwable; {:try_start_483 .. :try_end_493} :catch_8dc
 
-    :try_start_49b
+    :try_start_493
     const-string v3, "wallpaper"
 
-    move-object/from16 v0, v118
+    move-object/from16 v0, v114
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_4a2
-    .catch Ljava/lang/Throwable; {:try_start_49b .. :try_end_4a2} :catch_a3c
+    :try_end_49a
+    .catch Ljava/lang/Throwable; {:try_start_493 .. :try_end_49a} :catch_a14
 
-    move-object/from16 v117, v118
+    move-object/from16 v113, v114
 
-    :cond_4a4
-    :goto_4a4
+    :cond_49c
+    :goto_49c
     const-string v3, "0"
 
     const-string v9, "system_init.startaudioservice"
@@ -1414,9 +1441,9 @@
 
     move-result v3
 
-    if-nez v3, :cond_4c3
+    if-nez v3, :cond_4bb
 
-    :try_start_4b2
+    :try_start_4aa
     const-string v3, "SystemServer"
 
     const-string v9, "Audio Service"
@@ -1430,51 +1457,30 @@
     invoke-direct {v9, v4}, Landroid/media/AudioService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_4c3
-    .catch Ljava/lang/Throwable; {:try_start_4b2 .. :try_end_4c3} :catch_904
+    :try_end_4bb
+    .catch Ljava/lang/Throwable; {:try_start_4aa .. :try_end_4bb} :catch_8e8
 
-    :cond_4c3
-    :goto_4c3
-    :try_start_4c3
+    :cond_4bb
+    :goto_4bb
+    :try_start_4bb
     const-string v3, "SystemServer"
 
     const-string v9, "Dock Observer"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v62, Lcom/android/server/DockObserver;
+    new-instance v61, Lcom/android/server/DockObserver;
 
-    move-object/from16 v0, v62
+    move-object/from16 v0, v61
 
     invoke-direct {v0, v4, v6}, Lcom/android/server/DockObserver;-><init>(Landroid/content/Context;Lcom/android/server/PowerManagerService;)V
-    :try_end_4d1
-    .catch Ljava/lang/Throwable; {:try_start_4c3 .. :try_end_4d1} :catch_910
+    :try_end_4c9
+    .catch Ljava/lang/Throwable; {:try_start_4bb .. :try_end_4c9} :catch_8f4
 
-    move-object/from16 v61, v62
+    move-object/from16 v60, v61
 
-    :goto_4d3
-    if-eqz v70, :cond_4e5
-
-    :try_start_4d5
-    const-string v3, "SystemServer"
-
-    const-string v9, "Rotation Switch Observer"
-
-    invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
-
-    new-instance v99, Lcom/android/server/RotationSwitchObserver;
-
-    move-object/from16 v0, v99
-
-    invoke-direct {v0, v4}, Lcom/android/server/RotationSwitchObserver;-><init>(Landroid/content/Context;)V
-    :try_end_4e3
-    .catch Ljava/lang/Throwable; {:try_start_4d5 .. :try_end_4e3} :catch_91c
-
-    move-object/from16 v98, v99
-
-    :cond_4e5
-    :goto_4e5
-    :try_start_4e5
+    :goto_4cb
+    :try_start_4cb
     const-string v3, "SystemServer"
 
     const-string v9, "Wired Accessory Observer"
@@ -1484,83 +1490,83 @@
     new-instance v3, Lcom/android/server/WiredAccessoryObserver;
 
     invoke-direct {v3, v4}, Lcom/android/server/WiredAccessoryObserver;-><init>(Landroid/content/Context;)V
-    :try_end_4f1
-    .catch Ljava/lang/Throwable; {:try_start_4e5 .. :try_end_4f1} :catch_928
+    :try_end_4d7
+    .catch Ljava/lang/Throwable; {:try_start_4cb .. :try_end_4d7} :catch_900
 
-    :goto_4f1
-    :try_start_4f1
+    :goto_4d7
+    :try_start_4d7
     const-string v3, "SystemServer"
 
     const-string v9, "USB Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v113, Lcom/android/server/usb/UsbService;
+    new-instance v109, Lcom/android/server/usb/UsbService;
 
-    move-object/from16 v0, v113
+    move-object/from16 v0, v109
 
     invoke-direct {v0, v4}, Lcom/android/server/usb/UsbService;-><init>(Landroid/content/Context;)V
-    :try_end_4ff
-    .catch Ljava/lang/Throwable; {:try_start_4f1 .. :try_end_4ff} :catch_934
+    :try_end_4e5
+    .catch Ljava/lang/Throwable; {:try_start_4d7 .. :try_end_4e5} :catch_90c
 
-    :try_start_4ff
+    :try_start_4e5
     const-string v3, "usb"
 
-    move-object/from16 v0, v113
+    move-object/from16 v0, v109
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_506
-    .catch Ljava/lang/Throwable; {:try_start_4ff .. :try_end_506} :catch_a37
+    :try_end_4ec
+    .catch Ljava/lang/Throwable; {:try_start_4e5 .. :try_end_4ec} :catch_a0f
 
-    move-object/from16 v112, v113
+    move-object/from16 v108, v109
 
-    :goto_508
-    :try_start_508
+    :goto_4ee
+    :try_start_4ee
     const-string v3, "SystemServer"
 
     const-string v9, "Serial Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v101, Lcom/android/server/SerialService;
+    new-instance v97, Lcom/android/server/SerialService;
 
-    move-object/from16 v0, v101
+    move-object/from16 v0, v97
 
     invoke-direct {v0, v4}, Lcom/android/server/SerialService;-><init>(Landroid/content/Context;)V
-    :try_end_516
-    .catch Ljava/lang/Throwable; {:try_start_508 .. :try_end_516} :catch_940
+    :try_end_4fc
+    .catch Ljava/lang/Throwable; {:try_start_4ee .. :try_end_4fc} :catch_918
 
-    :try_start_516
+    :try_start_4fc
     const-string v3, "serial"
 
-    move-object/from16 v0, v101
+    move-object/from16 v0, v97
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_51d
-    .catch Ljava/lang/Throwable; {:try_start_516 .. :try_end_51d} :catch_a32
+    :try_end_503
+    .catch Ljava/lang/Throwable; {:try_start_4fc .. :try_end_503} :catch_a0a
 
-    move-object/from16 v100, v101
+    move-object/from16 v96, v97
 
-    :goto_51f
-    :try_start_51f
+    :goto_505
+    :try_start_505
     const-string v3, "SystemServer"
 
     const-string v9, "UI Mode Manager Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v111, Lcom/android/server/UiModeManagerService;
+    new-instance v107, Lcom/android/server/UiModeManagerService;
 
-    move-object/from16 v0, v111
+    move-object/from16 v0, v107
 
     invoke-direct {v0, v4}, Lcom/android/server/UiModeManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_52d
-    .catch Ljava/lang/Throwable; {:try_start_51f .. :try_end_52d} :catch_94c
+    :try_end_513
+    .catch Ljava/lang/Throwable; {:try_start_505 .. :try_end_513} :catch_924
 
-    move-object/from16 v110, v111
+    move-object/from16 v106, v107
 
-    :goto_52f
-    :try_start_52f
+    :goto_515
+    :try_start_515
     const-string v3, "SystemServer"
 
     const-string v9, "Backup Service"
@@ -1574,56 +1580,56 @@
     invoke-direct {v9, v4}, Lcom/android/server/BackupManagerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_540
-    .catch Ljava/lang/Throwable; {:try_start_52f .. :try_end_540} :catch_958
+    :try_end_526
+    .catch Ljava/lang/Throwable; {:try_start_515 .. :try_end_526} :catch_930
 
-    :goto_540
-    :try_start_540
+    :goto_526
+    :try_start_526
     const-string v3, "SystemServer"
 
     const-string v9, "AppWidget Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v44, Lcom/android/server/AppWidgetService;
+    new-instance v43, Lcom/android/server/AppWidgetService;
 
-    move-object/from16 v0, v44
+    move-object/from16 v0, v43
 
     invoke-direct {v0, v4}, Lcom/android/server/AppWidgetService;-><init>(Landroid/content/Context;)V
-    :try_end_54e
-    .catch Ljava/lang/Throwable; {:try_start_540 .. :try_end_54e} :catch_964
+    :try_end_534
+    .catch Ljava/lang/Throwable; {:try_start_526 .. :try_end_534} :catch_93c
 
-    :try_start_54e
+    :try_start_534
     const-string v3, "appwidget"
 
-    move-object/from16 v0, v44
+    move-object/from16 v0, v43
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_555
-    .catch Ljava/lang/Throwable; {:try_start_54e .. :try_end_555} :catch_a2d
+    :try_end_53b
+    .catch Ljava/lang/Throwable; {:try_start_534 .. :try_end_53b} :catch_a05
 
-    move-object/from16 v43, v44
+    move-object/from16 v42, v43
 
-    :goto_557
-    :try_start_557
+    :goto_53d
+    :try_start_53d
     const-string v3, "SystemServer"
 
     const-string v9, "Recognition Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v97, Lcom/android/server/RecognitionManagerService;
+    new-instance v95, Lcom/android/server/RecognitionManagerService;
 
-    move-object/from16 v0, v97
+    move-object/from16 v0, v95
 
     invoke-direct {v0, v4}, Lcom/android/server/RecognitionManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_565
-    .catch Ljava/lang/Throwable; {:try_start_557 .. :try_end_565} :catch_970
+    :try_end_54b
+    .catch Ljava/lang/Throwable; {:try_start_53d .. :try_end_54b} :catch_948
 
-    move-object/from16 v96, v97
+    move-object/from16 v94, v95
 
-    :goto_567
-    :try_start_567
+    :goto_54d
+    :try_start_54d
     const-string v3, "SystemServer"
 
     const-string v9, "DiskStats Service"
@@ -1637,11 +1643,11 @@
     invoke-direct {v9, v4}, Lcom/android/server/DiskStatsService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_578
-    .catch Ljava/lang/Throwable; {:try_start_567 .. :try_end_578} :catch_97c
+    :try_end_55e
+    .catch Ljava/lang/Throwable; {:try_start_54d .. :try_end_55e} :catch_954
 
-    :goto_578
-    :try_start_578
+    :goto_55e
+    :try_start_55e
     const-string v3, "SystemServer"
 
     const-string v9, "SamplingProfiler Service"
@@ -1655,56 +1661,56 @@
     invoke-direct {v9, v4}, Lcom/android/server/SamplingProfilerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_589
-    .catch Ljava/lang/Throwable; {:try_start_578 .. :try_end_589} :catch_988
+    :try_end_56f
+    .catch Ljava/lang/Throwable; {:try_start_55e .. :try_end_56f} :catch_960
 
-    :goto_589
-    :try_start_589
+    :goto_56f
+    :try_start_56f
     const-string v3, "SystemServer"
 
     const-string v9, "NetworkTimeUpdateService"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v86, Lcom/android/server/NetworkTimeUpdateService;
+    new-instance v84, Lcom/android/server/NetworkTimeUpdateService;
 
-    move-object/from16 v0, v86
+    move-object/from16 v0, v84
 
     invoke-direct {v0, v4}, Lcom/android/server/NetworkTimeUpdateService;-><init>(Landroid/content/Context;)V
-    :try_end_597
-    .catch Ljava/lang/Throwable; {:try_start_589 .. :try_end_597} :catch_994
+    :try_end_57d
+    .catch Ljava/lang/Throwable; {:try_start_56f .. :try_end_57d} :catch_96c
 
-    move-object/from16 v85, v86
+    move-object/from16 v83, v84
 
-    :goto_599
-    :try_start_599
+    :goto_57f
+    :try_start_57f
     const-string v3, "SystemServer"
 
     const-string v9, "CommonTimeManagementService"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v52, Lcom/android/server/CommonTimeManagementService;
+    new-instance v51, Lcom/android/server/CommonTimeManagementService;
 
-    move-object/from16 v0, v52
+    move-object/from16 v0, v51
 
     invoke-direct {v0, v4}, Lcom/android/server/CommonTimeManagementService;-><init>(Landroid/content/Context;)V
-    :try_end_5a7
-    .catch Ljava/lang/Throwable; {:try_start_599 .. :try_end_5a7} :catch_9a0
+    :try_end_58d
+    .catch Ljava/lang/Throwable; {:try_start_57f .. :try_end_58d} :catch_978
 
-    :try_start_5a7
+    :try_start_58d
     const-string v3, "commontime_management"
 
-    move-object/from16 v0, v52
+    move-object/from16 v0, v51
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_5ae
-    .catch Ljava/lang/Throwable; {:try_start_5a7 .. :try_end_5ae} :catch_a28
+    :try_end_594
+    .catch Ljava/lang/Throwable; {:try_start_58d .. :try_end_594} :catch_a00
 
-    move-object/from16 v51, v52
+    move-object/from16 v50, v51
 
-    :goto_5b0
-    :try_start_5b0
+    :goto_596
+    :try_start_596
     const-string v3, "SystemServer"
 
     const-string v9, "CertBlacklister"
@@ -1714,10 +1720,10 @@
     new-instance v3, Lcom/android/server/CertBlacklister;
 
     invoke-direct {v3, v4}, Lcom/android/server/CertBlacklister;-><init>(Landroid/content/Context;)V
-    :try_end_5bc
-    .catch Ljava/lang/Throwable; {:try_start_5b0 .. :try_end_5bc} :catch_9ac
+    :try_end_5a2
+    .catch Ljava/lang/Throwable; {:try_start_596 .. :try_end_5a2} :catch_984
 
-    :goto_5bc
+    :goto_5a2
     invoke-virtual {v4}, Landroid/content/Context;->getResources()Landroid/content/res/Resources;
 
     move-result-object v3
@@ -1728,37 +1734,37 @@
 
     move-result v3
 
-    if-eqz v3, :cond_5e0
+    if-eqz v3, :cond_5c6
 
-    :try_start_5c9
+    :try_start_5af
     const-string v3, "SystemServer"
 
     const-string v9, "Dreams Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v64, Landroid/service/dreams/DreamManagerService;
+    new-instance v63, Landroid/service/dreams/DreamManagerService;
 
-    move-object/from16 v0, v64
+    move-object/from16 v0, v63
 
     invoke-direct {v0, v4}, Landroid/service/dreams/DreamManagerService;-><init>(Landroid/content/Context;)V
-    :try_end_5d7
-    .catch Ljava/lang/Throwable; {:try_start_5c9 .. :try_end_5d7} :catch_9b8
+    :try_end_5bd
+    .catch Ljava/lang/Throwable; {:try_start_5af .. :try_end_5bd} :catch_990
 
-    :try_start_5d7
+    :try_start_5bd
     const-string v3, "dreams"
 
-    move-object/from16 v0, v64
+    move-object/from16 v0, v63
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_5de
-    .catch Ljava/lang/Throwable; {:try_start_5d7 .. :try_end_5de} :catch_a24
+    :try_end_5c4
+    .catch Ljava/lang/Throwable; {:try_start_5bd .. :try_end_5c4} :catch_9fc
 
-    move-object/from16 v63, v64
+    move-object/from16 v62, v63
 
-    :cond_5e0
-    :goto_5e0
-    :try_start_5e0
+    :cond_5c6
+    :goto_5c6
+    :try_start_5c6
     const-string v3, "SystemServer"
 
     const-string v9, "AssetRedirectionManager Service"
@@ -1772,10 +1778,10 @@
     invoke-direct {v9, v4}, Lcom/android/server/AssetRedirectionManagerService;-><init>(Landroid/content/Context;)V
 
     invoke-static {v3, v9}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
-    :try_end_5f1
-    .catch Ljava/lang/Throwable; {:try_start_5e0 .. :try_end_5f1} :catch_9c4
+    :try_end_5d7
+    .catch Ljava/lang/Throwable; {:try_start_5c6 .. :try_end_5d7} :catch_99c
 
-    :goto_5f1
+    :goto_5d7
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/ServerThread;->mContentResolver:Landroid/content/ContentResolver;
@@ -1816,11 +1822,11 @@
 
     invoke-virtual {v3, v9, v10, v11}, Landroid/content/ContentResolver;->registerContentObserver(Landroid/net/Uri;ZLandroid/database/ContentObserver;)V
 
-    invoke-virtual/range {v123 .. v123}, Lcom/android/server/wm/WindowManagerService;->detectSafeMode()Z
+    invoke-virtual/range {v119 .. v119}, Lcom/android/server/wm/WindowManagerService;->detectSafeMode()Z
 
-    move-result v29
+    move-result v28
 
-    if-eqz v29, :cond_9d0
+    if-eqz v28, :cond_9a8
 
     invoke-static {}, Lcom/android/server/am/ActivityManagerService;->self()Lcom/android/server/am/ActivityManagerService;
 
@@ -1838,38 +1844,38 @@
 
     invoke-virtual {v3}, Ldalvik/system/VMRuntime;->disableJitCompilation()V
 
-    :goto_632
-    :try_start_632
-    invoke-virtual/range {v114 .. v114}, Lcom/android/server/VibratorService;->systemReady()V
-    :try_end_635
-    .catch Ljava/lang/Throwable; {:try_start_632 .. :try_end_635} :catch_9d9
-
-    :goto_635
-    if-eqz v59, :cond_63a
-
-    :try_start_637
-    invoke-virtual/range {v59 .. v59}, Lcom/android/server/DevicePolicyManagerService;->systemReady()V
-    :try_end_63a
-    .catch Ljava/lang/Throwable; {:try_start_637 .. :try_end_63a} :catch_9e5
-
-    :cond_63a
-    :goto_63a
-    if-eqz v87, :cond_63f
-
-    :try_start_63c
-    invoke-virtual/range {v87 .. v87}, Lcom/android/server/NotificationManagerService;->systemReady()V
-    :try_end_63f
-    .catch Ljava/lang/Throwable; {:try_start_63c .. :try_end_63f} :catch_9f1
-
-    :cond_63f
-    :goto_63f
-    :try_start_63f
-    invoke-virtual/range {v123 .. v123}, Lcom/android/server/wm/WindowManagerService;->systemReady()V
-    :try_end_642
-    .catch Ljava/lang/Throwable; {:try_start_63f .. :try_end_642} :catch_9fd
+    :goto_618
+    :try_start_618
+    invoke-virtual/range {v110 .. v110}, Lcom/android/server/VibratorService;->systemReady()V
+    :try_end_61b
+    .catch Ljava/lang/Throwable; {:try_start_618 .. :try_end_61b} :catch_9b1
+
+    :goto_61b
+    if-eqz v58, :cond_620
+
+    :try_start_61d
+    invoke-virtual/range {v58 .. v58}, Lcom/android/server/DevicePolicyManagerService;->systemReady()V
+    :try_end_620
+    .catch Ljava/lang/Throwable; {:try_start_61d .. :try_end_620} :catch_9bd
+
+    :cond_620
+    :goto_620
+    if-eqz v85, :cond_625
+
+    :try_start_622
+    invoke-virtual/range {v85 .. v85}, Lcom/android/server/NotificationManagerService;->systemReady()V
+    :try_end_625
+    .catch Ljava/lang/Throwable; {:try_start_622 .. :try_end_625} :catch_9c9
+
+    :cond_625
+    :goto_625
+    :try_start_625
+    invoke-virtual/range {v119 .. v119}, Lcom/android/server/wm/WindowManagerService;->systemReady()V
+    :try_end_628
+    .catch Ljava/lang/Throwable; {:try_start_625 .. :try_end_628} :catch_9d5
 
-    :goto_642
-    if-eqz v29, :cond_64b
+    :goto_628
+    if-eqz v28, :cond_631
 
     invoke-static {}, Lcom/android/server/am/ActivityManagerService;->self()Lcom/android/server/am/ActivityManagerService;
 
@@ -1877,28 +1883,28 @@
 
     invoke-virtual {v3}, Lcom/android/server/am/ActivityManagerService;->showSafeModeOverlay()V
 
-    :cond_64b
-    invoke-virtual/range {v123 .. v123}, Lcom/android/server/wm/WindowManagerService;->computeNewConfiguration()Landroid/content/res/Configuration;
+    :cond_631
+    invoke-virtual/range {v119 .. v119}, Lcom/android/server/wm/WindowManagerService;->computeNewConfiguration()Landroid/content/res/Configuration;
 
-    move-result-object v53
+    move-result-object v52
 
-    new-instance v80, Landroid/util/DisplayMetrics;
+    new-instance v78, Landroid/util/DisplayMetrics;
 
-    invoke-direct/range {v80 .. v80}, Landroid/util/DisplayMetrics;-><init>()V
+    invoke-direct/range {v78 .. v78}, Landroid/util/DisplayMetrics;-><init>()V
 
     const-string v3, "window"
 
     invoke-virtual {v4, v3}, Landroid/content/Context;->getSystemService(Ljava/lang/String;)Ljava/lang/Object;
 
-    move-result-object v116
+    move-result-object v112
 
-    check-cast v116, Landroid/view/WindowManager;
+    check-cast v112, Landroid/view/WindowManager;
 
-    invoke-interface/range {v116 .. v116}, Landroid/view/WindowManager;->getDefaultDisplay()Landroid/view/Display;
+    invoke-interface/range {v112 .. v112}, Landroid/view/WindowManager;->getDefaultDisplay()Landroid/view/Display;
 
     move-result-object v3
 
-    move-object/from16 v0, v80
+    move-object/from16 v0, v78
 
     invoke-virtual {v3, v0}, Landroid/view/Display;->getMetrics(Landroid/util/DisplayMetrics;)V
 
@@ -1906,63 +1912,63 @@
 
     move-result-object v3
 
-    move-object/from16 v0, v53
+    move-object/from16 v0, v52
 
-    move-object/from16 v1, v80
+    move-object/from16 v1, v78
 
     invoke-virtual {v3, v0, v1}, Landroid/content/res/Resources;->updateConfiguration(Landroid/content/res/Configuration;Landroid/util/DisplayMetrics;)V
 
     invoke-virtual {v6}, Lcom/android/server/PowerManagerService;->systemReady()V
 
-    :try_start_673
-    invoke-interface/range {v90 .. v90}, Landroid/content/pm/IPackageManager;->systemReady()V
-    :try_end_676
-    .catch Ljava/lang/Throwable; {:try_start_673 .. :try_end_676} :catch_a09
-
-    :goto_676
-    :try_start_676
-    invoke-virtual/range {v78 .. v78}, Lcom/android/internal/widget/LockSettingsService;->systemReady()V
-    :try_end_679
-    .catch Ljava/lang/Throwable; {:try_start_676 .. :try_end_679} :catch_a15
+    :try_start_659
+    invoke-interface/range {v88 .. v88}, Landroid/content/pm/IPackageManager;->systemReady()V
+    :try_end_65c
+    .catch Ljava/lang/Throwable; {:try_start_659 .. :try_end_65c} :catch_9e1
+
+    :goto_65c
+    :try_start_65c
+    invoke-virtual/range {v76 .. v76}, Lcom/android/internal/widget/LockSettingsService;->systemReady()V
+    :try_end_65f
+    .catch Ljava/lang/Throwable; {:try_start_65c .. :try_end_65f} :catch_9ed
 
-    :goto_679
-    new-instance v68, Landroid/content/IntentFilter;
+    :goto_65f
+    new-instance v67, Landroid/content/IntentFilter;
 
-    invoke-direct/range {v68 .. v68}, Landroid/content/IntentFilter;-><init>()V
+    invoke-direct/range {v67 .. v67}, Landroid/content/IntentFilter;-><init>()V
 
     const-string v3, "com.tmobile.intent.action.APP_LAUNCH_FAILURE"
 
-    move-object/from16 v0, v68
+    move-object/from16 v0, v67
 
     invoke-virtual {v0, v3}, Landroid/content/IntentFilter;->addAction(Ljava/lang/String;)V
 
     const-string v3, "com.tmobile.intent.action.APP_LAUNCH_FAILURE_RESET"
 
-    move-object/from16 v0, v68
+    move-object/from16 v0, v67
 
     invoke-virtual {v0, v3}, Landroid/content/IntentFilter;->addAction(Ljava/lang/String;)V
 
     const-string v3, "android.intent.action.PACKAGE_ADDED"
 
-    move-object/from16 v0, v68
+    move-object/from16 v0, v67
 
     invoke-virtual {v0, v3}, Landroid/content/IntentFilter;->addAction(Ljava/lang/String;)V
 
     const-string v3, "android.intent.action.PACKAGE_REMOVED"
 
-    move-object/from16 v0, v68
+    move-object/from16 v0, v67
 
     invoke-virtual {v0, v3}, Landroid/content/IntentFilter;->addAction(Ljava/lang/String;)V
 
     const-string v3, "com.tmobile.intent.category.THEME_PACKAGE_INSTALL_STATE_CHANGE"
 
-    move-object/from16 v0, v68
+    move-object/from16 v0, v67
 
     invoke-virtual {v0, v3}, Landroid/content/IntentFilter;->addCategory(Ljava/lang/String;)V
 
     const-string v3, "package"
 
-    move-object/from16 v0, v68
+    move-object/from16 v0, v67
 
     invoke-virtual {v0, v3}, Landroid/content/IntentFilter;->addDataScheme(Ljava/lang/String;)V
 
@@ -1970,7 +1976,7 @@
 
     invoke-direct {v3}, Lcom/android/server/AppsLaunchFailureReceiver;-><init>()V
 
-    move-object/from16 v0, v68
+    move-object/from16 v0, v67
 
     invoke-virtual {v4, v3, v0}, Landroid/content/Context;->registerReceiver(Landroid/content/BroadcastReceiver;Landroid/content/IntentFilter;)Landroid/content/Intent;
 
@@ -1984,43 +1990,41 @@
 
     move-object/from16 v21, v8
 
-    move-object/from16 v22, v54
-
-    move-object/from16 v23, v61
+    move-object/from16 v22, v53
 
-    move-object/from16 v24, v98
+    move-object/from16 v23, v60
 
-    move-object/from16 v25, v112
+    move-object/from16 v24, v108
 
-    move-object/from16 v35, v106
+    move-object/from16 v34, v102
 
-    move-object/from16 v26, v110
+    move-object/from16 v25, v106
 
-    move-object/from16 v28, v43
+    move-object/from16 v27, v42
 
-    move-object/from16 v30, v117
+    move-object/from16 v29, v113
 
-    move-object/from16 v31, v71
+    move-object/from16 v30, v69
 
-    move-object/from16 v27, v96
+    move-object/from16 v26, v94
 
-    move-object/from16 v33, v76
+    move-object/from16 v32, v74
 
-    move-object/from16 v34, v56
+    move-object/from16 v33, v55
 
-    move-object/from16 v36, v85
+    move-object/from16 v35, v83
 
-    move-object/from16 v37, v51
+    move-object/from16 v36, v50
 
-    move-object/from16 v38, v108
+    move-object/from16 v37, v104
 
-    move-object/from16 v32, v104
+    move-object/from16 v31, v100
 
-    move-object/from16 v39, v63
+    move-object/from16 v38, v62
 
-    move-object/from16 v40, v73
+    move-object/from16 v39, v71
 
-    move-object/from16 v41, v46
+    move-object/from16 v40, v45
 
     invoke-static {}, Lcom/android/server/am/ActivityManagerService;->self()Lcom/android/server/am/ActivityManagerService;
 
@@ -2030,7 +2034,7 @@
 
     move-object/from16 v15, p0
 
-    invoke-direct/range {v14 .. v41}, Lcom/android/server/ServerThread$1;-><init>(Lcom/android/server/ServerThread;ZLandroid/content/Context;Lcom/android/server/BatteryService;Lcom/android/server/NetworkManagementService;Lcom/android/server/net/NetworkStatsService;Lcom/android/server/net/NetworkPolicyManagerService;Lcom/android/server/ConnectivityService;Lcom/android/server/DockObserver;Lcom/android/server/RotationSwitchObserver;Lcom/android/server/usb/UsbService;Lcom/android/server/UiModeManagerService;Lcom/android/server/RecognitionManagerService;Lcom/android/server/AppWidgetService;ZLcom/android/server/WallpaperManagerService;Lcom/android/server/InputMethodManagerService;Lcom/android/server/StatusBarManagerService;Lcom/android/server/LocationManagerService;Lcom/android/server/CountryDetectorService;Lcom/android/server/ThrottleService;Lcom/android/server/NetworkTimeUpdateService;Lcom/android/server/CommonTimeManagementService;Lcom/android/server/TextServicesManagerService;Landroid/service/dreams/DreamManagerService;Lcom/android/server/input/InputManagerService;Landroid/server/BluetoothService;)V
+    invoke-direct/range {v14 .. v40}, Lcom/android/server/ServerThread$1;-><init>(Lcom/android/server/ServerThread;ZLandroid/content/Context;Lcom/android/server/BatteryService;Lcom/android/server/NetworkManagementService;Lcom/android/server/net/NetworkStatsService;Lcom/android/server/net/NetworkPolicyManagerService;Lcom/android/server/ConnectivityService;Lcom/android/server/DockObserver;Lcom/android/server/usb/UsbService;Lcom/android/server/UiModeManagerService;Lcom/android/server/RecognitionManagerService;Lcom/android/server/AppWidgetService;ZLcom/android/server/WallpaperManagerService;Lcom/android/server/InputMethodManagerService;Lcom/android/server/StatusBarManagerService;Lcom/android/server/LocationManagerService;Lcom/android/server/CountryDetectorService;Lcom/android/server/ThrottleService;Lcom/android/server/NetworkTimeUpdateService;Lcom/android/server/CommonTimeManagementService;Lcom/android/server/TextServicesManagerService;Landroid/service/dreams/DreamManagerService;Lcom/android/server/input/InputManagerService;Landroid/server/BluetoothService;)V
 
     invoke-virtual {v3, v14}, Lcom/android/server/am/ActivityManagerService;->systemReady(Ljava/lang/Runnable;)V
 
@@ -2038,7 +2042,7 @@
 
     move-result v3
 
-    if-eqz v3, :cond_6fd
+    if-eqz v3, :cond_6e1
 
     const-string v3, "SystemServer"
 
@@ -2046,7 +2050,7 @@
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    :cond_6fd
+    :cond_6e1
     invoke-static {}, Landroid/os/Looper;->loop()V
 
     const-string v3, "SystemServer"
@@ -2057,34 +2061,34 @@
 
     return-void
 
-    :cond_708
-    const/16 v95, 0x0
+    :cond_6ec
+    const/16 v93, 0x0
 
     goto/16 :goto_35
 
-    :cond_70c
-    const/16 v94, 0x0
+    :cond_6f0
+    const/16 v92, 0x0
 
     goto/16 :goto_47
 
-    :cond_710
-    invoke-static/range {v67 .. v67}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I
+    :cond_6f4
+    invoke-static/range {v66 .. v66}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I
 
-    move-result v66
+    move-result v65
 
     goto/16 :goto_60
 
-    :cond_716
-    :try_start_716
+    :cond_6fa
+    :try_start_6fa
     const-string v3, "1"
 
-    move-object/from16 v0, v58
+    move-object/from16 v0, v57
 
     invoke-virtual {v3, v0}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
 
     move-result v3
 
-    if-eqz v3, :cond_115
+    if-eqz v3, :cond_113
 
     const-string v3, "SystemServer"
 
@@ -2092,38 +2096,38 @@
 
     invoke-static {v3, v9}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
 
-    const/16 v89, 0x1
+    const/16 v87, 0x1
 
-    goto/16 :goto_115
+    goto/16 :goto_113
 
-    :cond_72b
+    :cond_70f
     const/4 v3, 0x0
 
-    goto/16 :goto_118
+    goto/16 :goto_116
 
-    :catch_72e
-    move-exception v65
+    :catch_712
+    move-exception v64
 
     const-string v3, "SystemServer"
 
     const-string v9, "Failure starting Account Manager"
 
-    move-object/from16 v0, v65
+    move-object/from16 v0, v64
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
-    :try_end_738
-    .catch Ljava/lang/RuntimeException; {:try_start_716 .. :try_end_738} :catch_73a
+    :try_end_71c
+    .catch Ljava/lang/RuntimeException; {:try_start_6fa .. :try_end_71c} :catch_71e
 
-    goto/16 :goto_140
+    goto/16 :goto_13e
 
-    :catch_73a
-    move-exception v65
+    :catch_71e
+    move-exception v64
 
-    move-object/from16 v7, v42
+    move-object/from16 v7, v41
 
-    move-object/from16 v5, v45
+    move-object/from16 v5, v44
 
-    :goto_73f
+    :goto_723
     const-string v3, "System"
 
     const-string v9, "******************************************"
@@ -2134,77 +2138,77 @@
 
     const-string v9, "************ Failure starting core service"
 
-    move-object/from16 v0, v65
+    move-object/from16 v0, v64
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    goto/16 :goto_207
+    goto/16 :goto_20a
 
-    :cond_751
+    :cond_735
     const/4 v3, 0x0
 
-    goto/16 :goto_14d
+    goto/16 :goto_14b
 
-    :cond_754
+    :cond_738
     const/4 v3, 0x0
 
     move v9, v3
 
-    goto/16 :goto_1ca
+    goto/16 :goto_1cd
 
-    :cond_758
+    :cond_73c
     const/4 v3, 0x0
 
-    goto/16 :goto_1cd
+    goto/16 :goto_1d0
 
-    :cond_75b
+    :cond_73f
     const/4 v3, 0x1
 
-    move/from16 v0, v66
+    move/from16 v0, v65
 
-    if-ne v0, v3, :cond_76f
+    if-ne v0, v3, :cond_753
 
-    :try_start_760
+    :try_start_744
     const-string v3, "SystemServer"
 
     const-string v9, "No Bluetooth Service (factory test)"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    goto/16 :goto_203
+    goto/16 :goto_206
 
-    :catch_769
-    move-exception v65
+    :catch_74d
+    move-exception v64
 
-    move-object/from16 v114, v115
+    move-object/from16 v110, v111
 
-    move-object/from16 v74, v75
+    move-object/from16 v72, v73
 
-    goto :goto_73f
+    goto :goto_723
 
-    :cond_76f
+    :cond_753
     const-string v3, "SystemServer"
 
     const-string v9, "Bluetooth Service"
 
     invoke-static {v3, v9}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    new-instance v47, Landroid/server/BluetoothService;
+    new-instance v46, Landroid/server/BluetoothService;
 
-    move-object/from16 v0, v47
+    move-object/from16 v0, v46
 
     invoke-direct {v0, v4}, Landroid/server/BluetoothService;-><init>(Landroid/content/Context;)V
-    :try_end_77d
-    .catch Ljava/lang/RuntimeException; {:try_start_760 .. :try_end_77d} :catch_769
+    :try_end_761
+    .catch Ljava/lang/RuntimeException; {:try_start_744 .. :try_end_761} :catch_74d
 
-    :try_start_77d
+    :try_start_761
     const-string v3, "bluetooth"
 
-    move-object/from16 v0, v47
+    move-object/from16 v0, v46
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
 
-    invoke-virtual/range {v47 .. v47}, Landroid/server/BluetoothService;->initAfterRegistration()V
+    invoke-virtual/range {v46 .. v46}, Landroid/server/BluetoothService;->initAfterRegistration()V
 
     const-string v3, "0"
 
@@ -2218,33 +2222,33 @@
 
     move-result v3
 
-    if-nez v3, :cond_7aa
+    if-nez v3, :cond_78e
 
-    new-instance v49, Landroid/server/BluetoothA2dpService;
+    new-instance v48, Landroid/server/BluetoothA2dpService;
 
-    move-object/from16 v0, v49
+    move-object/from16 v0, v48
 
-    move-object/from16 v1, v47
+    move-object/from16 v1, v46
 
     invoke-direct {v0, v4, v1}, Landroid/server/BluetoothA2dpService;-><init>(Landroid/content/Context;Landroid/server/BluetoothService;)V
-    :try_end_79e
-    .catch Ljava/lang/RuntimeException; {:try_start_77d .. :try_end_79e} :catch_ab4
+    :try_end_782
+    .catch Ljava/lang/RuntimeException; {:try_start_761 .. :try_end_782} :catch_a8c
 
-    :try_start_79e
+    :try_start_782
     const-string v3, "bluetooth_a2dp"
 
-    move-object/from16 v0, v49
+    move-object/from16 v0, v48
 
     invoke-static {v3, v0}, Landroid/os/ServiceManager;->addService(Ljava/lang/String;Landroid/os/IBinder;)V
 
-    invoke-virtual/range {v47 .. v47}, Landroid/server/BluetoothService;->initAfterA2dpRegistration()V
-    :try_end_7a8
-    .catch Ljava/lang/RuntimeException; {:try_start_79e .. :try_end_7a8} :catch_abd
+    invoke-virtual/range {v46 .. v46}, Landroid/server/BluetoothService;->initAfterA2dpRegistration()V
+    :try_end_78c
+    .catch Ljava/lang/RuntimeException; {:try_start_782 .. :try_end_78c} :catch_a95
 
-    move-object/from16 v48, v49
+    move-object/from16 v47, v48
 
-    :cond_7aa
-    :try_start_7aa
+    :cond_78e
+    :try_start_78e
     move-object/from16 v0, p0
 
     iget-object v3, v0, Lcom/android/server/ServerThread;->mContentResolver:Landroid/content/ContentResolver;
@@ -2255,932 +2259,919 @@
 
     invoke-static {v3, v9, v10}, Landroid/provider/Settings$Secure;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
 
-    move-result v50
+    move-result v49
 
-    if-eqz v50, :cond_7ba
+    if-eqz v49, :cond_79e
 
-    invoke-virtual/range {v47 .. v47}, Landroid/server/BluetoothService;->enable()Z
-    :try_end_7ba
-    .catch Ljava/lang/RuntimeException; {:try_start_7aa .. :try_end_7ba} :catch_ab4
+    invoke-virtual/range {v46 .. v46}, Landroid/server/BluetoothService;->enable()Z
+    :try_end_79e
+    .catch Ljava/lang/RuntimeException; {:try_start_78e .. :try_end_79e} :catch_a8c
 
-    :cond_7ba
-    move-object/from16 v46, v47
+    :cond_79e
+    move-object/from16 v45, v46
 
-    goto/16 :goto_203
+    goto/16 :goto_206
 
-    :catch_7be
-    move-exception v65
+    :catch_7a2
+    move-exception v64
 
-    :goto_7bf
+    :goto_7a3
     const-string v3, "starting Input Manager Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_248
+    goto/16 :goto_240
 
-    :catch_7ca
-    move-exception v65
+    :catch_7ae
+    move-exception v64
 
     const-string v3, "starting Accessibility Manager"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_259
+    goto/16 :goto_251
 
-    :catch_7d6
-    move-exception v65
+    :catch_7ba
+    move-exception v64
 
     const-string v3, "making display ready"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_25c
+    goto/16 :goto_254
 
-    :catch_7e2
-    move-exception v65
+    :catch_7c6
+    move-exception v64
 
     const-string v3, "performing boot dexopt"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_25f
+    goto/16 :goto_257
 
-    :catch_7ee
-    move-exception v65
+    :catch_7d2
+    move-exception v64
 
-    :goto_7ef
+    :goto_7d3
     const-string v3, "starting Mount Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_29e
+    goto/16 :goto_296
 
-    :catch_7fa
-    move-exception v65
+    :catch_7de
+    move-exception v64
 
-    :goto_7fb
+    :goto_7df
     const-string v3, "starting LockSettingsService service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_2b5
+    goto/16 :goto_2ad
 
-    :catch_806
-    move-exception v65
+    :catch_7ea
+    move-exception v64
 
-    :goto_807
+    :goto_7eb
     const-string v3, "starting DevicePolicyService"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_2cc
+    goto/16 :goto_2c4
 
-    :catch_812
-    move-exception v65
+    :catch_7f6
+    move-exception v64
 
-    :goto_813
+    :goto_7f7
     const-string v3, "starting StatusBarManagerService"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_2e5
+    goto/16 :goto_2dd
 
-    :catch_81e
-    move-exception v65
+    :catch_802
+    move-exception v64
 
     const-string v3, "starting Clipboard Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_2f6
+    goto/16 :goto_2ee
 
-    :catch_82a
-    move-exception v65
+    :catch_80e
+    move-exception v64
 
     const-string v3, "starting NetworkManagement Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_306
+    goto/16 :goto_2fe
 
-    :catch_836
-    move-exception v65
+    :catch_81a
+    move-exception v64
 
-    :goto_837
+    :goto_81b
     const-string v3, "starting Text Service Manager Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_31d
+    goto/16 :goto_315
 
-    :catch_842
-    move-exception v65
+    :catch_826
+    move-exception v64
 
-    :goto_843
+    :goto_827
     const-string v3, "starting NetworkStats Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_334
+    goto/16 :goto_32c
 
-    :catch_84e
-    move-exception v65
+    :catch_832
+    move-exception v64
 
-    move-object/from16 v8, v83
+    move-object/from16 v8, v81
 
-    :goto_851
+    :goto_835
     const-string v3, "starting NetworkPolicy Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_34b
+    goto/16 :goto_343
 
-    :catch_85c
-    move-exception v65
+    :catch_840
+    move-exception v64
 
-    :goto_85d
+    :goto_841
     const-string v3, "starting Wi-Fi P2pService"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_362
+    goto/16 :goto_35a
 
-    :catch_868
-    move-exception v65
+    :catch_84c
+    move-exception v64
 
-    :goto_869
+    :goto_84d
     const-string v3, "starting Wi-Fi Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_379
+    goto/16 :goto_371
 
-    :catch_874
-    move-exception v65
+    :catch_858
+    move-exception v64
 
-    :goto_875
+    :goto_859
     const-string v3, "starting Connectivity Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_3a0
+    goto/16 :goto_398
 
-    :catch_880
-    move-exception v65
+    :catch_864
+    move-exception v64
 
     const-string v3, "starting Service Discovery Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_3b2
+    goto/16 :goto_3aa
 
-    :catch_88c
-    move-exception v65
+    :catch_870
+    move-exception v64
 
-    :goto_88d
+    :goto_871
     const-string v3, "starting ThrottleService"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_3c9
+    goto/16 :goto_3c1
 
-    :catch_898
-    move-exception v65
+    :catch_87c
+    move-exception v64
 
     const-string v3, "starting UpdateLockService"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_3da
+    goto/16 :goto_3d2
 
-    :catch_8a4
-    move-exception v65
+    :catch_888
+    move-exception v64
 
-    :goto_8a5
+    :goto_889
     const-string v3, "SystemServer"
 
     const-string v9, "Failure starting Profile Manager"
 
-    move-object/from16 v0, v65
+    move-object/from16 v0, v64
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    goto/16 :goto_3f6
+    goto/16 :goto_3ee
 
-    :catch_8b0
-    move-exception v65
+    :catch_894
+    move-exception v64
 
-    :goto_8b1
+    :goto_895
     const-string v3, "starting Notification Manager"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_416
+    goto/16 :goto_40e
 
-    :catch_8bc
-    move-exception v65
+    :catch_8a0
+    move-exception v64
 
     const-string v3, "starting DeviceStorageMonitor service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_427
+    goto/16 :goto_41f
 
-    :catch_8c8
-    move-exception v65
+    :catch_8ac
+    move-exception v64
 
-    :goto_8c9
+    :goto_8ad
     const-string v3, "starting Location Manager"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_43e
+    goto/16 :goto_436
 
-    :catch_8d4
-    move-exception v65
+    :catch_8b8
+    move-exception v64
 
-    :goto_8d5
+    :goto_8b9
     const-string v3, "starting Country Detector"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_455
+    goto/16 :goto_44d
 
-    :catch_8e0
-    move-exception v65
+    :catch_8c4
+    move-exception v64
 
     const-string v3, "starting Search Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_466
+    goto/16 :goto_45e
 
-    :catch_8ec
-    move-exception v65
+    :catch_8d0
+    move-exception v64
 
     const-string v3, "starting DropBoxManagerService"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_47e
+    goto/16 :goto_476
 
-    :catch_8f8
-    move-exception v65
+    :catch_8dc
+    move-exception v64
 
-    :goto_8f9
+    :goto_8dd
     const-string v3, "starting Wallpaper Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_4a4
+    goto/16 :goto_49c
 
-    :catch_904
-    move-exception v65
+    :catch_8e8
+    move-exception v64
 
     const-string v3, "starting Audio Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_4c3
+    goto/16 :goto_4bb
 
-    :catch_910
-    move-exception v65
+    :catch_8f4
+    move-exception v64
 
     const-string v3, "starting DockObserver"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_4d3
+    goto/16 :goto_4cb
 
-    :catch_91c
-    move-exception v65
-
-    const-string v3, "starting RotationSwitchObserver"
-
-    move-object/from16 v0, p0
-
-    move-object/from16 v1, v65
-
-    invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
-
-    goto/16 :goto_4e5
-
-    :catch_928
-    move-exception v65
+    :catch_900
+    move-exception v64
 
     const-string v3, "starting WiredAccessoryObserver"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_4f1
+    goto/16 :goto_4d7
 
-    :catch_934
-    move-exception v65
+    :catch_90c
+    move-exception v64
 
-    :goto_935
+    :goto_90d
     const-string v3, "starting UsbService"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_508
+    goto/16 :goto_4ee
 
-    :catch_940
-    move-exception v65
+    :catch_918
+    move-exception v64
 
-    :goto_941
+    :goto_919
     const-string v3, "SystemServer"
 
     const-string v9, "Failure starting SerialService"
 
-    move-object/from16 v0, v65
+    move-object/from16 v0, v64
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    goto/16 :goto_51f
+    goto/16 :goto_505
 
-    :catch_94c
-    move-exception v65
+    :catch_924
+    move-exception v64
 
     const-string v3, "starting UiModeManagerService"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_52f
+    goto/16 :goto_515
 
-    :catch_958
-    move-exception v65
+    :catch_930
+    move-exception v64
 
     const-string v3, "SystemServer"
 
     const-string v9, "Failure starting Backup Service"
 
-    move-object/from16 v0, v65
+    move-object/from16 v0, v64
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    goto/16 :goto_540
+    goto/16 :goto_526
 
-    :catch_964
-    move-exception v65
+    :catch_93c
+    move-exception v64
 
-    :goto_965
+    :goto_93d
     const-string v3, "starting AppWidget Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_557
+    goto/16 :goto_53d
 
-    :catch_970
-    move-exception v65
+    :catch_948
+    move-exception v64
 
     const-string v3, "starting Recognition Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_567
+    goto/16 :goto_54d
 
-    :catch_97c
-    move-exception v65
+    :catch_954
+    move-exception v64
 
     const-string v3, "starting DiskStats Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_578
+    goto/16 :goto_55e
 
-    :catch_988
-    move-exception v65
+    :catch_960
+    move-exception v64
 
     const-string v3, "starting SamplingProfiler Service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_589
+    goto/16 :goto_56f
 
-    :catch_994
-    move-exception v65
+    :catch_96c
+    move-exception v64
 
     const-string v3, "starting NetworkTimeUpdate service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_599
+    goto/16 :goto_57f
 
-    :catch_9a0
-    move-exception v65
+    :catch_978
+    move-exception v64
 
-    :goto_9a1
+    :goto_979
     const-string v3, "starting CommonTimeManagementService service"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_5b0
+    goto/16 :goto_596
 
-    :catch_9ac
-    move-exception v65
+    :catch_984
+    move-exception v64
 
     const-string v3, "starting CertBlacklister"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_5bc
+    goto/16 :goto_5a2
 
-    :catch_9b8
-    move-exception v65
+    :catch_990
+    move-exception v64
 
-    :goto_9b9
+    :goto_991
     const-string v3, "starting DreamManagerService"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_5e0
+    goto/16 :goto_5c6
 
-    :catch_9c4
-    move-exception v65
+    :catch_99c
+    move-exception v64
 
     const-string v3, "SystemServer"
 
     const-string v9, "Failure starting AssetRedirectionManager Service"
 
-    move-object/from16 v0, v65
+    move-object/from16 v0, v64
 
     invoke-static {v3, v9, v0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
 
-    goto/16 :goto_5f1
+    goto/16 :goto_5d7
 
-    :cond_9d0
+    :cond_9a8
     invoke-static {}, Ldalvik/system/VMRuntime;->getRuntime()Ldalvik/system/VMRuntime;
 
     move-result-object v3
 
     invoke-virtual {v3}, Ldalvik/system/VMRuntime;->startJitCompilation()V
 
-    goto/16 :goto_632
+    goto/16 :goto_618
 
-    :catch_9d9
-    move-exception v65
+    :catch_9b1
+    move-exception v64
 
     const-string v3, "making Vibrator Service ready"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_635
+    goto/16 :goto_61b
 
-    :catch_9e5
-    move-exception v65
+    :catch_9bd
+    move-exception v64
 
     const-string v3, "making Device Policy Service ready"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_63a
+    goto/16 :goto_620
 
-    :catch_9f1
-    move-exception v65
+    :catch_9c9
+    move-exception v64
 
     const-string v3, "making Notification Service ready"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_63f
+    goto/16 :goto_625
 
-    :catch_9fd
-    move-exception v65
+    :catch_9d5
+    move-exception v64
 
     const-string v3, "making Window Manager Service ready"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_642
+    goto/16 :goto_628
 
-    :catch_a09
-    move-exception v65
+    :catch_9e1
+    move-exception v64
 
     const-string v3, "making Package Manager Service ready"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_676
+    goto/16 :goto_65c
 
-    :catch_a15
-    move-exception v65
+    :catch_9ed
+    move-exception v64
 
     const-string v3, "making Lock Settings Service ready"
 
     move-object/from16 v0, p0
 
-    move-object/from16 v1, v65
+    move-object/from16 v1, v64
 
     invoke-virtual {v0, v3, v1}, Lcom/android/server/ServerThread;->reportWtf(Ljava/lang/String;Ljava/lang/Throwable;)V
 
-    goto/16 :goto_679
+    goto/16 :goto_65f
 
-    :catch_a21
+    :catch_9f9
     move-exception v3
 
-    goto/16 :goto_124
+    goto/16 :goto_122
 
-    :catch_a24
-    move-exception v65
+    :catch_9fc
+    move-exception v64
 
-    move-object/from16 v63, v64
+    move-object/from16 v62, v63
 
-    goto :goto_9b9
+    goto :goto_991
 
-    :catch_a28
-    move-exception v65
+    :catch_a00
+    move-exception v64
 
-    move-object/from16 v51, v52
+    move-object/from16 v50, v51
 
-    goto/16 :goto_9a1
+    goto/16 :goto_979
 
-    :catch_a2d
-    move-exception v65
+    :catch_a05
+    move-exception v64
 
-    move-object/from16 v43, v44
+    move-object/from16 v42, v43
 
-    goto/16 :goto_965
+    goto/16 :goto_93d
 
-    :catch_a32
-    move-exception v65
+    :catch_a0a
+    move-exception v64
 
-    move-object/from16 v100, v101
+    move-object/from16 v96, v97
 
-    goto/16 :goto_941
+    goto/16 :goto_919
 
-    :catch_a37
-    move-exception v65
+    :catch_a0f
+    move-exception v64
 
-    move-object/from16 v112, v113
+    move-object/from16 v108, v109
 
-    goto/16 :goto_935
+    goto/16 :goto_90d
 
-    :catch_a3c
-    move-exception v65
+    :catch_a14
+    move-exception v64
 
-    move-object/from16 v117, v118
+    move-object/from16 v113, v114
 
-    goto/16 :goto_8f9
+    goto/16 :goto_8dd
 
-    :catch_a41
-    move-exception v65
+    :catch_a19
+    move-exception v64
 
-    move-object/from16 v56, v57
+    move-object/from16 v55, v56
 
-    goto/16 :goto_8d5
+    goto/16 :goto_8b9
 
-    :catch_a46
-    move-exception v65
+    :catch_a1e
+    move-exception v64
 
-    move-object/from16 v76, v77
+    move-object/from16 v74, v75
 
-    goto/16 :goto_8c9
+    goto/16 :goto_8ad
 
-    :catch_a4b
-    move-exception v65
+    :catch_a23
+    move-exception v64
 
-    move-object/from16 v87, v88
+    move-object/from16 v85, v86
 
-    goto/16 :goto_8b1
+    goto/16 :goto_895
 
-    :catch_a50
-    move-exception v65
+    :catch_a28
+    move-exception v64
 
-    move-object/from16 v92, v93
+    move-object/from16 v90, v91
 
-    goto/16 :goto_8a5
+    goto/16 :goto_889
 
-    :catch_a55
-    move-exception v65
+    :catch_a2d
+    move-exception v64
 
-    move-object/from16 v106, v107
+    move-object/from16 v102, v103
 
-    goto/16 :goto_88d
+    goto/16 :goto_871
 
-    :catch_a5a
-    move-exception v65
+    :catch_a32
+    move-exception v64
 
-    move-object/from16 v54, v55
+    move-object/from16 v53, v54
 
-    goto/16 :goto_875
+    goto/16 :goto_859
 
-    :catch_a5f
-    move-exception v65
+    :catch_a37
+    move-exception v64
 
-    move-object/from16 v119, v120
+    move-object/from16 v115, v116
 
-    goto/16 :goto_869
+    goto/16 :goto_84d
 
-    :catch_a64
-    move-exception v65
+    :catch_a3c
+    move-exception v64
 
-    move-object/from16 v121, v122
+    move-object/from16 v117, v118
 
-    goto/16 :goto_85d
+    goto/16 :goto_841
 
-    :catch_a69
-    move-exception v65
+    :catch_a41
+    move-exception v64
 
-    goto/16 :goto_851
+    goto/16 :goto_835
 
-    :catch_a6c
-    move-exception v65
+    :catch_a44
+    move-exception v64
 
-    move-object/from16 v12, v84
+    move-object/from16 v12, v82
 
-    goto/16 :goto_843
+    goto/16 :goto_827
 
-    :catch_a71
-    move-exception v65
+    :catch_a49
+    move-exception v64
 
-    move-object/from16 v108, v109
+    move-object/from16 v104, v105
 
-    goto/16 :goto_837
+    goto/16 :goto_81b
 
-    :catch_a76
-    move-exception v65
+    :catch_a4e
+    move-exception v64
 
-    move-object/from16 v104, v105
+    move-object/from16 v100, v101
 
-    goto/16 :goto_813
+    goto/16 :goto_7f7
 
-    :catch_a7b
-    move-exception v65
+    :catch_a53
+    move-exception v64
 
-    move-object/from16 v59, v60
+    move-object/from16 v58, v59
 
-    goto/16 :goto_807
+    goto/16 :goto_7eb
 
-    :catch_a80
-    move-exception v65
+    :catch_a58
+    move-exception v64
 
-    move-object/from16 v78, v79
+    move-object/from16 v76, v77
 
-    goto/16 :goto_7fb
+    goto/16 :goto_7df
 
-    :catch_a85
-    move-exception v65
+    :catch_a5d
+    move-exception v64
 
-    move-object/from16 v81, v82
+    move-object/from16 v79, v80
 
-    goto/16 :goto_7ef
+    goto/16 :goto_7d3
 
-    :catch_a8a
+    :catch_a62
     move-exception v3
 
-    goto/16 :goto_272
+    goto/16 :goto_26a
 
-    :catch_a8d
-    move-exception v65
+    :catch_a65
+    move-exception v64
 
-    move-object/from16 v71, v72
+    move-object/from16 v69, v70
 
-    goto/16 :goto_7bf
+    goto/16 :goto_7a3
 
-    :catch_a92
-    move-exception v65
+    :catch_a6a
+    move-exception v64
 
-    move-object/from16 v7, v42
+    move-object/from16 v7, v41
 
-    move-object/from16 v5, v45
+    move-object/from16 v5, v44
 
-    move-object/from16 v6, v91
+    move-object/from16 v6, v89
 
-    goto/16 :goto_73f
+    goto/16 :goto_723
 
-    :catch_a9b
-    move-exception v65
+    :catch_a73
+    move-exception v64
 
-    move-object/from16 v7, v42
+    move-object/from16 v7, v41
 
-    move-object/from16 v5, v45
+    move-object/from16 v5, v44
 
-    move-object/from16 v74, v75
+    move-object/from16 v72, v73
 
-    goto/16 :goto_73f
+    goto/16 :goto_723
 
-    :catch_aa4
-    move-exception v65
+    :catch_a7c
+    move-exception v64
 
-    move-object/from16 v7, v42
+    move-object/from16 v7, v41
 
-    move-object/from16 v74, v75
+    move-object/from16 v72, v73
 
-    goto/16 :goto_73f
+    goto/16 :goto_723
 
-    :catch_aab
-    move-exception v65
+    :catch_a83
+    move-exception v64
 
-    move-object/from16 v7, v42
+    move-object/from16 v7, v41
 
-    move-object/from16 v114, v115
+    move-object/from16 v110, v111
 
-    move-object/from16 v74, v75
+    move-object/from16 v72, v73
 
-    goto/16 :goto_73f
+    goto/16 :goto_723
 
-    :catch_ab4
-    move-exception v65
+    :catch_a8c
+    move-exception v64
 
-    move-object/from16 v46, v47
+    move-object/from16 v45, v46
 
-    move-object/from16 v114, v115
+    move-object/from16 v110, v111
 
-    move-object/from16 v74, v75
+    move-object/from16 v72, v73
 
-    goto/16 :goto_73f
+    goto/16 :goto_723
 
-    :catch_abd
-    move-exception v65
+    :catch_a95
+    move-exception v64
 
-    move-object/from16 v48, v49
+    move-object/from16 v47, v48
 
-    move-object/from16 v46, v47
+    move-object/from16 v45, v46
 
-    move-object/from16 v114, v115
+    move-object/from16 v110, v111
 
-    move-object/from16 v74, v75
+    move-object/from16 v72, v73
 
-    goto/16 :goto_73f
+    goto/16 :goto_723
 
-    :cond_ac8
-    move-object/from16 v8, v83
+    :cond_aa0
+    move-object/from16 v8, v81
 
-    goto/16 :goto_5f1
+    goto/16 :goto_5d7
 .end method
diff -Npru stock-services/smali/com/android/server/StatusBarManagerService.smali pdroid-services/smali/com/android/server/StatusBarManagerService.smali
--- stock-services/smali/com/android/server/StatusBarManagerService.smali	2012-09-01 16:59:50.506746904 -0500
+++ pdroid-services/smali/com/android/server/StatusBarManagerService.smali	2012-09-01 17:00:06.698827190 -0500
@@ -152,7 +152,7 @@
 
     iget-object v1, p0, Lcom/android/server/StatusBarManagerService;->mIcons:Lcom/android/internal/statusbar/StatusBarIconList;
 
-    const v2, 0x1070019
+    const v2, 0x1070018
 
     invoke-virtual {v0, v2}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
diff -Npru stock-services/smali/com/android/server/usb/LegacyUsbDeviceManager$LegacyUsbHandler.smali pdroid-services/smali/com/android/server/usb/LegacyUsbDeviceManager$LegacyUsbHandler.smali
--- stock-services/smali/com/android/server/usb/LegacyUsbDeviceManager$LegacyUsbHandler.smali	2012-09-01 16:59:51.670752661 -0500
+++ pdroid-services/smali/com/android/server/usb/LegacyUsbDeviceManager$LegacyUsbHandler.smali	2012-09-01 17:00:08.222834752 -0500
@@ -1170,7 +1170,7 @@
     :cond_a5
     iget-object v7, p0, Lcom/android/server/usb/LegacyUsbDeviceManager$LegacyUsbHandler;->mCurrentFunctions:Ljava/lang/String;
 
-    const-string v8, "accessory"
+    const-string v8, "mass_storage"
 
     #calls: Lcom/android/server/usb/LegacyUsbDeviceManager;->containsFunction(Ljava/lang/String;Ljava/lang/String;)Z
     invoke-static {v7, v8}, Lcom/android/server/usb/LegacyUsbDeviceManager;->access$700(Ljava/lang/String;Ljava/lang/String;)Z
@@ -1179,13 +1179,29 @@
 
     if-eqz v7, :cond_b4
 
-    const v0, 0x1040464
+    const v0, 0x1040463
 
     goto/16 :goto_2f
 
     :cond_b4
     iget-object v7, p0, Lcom/android/server/usb/LegacyUsbDeviceManager$LegacyUsbHandler;->mCurrentFunctions:Ljava/lang/String;
 
+    const-string v8, "accessory"
+
+    #calls: Lcom/android/server/usb/LegacyUsbDeviceManager;->containsFunction(Ljava/lang/String;Ljava/lang/String;)Z
+    invoke-static {v7, v8}, Lcom/android/server/usb/LegacyUsbDeviceManager;->access$700(Ljava/lang/String;Ljava/lang/String;)Z
+
+    move-result v7
+
+    if-eqz v7, :cond_c3
+
+    const v0, 0x1040464
+
+    goto/16 :goto_2f
+
+    :cond_c3
+    iget-object v7, p0, Lcom/android/server/usb/LegacyUsbDeviceManager$LegacyUsbHandler;->mCurrentFunctions:Ljava/lang/String;
+
     const-string v8, "rndis"
 
     #calls: Lcom/android/server/usb/LegacyUsbDeviceManager;->containsFunction(Ljava/lang/String;Ljava/lang/String;)Z
diff -Npru stock-services/smali/com/android/server/usb/LegacyUsbDeviceManager.smali pdroid-services/smali/com/android/server/usb/LegacyUsbDeviceManager.smali
--- stock-services/smali/com/android/server/usb/LegacyUsbDeviceManager.smali	2012-09-01 16:59:51.674752708 -0500
+++ pdroid-services/smali/com/android/server/usb/LegacyUsbDeviceManager.smali	2012-09-01 17:00:08.226834766 -0500
@@ -570,17 +570,7 @@
 
     array-length v3, v2
 
-    if-lez v3, :cond_30
-
-    iget-object v3, p0, Lcom/android/server/usb/LegacyUsbDeviceManager;->mContentResolver:Landroid/content/ContentResolver;
-
-    const-string v6, "usb_mass_storage_enabled"
-
-    invoke-static {v3, v6, v5}, Landroid/provider/Settings$Secure;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
-
-    move-result v3
-
-    if-ne v3, v4, :cond_47
+    if-lez v3, :cond_26
 
     aget-object v3, v2, v5
 
@@ -588,13 +578,12 @@
 
     move-result v0
 
-    :cond_30
-    :goto_30
-    if-nez v0, :cond_49
+    :cond_26
+    if-nez v0, :cond_3d
 
     move v3, v4
 
-    :goto_33
+    :goto_29
     iput-boolean v3, p0, Lcom/android/server/usb/LegacyUsbDeviceManager;->mUseUsbNotification:Z
 
     iget-object v3, p0, Lcom/android/server/usb/LegacyUsbDeviceManager;->mContentResolver:Landroid/content/ContentResolver;
@@ -603,9 +592,9 @@
 
     iget-boolean v7, p0, Lcom/android/server/usb/LegacyUsbDeviceManager;->mAdbEnabled:Z
 
-    if-eqz v7, :cond_4b
+    if-eqz v7, :cond_3f
 
-    :goto_3d
+    :goto_33
     invoke-static {v3, v6, v4}, Landroid/provider/Settings$Secure;->putInt(Landroid/content/ContentResolver;Ljava/lang/String;I)Z
 
     iget-object v3, p0, Lcom/android/server/usb/LegacyUsbDeviceManager;->mHandler:Lcom/android/server/usb/LegacyUsbDeviceManager$LegacyUsbHandler;
@@ -616,18 +605,13 @@
 
     return-void
 
-    :cond_47
-    const/4 v0, 0x0
-
-    goto :goto_30
-
-    :cond_49
+    :cond_3d
     move v3, v5
 
-    goto :goto_33
+    goto :goto_29
 
-    :cond_4b
+    :cond_3f
     move v4, v5
 
-    goto :goto_3d
+    goto :goto_33
 .end method
diff -Npru stock-services/smali/com/android/server/usb/UsbDeviceManager.smali pdroid-services/smali/com/android/server/usb/UsbDeviceManager.smali
--- stock-services/smali/com/android/server/usb/UsbDeviceManager.smali	2012-09-01 16:59:51.674752708 -0500
+++ pdroid-services/smali/com/android/server/usb/UsbDeviceManager.smali	2012-09-01 17:00:08.226834766 -0500
@@ -827,7 +827,7 @@
 
     move-result-object v7
 
-    const v8, 0x1070037
+    const v8, 0x1070036
 
     invoke-virtual {v7, v8}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
@@ -1269,17 +1269,7 @@
 
     array-length v3, v2
 
-    if-lez v3, :cond_30
-
-    iget-object v3, p0, Lcom/android/server/usb/UsbDeviceManager;->mContentResolver:Landroid/content/ContentResolver;
-
-    const-string v6, "usb_mass_storage_enabled"
-
-    invoke-static {v3, v6, v5}, Landroid/provider/Settings$Secure;->getInt(Landroid/content/ContentResolver;Ljava/lang/String;I)I
-
-    move-result v3
-
-    if-ne v3, v4, :cond_47
+    if-lez v3, :cond_26
 
     aget-object v3, v2, v5
 
@@ -1287,13 +1277,12 @@
 
     move-result v0
 
-    :cond_30
-    :goto_30
-    if-nez v0, :cond_49
+    :cond_26
+    if-nez v0, :cond_3d
 
     move v3, v4
 
-    :goto_33
+    :goto_29
     iput-boolean v3, p0, Lcom/android/server/usb/UsbDeviceManager;->mUseUsbNotification:Z
 
     iget-object v3, p0, Lcom/android/server/usb/UsbDeviceManager;->mContentResolver:Landroid/content/ContentResolver;
@@ -1302,9 +1291,9 @@
 
     iget-boolean v7, p0, Lcom/android/server/usb/UsbDeviceManager;->mAdbEnabled:Z
 
-    if-eqz v7, :cond_4b
+    if-eqz v7, :cond_3f
 
-    :goto_3d
+    :goto_33
     invoke-static {v3, v6, v4}, Landroid/provider/Settings$Secure;->putInt(Landroid/content/ContentResolver;Ljava/lang/String;I)Z
 
     iget-object v3, p0, Lcom/android/server/usb/UsbDeviceManager;->mHandler:Lcom/android/server/usb/UsbDeviceManager$UsbHandler;
@@ -1315,18 +1304,13 @@
 
     return-void
 
-    :cond_47
-    const/4 v0, 0x0
-
-    goto :goto_30
-
-    :cond_49
+    :cond_3d
     move v3, v5
 
-    goto :goto_33
+    goto :goto_29
 
-    :cond_4b
+    :cond_3f
     move v4, v5
 
-    goto :goto_3d
+    goto :goto_33
 .end method
diff -Npru stock-services/smali/com/android/server/usb/UsbDeviceManager$UsbHandler.smali pdroid-services/smali/com/android/server/usb/UsbDeviceManager$UsbHandler.smali
--- stock-services/smali/com/android/server/usb/UsbDeviceManager$UsbHandler.smali	2012-09-01 16:59:51.686752739 -0500
+++ pdroid-services/smali/com/android/server/usb/UsbDeviceManager$UsbHandler.smali	2012-09-01 17:00:08.230834784 -0500
@@ -1250,7 +1250,7 @@
     :cond_a8
     iget-object v7, p0, Lcom/android/server/usb/UsbDeviceManager$UsbHandler;->mCurrentFunctions:Ljava/lang/String;
 
-    const-string v8, "accessory"
+    const-string v8, "mass_storage"
 
     #calls: Lcom/android/server/usb/UsbDeviceManager;->containsFunction(Ljava/lang/String;Ljava/lang/String;)Z
     invoke-static {v7, v8}, Lcom/android/server/usb/UsbDeviceManager;->access$600(Ljava/lang/String;Ljava/lang/String;)Z
@@ -1259,13 +1259,29 @@
 
     if-eqz v7, :cond_b7
 
-    const v0, 0x1040464
+    const v0, 0x1040463
 
     goto/16 :goto_2f
 
     :cond_b7
     iget-object v7, p0, Lcom/android/server/usb/UsbDeviceManager$UsbHandler;->mCurrentFunctions:Ljava/lang/String;
 
+    const-string v8, "accessory"
+
+    #calls: Lcom/android/server/usb/UsbDeviceManager;->containsFunction(Ljava/lang/String;Ljava/lang/String;)Z
+    invoke-static {v7, v8}, Lcom/android/server/usb/UsbDeviceManager;->access$600(Ljava/lang/String;Ljava/lang/String;)Z
+
+    move-result v7
+
+    if-eqz v7, :cond_c6
+
+    const v0, 0x1040464
+
+    goto/16 :goto_2f
+
+    :cond_c6
+    iget-object v7, p0, Lcom/android/server/usb/UsbDeviceManager$UsbHandler;->mCurrentFunctions:Ljava/lang/String;
+
     const-string v8, "rndis"
 
     #calls: Lcom/android/server/usb/UsbDeviceManager;->containsFunction(Ljava/lang/String;Ljava/lang/String;)Z
diff -Npru stock-services/smali/com/android/server/usb/UsbHostManager.smali pdroid-services/smali/com/android/server/usb/UsbHostManager.smali
--- stock-services/smali/com/android/server/usb/UsbHostManager.smali	2012-09-01 16:59:51.686752739 -0500
+++ pdroid-services/smali/com/android/server/usb/UsbHostManager.smali	2012-09-01 17:00:08.230834784 -0500
@@ -71,7 +71,7 @@
 
     move-result-object v0
 
-    const v1, 0x1070027
+    const v1, 0x1070026
 
     invoke-virtual {v0, v1}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
diff -Npru stock-services/smali/com/android/server/WiredAccessoryObserver$UEventInfo.smali pdroid-services/smali/com/android/server/WiredAccessoryObserver$UEventInfo.smali
--- stock-services/smali/com/android/server/WiredAccessoryObserver$UEventInfo.smali	2012-09-01 16:59:50.826748480 -0500
+++ pdroid-services/smali/com/android/server/WiredAccessoryObserver$UEventInfo.smali	2012-09-01 17:00:07.074829057 -0500
@@ -36,7 +36,7 @@
 
     move-result-object v0
 
-    const v1, 0x1070038
+    const v1, 0x1070037
 
     invoke-virtual {v0, v1}, Landroid/content/res/Resources;->getStringArray(I)[Ljava/lang/String;
 
